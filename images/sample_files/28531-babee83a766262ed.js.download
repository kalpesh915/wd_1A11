(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28531],{513580:function(e){var t;t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,(function(t){return e[t]}).bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(13),t),o(n(5),t)},function(e,t,n){"use strict";e.exports=function(e){var t,n={};if(!(e instanceof Object)||Array.isArray(e))throw Error("keyMirror(...): Argument must be an object.");for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n}},function(e,t,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise(function(n,r){var o;function i(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}y(e,t,a,{once:!0}),"error"!==t&&(o={once:!0},"function"==typeof e.on&&y(e,"error",i,o))})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var o,i,a;if(l(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]),void 0===a)a=i[t]=n,++e._eventsCount;else if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=c(e))>0&&a.length>o&&!a.warned){a.warned=!0;var s=Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,console&&console.warn&&console.warn(s)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=p.bind(r);return o.listener=n,r.wrapFn=o,o}function h(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):_(o,o.length)}function v(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function _(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function o(i){r.once&&e.removeEventListener(t,o),n(i)})}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||a(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var a,s=Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)i(u,this,t);else{var l=u.length,c=_(u,l);for(n=0;n<l;++n)i(c[n],this,t)}return!0},s.prototype.addListener=function(e,t){return f(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return f(this,e,t,!0)},s.prototype.once=function(e,t){return l(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,o,i,a;if(l(t),void 0===(r=this._events)||void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0==arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},s.prototype.listenerCount=v,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Envelope=void 0;var r=n(4),o=n(17),i=function(){function e(e,t){this.event=e,this.eid=(0,o.v4)(),this.ts_ms=Date.now(),this.created_at=Date.now(),this._tracker=new r.Tracker,this._globalBPO=t}return Object.defineProperty(e.prototype,"tracker",{get:function(){return this._tracker},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"global",{get:function(){return this._globalBPO},enumerable:!1,configurable:!0}),e.getAttributeTypeMap=function(){return e.attributeTypeMap},e.attributeTypeMap=[{name:"eid",baseName:"eid",type:"string"},{name:"ts_ms",baseName:"ts_ms",type:"number"},{name:"created_at",baseName:"created_at",type:"number"},{name:"event",baseName:"event",type:"Event"},{name:"global",baseName:"global",type:"Event"},{name:"tracker",baseName:"tracker",type:"Tracker"}],e}();t.Envelope=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tracker=void 0;var r=function(){function e(){}return e.getAttributeTypeMap=function(){return e.attributeTypeMap},e.attributeTypeMap=[{name:"name",baseName:"name",type:"string"},{name:"version",baseName:"version",type:"string"}],e}();t.Tracker=r},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectSerializer=void 0,o(n(3),t),o(n(6),t),o(n(7),t),o(n(4),t),o(n(14),t);var i=n(3),a=n(6),s=n(7),u=n(4),l=["string","boolean","double","integer","long","float","number","any"],c={},f={Envelope:i.Envelope,Event:a.Event,Tracker:u.Tracker,EventContext:s.EventContext},p=function(){function e(){}return e.findCorrectType=function(e,t){if(null==e||-1!==l.indexOf(t.toLowerCase())||"Date"===t||c[t]||!f[t])return t;var n=f[t].discriminator;if(null==n)return t;if(e[n]){var r=e[n];return f[r]?r:t}return t},e.serialize=function(t,n){if(null==t||-1!==l.indexOf(n.toLowerCase()))return t;if(0===n.lastIndexOf("Array<",0)){var r=n.replace("Array<","");r=r.substring(0,r.length-1);var o=[];for(var i in t){var a=t[i];o.push(e.serialize(a,r))}return o}if("Date"===n)return t.toISOString();if(c[n]||!f[n])return t;var s=f[n=this.findCorrectType(t,n)].getAttributeTypeMap(),u={};for(var i in s){var p=s[i];u[p.baseName]=e.serialize(t[p.name],p.type)}return u},e.deserialize=function(t,n){if(n=e.findCorrectType(t,n),null==t||-1!==l.indexOf(n.toLowerCase()))return t;if(0===n.lastIndexOf("Array<",0)){var r=n.replace("Array<","");r=r.substring(0,r.length-1);var o=[];for(var i in t){var a=t[i];o.push(e.deserialize(a,r))}return o}if("Date"===n)return new Date(t);if(c[n]||!f[n])return t;var s=new f[n],u=f[n].getAttributeTypeMap();for(var i in u){var p=u[i];s[p.name]=e.deserialize(t[p.baseName],p.type)}return s},e}();t.ObjectSerializer=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var r=function(){function e(e,t,n,r){this.name=e,this.ts_ms=Date.now(),this.version=t,this.fields=n,this.namespace=r}return e.getAttributeTypeMap=function(){return e.attributeTypeMap},e.attributeTypeMap=[{name:"name",baseName:"name",type:"string"},{name:"ts_ms",baseName:"ts_ms",type:"number"},{name:"version",baseName:"version",type:"number"},{name:"fields",baseName:"fields",type:"object"},{name:"namespace",baseName:"namespace",type:"string"}],e}();t.Event=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventContext=void 0;var r=function(){function e(e,t,n,r){this.name=e,this.ts_ms=Date.now(),this.version=t,this.fields=n,this.namespace=r}return e.getAttributeTypeMap=function(){return e.attributeTypeMap},e.attributeTypeMap=[{name:"name",baseName:"name",type:"string"},{name:"ts_ms",baseName:"ts_ms",type:"number"},{name:"version",baseName:"version",type:"number"},{name:"fields",baseName:"fields",type:"object"},{name:"namespace",baseName:"namespace",type:"string"}],e}();t.EventContext=r},function(e){e.exports=JSON.parse('{"name":"vimeo-uploader","version":"2.26.0","log_to_console":false,"tomdawg":{"url":"https://devu.cloud.vimeo.com"},"lighthouse":{"url":"https://lighthouse.vimeocdn.com"},"leatherback":{"url":"https://leatherback.vimeo-prod.appspot.com"},"user":{"id":1,"account_type":"basic","is_mod":true,"use_leatherback":false}}')},function(e,t,n){var r=n(11),o=n(12);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}},function(e,t,n){e.exports=n(15)},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}},function(e,t,n){"use strict";var r,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}u((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.BigPictureClient=t.Configuration=t.Service=void 0;var l,c=n(16),f=n(3),p=n(5);(r=l=t.Service||(t.Service={})).FRESNEL_PROD="https://fresnel-events.vimeocdn.com",r.FRESNEL_DEV="https://fresnel-event-staging.vimeows.com";var d=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null),this.service=e,this.globalBPO=t,this.contexts=n};t.Configuration=d;var h=function(){function e(){}return Object.defineProperty(e,"isInitalized",{get:function(){return!!e.conf.globalBPO},enumerable:!1,configurable:!0}),e.configure=function(t){e.conf=t,e.WAIT_QUEUE.length>0&&(e.WAIT_QUEUE.map(function(t){return e.sendEvent(t)}),e.WAIT_QUEUE=[])},e.updateObject=function(t,n){return i(this,void 0,void 0,function(){var r,o,i,l,c,f,p;return a(this,function(a){try{for(o=(r=s(Object.entries(t))).next();!o.done;o=r.next())if(l=(i=u(o.value,2))[0],c=i[1],l in n){if(c instanceof Object)return n[l]instanceof Object?e.updateObject(c,n[l]):n[l]=c,[2];n[l]=c}}catch(e){f={error:e}}finally{try{o&&!o.done&&(p=r.return)&&p.call(r)}finally{if(f)throw f.error}}return[2]})})},e.updateContext=function(t){return i(this,void 0,void 0,function(){return a(this,function(n){return"global"==t.context&&e.conf.globalBPO&&e.updateObject(t.fields,e.conf.globalBPO.fields),[2]})})},e.setEventsContext=function(t,n){return i(this,void 0,void 0,function(){var r,i;return a(this,function(a){return(r=o({},e.conf)).contexts=((i={})[t]=n,i),e.conf=r,[2]})})},e.sendEvent=function(t,n){return i(this,void 0,void 0,function(){var r,o,i,s,u;return a(this,function(a){switch(a.label){case 0:if(null==t)throw Error("Required parameter event was null or undefined when calling sendEvent.");return e.isInitalized?(r=JSON.stringify(p.ObjectSerializer.serialize([new f.Envelope(t,this.conf.globalBPO)],"Array<Envelope>")),o=t.name,null!=t.namespace&&(o=(0,c.snakeCase)(t.namespace)+"."+t.name),i="".concat(this.conf.service,"/add/").concat(encodeURIComponent(o)),navigator.sendBeacon&&!n?[3,2]:(s={method:"POST",headers:{"Content-Type":"application/json","User-Agent":navigator.userAgent,Origin:location.origin,Referer:document.referrer},body:r},n&&(s.headers.Authorization=n),[4,fetch(i,s)])):(e.WAIT_QUEUE.push(t),e.waitAndFlushQueue(),[2]);case 1:return a.sent(),[3,3];case 2:u=new Blob([r]),navigator.sendBeacon(i,u),a.label=3;case 3:return[2]}})})},e.sendEventWithContext=function(t,n){return i(this,void 0,void 0,function(){var r,o,i,s,u,l,d,h;return a(this,function(a){switch(a.label){case 0:if(null==t)throw Error("Required parameter event was null or undefined when calling sendEvent.");return e.isInitalized&&this.conf.contexts&&n in this.conf.contexts?(r=new f.Envelope(t,this.conf.globalBPO),(o=p.ObjectSerializer.serialize([r],"Array<Envelope>"))[0].contexts={},i=p.ObjectSerializer.serialize(this.conf.contexts[n],"Event"),o[0].contexts[n]=i,s=JSON.stringify(o),u=t.name,null!=t.namespace&&(u=(0,c.snakeCase)(t.namespace)+"."+t.name),l="".concat(this.conf.service,"/add/").concat(encodeURIComponent(u)),navigator.sendBeacon?[3,2]:(d={method:"POST",headers:{"Content-Type":"application/json","User-Agent":navigator.userAgent,Origin:location.origin,Referer:document.referrer},body:s},[4,fetch(l,d)])):(e.WAIT_QUEUE.push(t),e.waitAndFlushQueue(),[2]);case 1:return a.sent(),[3,3];case 2:h=new Blob([s]),navigator.sendBeacon(l,h),a.label=3;case 3:return[2]}})})},e.sendEventWithContexts=function(t,n){return i(this,void 0,void 0,function(){var r,o,i,l,d,h,v,_,y,g,b,m,E,w,O;return a(this,function(a){switch(a.label){case 0:if(null==t)throw Error("Required parameter event was null or undefined when calling sendEvent.");if(!e.isInitalized)return e.WAIT_QUEUE.push(t),e.waitAndFlushQueue(),[2];r=new f.Envelope(t,this.conf.globalBPO),(o=p.ObjectSerializer.serialize([r],"Array<Envelope>"))[0].contexts={};try{for(l=(i=s(Object.entries(n))).next();!l.done;l=i.next())h=(d=u(l.value,2))[0],v=d[1],_=p.ObjectSerializer.serialize(v,"EventContext"),o[0].contexts[h]=_}catch(e){w={error:e}}finally{try{l&&!l.done&&(O=i.return)&&O.call(i)}finally{if(w)throw w.error}}return y=JSON.stringify(o),g=t.name,null!=t.namespace&&(g=(0,c.snakeCase)(t.namespace)+"."+t.name),b="".concat(this.conf.service,"/add/").concat(encodeURIComponent(g)),navigator.sendBeacon?[3,2]:(m={method:"POST",headers:{"Content-Type":"application/json","User-Agent":navigator.userAgent,Origin:location.origin,Referer:document.referrer},body:y},[4,fetch(b,m)]);case 1:return a.sent(),[3,3];case 2:E=new Blob([y]),navigator.sendBeacon(b,E),a.label=3;case 3:return[2]}})})},e.waitAndFlushQueue=function(){e.flushQueueTimeoutHandler||(e.flushQueueTimeoutHandler=setTimeout(function(){e.WAIT_QUEUE.length>0&&(e.WAIT_QUEUE=[],console.error("[BigPicture] All events are dropped, BigPicture Client must be configured to send events."))},e.FLUSH_QUEUE_TIMEOUT))},e.FLUSH_QUEUE_TIMEOUT=1e4,e.conf=new d(l.FRESNEL_PROD),e.WAIT_QUEUE=[],e}();t.BigPictureClient=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalContext=void 0,t.GlobalContext=function(e,t,n,r){void 0===r&&(r=""),this.name=e,this.ts_ms=Date.now(),this.version=t,this.fields=n,this.namespace=r}},function(e,t,n){"use strict";n.r(t),n.d(t,"SERVICE_APP_IDS",function(){return e1}),n.d(t,"API_APPS",function(){return e2}),n.d(t,"ERRORS",function(){return C}),n.d(t,"ERROR_CODES",function(){return I}),n.d(t,"EVENTS",function(){return u}),n.d(t,"SERVICES",function(){return c}),n.d(t,"STATES",function(){return s}),n.d(t,"TYPES",function(){return l});var r=n(8),o=n(1),i=n.n(o),a=i()({STARTING:null,VALIDATING:null,ATTACHING:null,UPLOADING:null,RESUMING:null,REROUTING:null}),s=Object.assign({},a,i()({QUEUED:null,PAUSED:null,CANCELED:null,COMPLETED:null,FAILED:null,CANCELING:null,REMOVED:null})),u=i()({PROGRESS:null,STATE_CHANGE:null,FILE_SIZE_CHANGED:null}),l={CLIP:"clip",CLIP_REPLACE:"replace_clip",API_PULL_CLIP:"api_pull_clip",API_PULL_CLIP_REPLACE:"api_pull_clip_replace",DRM_CLIP:"drm_clip",DRM_CLIP_REPLACE:"drm_clip_replace"},c={UPLOAD_SERVICE_SITE:"UPLOAD_SERVICE_SITE",UPLOAD_SERVICE_LEATHERBACK:"UPLOAD_SERVICE_LEATHERBACK",UPLOAD_SERVICE_API:"UPLOAD_SERVICE_API"},f=n(9),p=n.n(f),d=n(2),h=n.n(d);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){(function(e,t,n){var r;(r=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===v(r)?r:String(r))in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g=function e(t,n){var r,o=[];for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];switch(n&&(i="".concat(n,"[").concat(i,"]")),Object.prototype.toString.call(a)){case"[object Object]":r=e(a,i);break;case"[object Array]":var s={};if(0===a.length)a=null;else{for(var u=0,l=a.length;u<l;u++)s[u]=a[u];r=e(s,i)}break;default:r="".concat(i,"=").concat(encodeURIComponent(a))}null!==a&&o.push(r)}return o.join("&")},b=function(){var e;if("undefined"!=typeof window&&!("Blob"in window))return!1;try{e=new Blob}catch(t){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,!window.BlobBuilder)return!1;"TypeError"===t.name&&window.BlobBuilder&&(e=(new window.BlobBuilder).getBlob())}return"slice"in e?"slice":"mozSlice"in e?"mozSlice":"webkitSlice"in e&&"webkitSlice"},m=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(){for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return new Promise(function(o,a){t.apply(void 0,i).then(o).catch(function(s){var u=r+1;if(u>n)return a(s);var l=1e3*Math.pow(2,u)+Math.round(1e3*Math.random()),c=e(t,n,u);return setTimeout(function(){c.apply(void 0,i).then(o).catch(a)},l)})})}},E=function(e,t){return t=y(y({},{method:"GET",headers:{},body:null,withCredentials:!1,successCode:200}),t),new Promise(function(n,r){var o=new XMLHttpRequest;o.open(t.method,e),Object.keys(t.headers).forEach(function(e){o.setRequestHeader(e,t.headers[e])}),o.addEventListener("load",function(e){return e.target.status!==t.successCode?r(e):n(e)}),o.addEventListener("error",r),o.addEventListener("timeout",r),o.send(t.body)})},w=m(E,4);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n,r,o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,r=void 0,r=function(e,t){if("object"!==O(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==O(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===O(r)?r:String(r)),i)}}var P=["assert","clear","count","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","profile","profileEnd","table","time","timeEnd","trace","warn"],A={log:"DEFAULT",info:"INFO",debug:"NOTICE",warn:"WARNING",error:"ERROR"},S=function(){var e,t;function n(e){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),this.limit=P.length,this._logs=[],this._log_strings=[],this._console="object"===("undefined"==typeof console?"undefined":O(console))?console:function(){for(var e={},t=P.length,n=0;n<t;n++)e[P[n]]=function(){};return e}(),this.config=e,this.output_to_console=e.log_to_console||e.user.is_mod,this.labels={version:e.version,user_id:"".concat(e.user.id),user_account_type:e.user.account_type,user_agent:window?window.navigator.userAgent:""}}return e=[{key:"logs",get:function(){return this._log_strings}},{key:"_normalizeLog",value:function(){var e=arguments.length,t="";if(0===e)return null;for(var n=0;n<e;n++){var r=n<0||arguments.length<=n?void 0:arguments[n],o=O(r);t+="string"===o||"number"===o||"boolean"===o?r:"[Object object]",n<e-1&&(t+=", ")}return t}},{key:"_addLogEntry",value:function(e){for(var t=this.labels,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0;i<r.length;i++){var a={severity:A[e],labels:t,timestamp:(new Date).toISOString()},s=r[i],u=O(s);"object"!==u||Array.isArray(u)?a.textPayload=s:a.jsonPayload=s,this._logs.push(a)}var l=this._normalizeLog.apply(this,r);this._log_strings.push(l),this.output_to_console&&this._console[e](l)}},{key:"addLabel",value:function(e,t){e&&t?(this.labels["".concat(e)]="".concat(t),this._logs=this._logs.map(function(n){return n.labels["".concat(e)]="".concat(t),n})):this._addLogEntry("warn","Incorrect logger label: {".concat(e,": ").concat(t,"}"))}},{key:"log",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];0!==t.length&&this._addLogEntry.apply(this,["log"].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];0!==t.length&&this._addLogEntry.apply(this,["info"].concat(t))}},{key:"debug",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];0!==t.length&&this._addLogEntry.apply(this,["debug"].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];0!==t.length&&this._addLogEntry.apply(this,["warn"].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];0!==t.length&&this._addLogEntry.apply(this,["error"].concat(t))}},{key:"clear",value:function(){this._logs=[],this._log_strings=[]}}],R(n.prototype,e),t&&R(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();function j(e,t){window.newrelic&&window.newrelic.noticeError(e,t)}var C=i()({NO_MACHINE_ID:null,VERIFICATION_FAILED:null,DNS_ERROR:null,COMPLETE_CALL_FAILED:null,RETRY_FAILED:null,ATTACH_FAILED:null,PROGRESS_CALL_ERROR:null,METADATA_CALL_ERROR:null,PROGRESS_STATE_MISMATCH:null,VIDEO_FILE_INVALID:null,QUOTA_EXCEEDED:null,NETWORK_ERROR:null,VIDEO_FILE_REMOVED:null,VIDEO_FILE_SIZE_CHANGED:null,FILE_TOO_SMALL:null,INVALID_DROPBOX_URL:null,INVALID_UPLOAD_ENDPOINT:null,RANGE_FAILED:null,PULL_FAILED:null,VALIDATOR_CALL_ERROR:null,LIGHTHOUSE_LOAD_ERROR:null,LIGHTHOUSE_RACE_ERROR:null,RANGE_RESUME_FAILED:null,TOTAL_CAP_EXCEEDED:null,RANGE_RESUME_HEADERS_MISSING:null,RANGE_HEADERS_MISSING:null}),L=[C.VIDEO_FILE_INVALID,C.VIDEO_FILE_SIZE_CHANGED,C.VIDEO_FILE_REMOVED],k=[C.VIDEO_FILE_REMOVED,C.VIDEO_FILE_SIZE_CHANGED],I={NO_MACHINE_ID:901,VERIFICATION_FAILED:902,DNS_ERROR:903,COMPLETE_CALL_FAILED:904,RETRY_FAILED:905,ATTACH_FAILED:906,PROGRESS_CALL_ERROR:907,METADATA_CALL_ERROR:908,PROGRESS_STATE_MISMATCH:909,VIDEO_FILE_INVALID:910,QUOTA_EXCEEDED:911,NETWORK_ERROR:912,VIDEO_FILE_REMOVED:913,VIDEO_FILE_SIZE_CHANGED:914,FILE_TOO_SMALL:915,INVALID_DROPBOX_URL:916,INVALID_UPLOAD_ENDPOINT:917,RANGE_FAILED:918,PULL_FAILED:919,VALIDATOR_CALL_ERROR:920,LIGHTHOUSE_LOAD_ERROR:921,LIGHTHOUSE_RACE_ERROR:922,RANGE_RESUME_FAILED:923,TOTAL_CAP_EXCEEDED:924};function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F(r.key),r)}}function x(e,t){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function D(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==T(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===T(t)?t:String(t)}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(i,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=N(i);return e=t?Reflect.construct(n,arguments,N(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return D(e)}(this,e)});function i(e,t,n,r,a){var u,l,c;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),l=D(u=o.call(this)),(c=F(c="_apiToken"))in l?Object.defineProperty(l,c,{value:null,enumerable:!0,configurable:!0,writable:!0}):l[c]=null,u.upload_type=t,u.file=r,u.initial_size=r.size,u.id=u._generateId(),u.state=s.QUEUED,u.bytes_uploaded=0,u.api_app=n,u.config=e,u.folder_id=r.folder_id,u.logger=new S(e),u.logger.addLabel("upload_type",t),u.logger.addLabel("api_app",n),a&&u.logger.addLabel("clip_id",a),u.error=null,u.uploader=null,u.clip_id=a||null,u.clip_url=null,u.attempt_id=null,u.fastest_region=null,u.ip=null,u.start_timestamp=0,u.end_timestamp=0,u.pause_duration=0,u.slice_method=b(),u._bindMethods(),"object"===T(e.api)&&("jwt"in e.api||"token"in e.api)&&(u._apiToken=e.api.jwt||e.api.token||null),u}return n=[{key:"state",get:function(){return this._state},set:function(e){if(void 0!==e&&this._state!==e){if(-1===Object.keys(s).indexOf(e))throw Error("Invalid state set for Upload: ".concat(e));var t=this._state===s.RESUMING,n=this._state===s.REROUTING;this._state=e,this._hasFileSizeChanged(),this.emit(u.STATE_CHANGE,{state:e,is_resume:t,upload:this}),e!==s.UPLOADING||t||n||(this.start_timestamp=(new Date).getTime())}}},{key:"inactive",get:function(){return this._state===s.CANCELED||this._state===s.COMPLETED||this._state===s.FAILED}},{key:"active",get:function(){return this._state===s.STARTING||this._state===s.VALIDATING||this._state===s.ATTACHING||this._state===s.UPLOADING||this._state===s.RESUMING||this._state===s.REROUTING}},{key:"speed_mbps",get:function(){var e=this.bytes_uploaded,t=this.duration;return 0===t?0:Math.round(8*e/1024/1024/t)}},{key:"duration",get:function(){var e=this.start_timestamp,t=this.pause_duration,n=this.end_timestamp;return Math.round(((n>0?n:(new Date).getTime())-(e+t))/1e3)}},{key:"eta",get:function(){var e=this.bytes_uploaded,t=this.duration,n=this.file;return 0===e||e===n.size?0:Math.round((n.size-e)/(e/t))}},{key:"apiToken",get:function(){return this._apiToken}},{key:"_onUploaderProgress",value:function(e){var t=this.file;(0,this._hasFileSizeChanged)();var n=e.loaded;this.bytes_uploaded=n;var r=this.speed_mbps,o=this.eta;return this.emit(u.PROGRESS,{bytes_uploaded:n,total_bytes:t.size,eta:o,speed_mbps:r})}},{key:"_onUploaderComplete",value:function(){var e=this.file,t=this.config;if(this.upload_type,this.logger,this.end_timestamp=(new Date).getTime(),this.bytes_uploaded=this.file.size,this._onUploaderProgress({loaded:e.size,total:e.size}),this.state=s.COMPLETED,this.removeAllListeners(),t.service===c.UPLOAD_SERVICE_API)return null}},{key:"_onUploaderFail",value:function(e){var t=this.logger;if(e&&"object"===T(e)&&"target"in e&&e.target instanceof XMLHttpRequest?(t.warn("[BaseClient] _onUploaderFail: Status: ".concat(e.target.status," ").concat(e.target.statusText," - Response text: ").concat(e.target.responseText)),j(e,{message:"[BaseClient] _onUploaderFail",status:e.target.status,statusText:e.target.statusText,responseText:e.target.responseText,level:"warning"})):(t.error("[BaseClient] _onUploaderFail: ".concat(e.toString())),j(e,{message:"[BaseClient] _onUploaderFail",responseText:e.toString(),level:"error"})),e.stack&&(t.error(e.stack),j(e.stack,{message:"[BaseClient] _onUploaderFail Error Stack",level:"error"})),this.end_timestamp=(new Date).getTime(),this.error=e,this.state=s.FAILED,this.removeAllListeners(),L.indexOf(e)>-1)return null}},{key:"_onValidateReject",value:function(e){var t=this.logger,n=this.file;return e===C.VALIDATOR_CALL_ERROR?(t.warn("[BaseClient] _onValidateReject: VALIDATOR_CALL_ERROR, passing through"),j(e,{message:"[BaseClient] _onValidateReject: VALIDATOR_CALL_ERROR, passing through",level:"warning"}),Promise.resolve(n.type)):e&&"object"===T(e)&&"target"in e&&e.target instanceof XMLHttpRequest?(t.warn("[BaseClient] _onValidateReject: ".concat(e.target.status," - ").concat(e.target.responseText)),j(e,{message:"[BaseClient] _onValidateReject",status:e.target.status,responseText:e.target.responseText,level:"warning"}),Promise.resolve(n.type)):(t.warn("[BaseClient] _onValidateReject: ".concat(e.toString())),j(e,{message:"[BaseClient] _onValidateReject",level:"warning"}),Promise.reject(e))}},{key:"_onUploaderStateChange",value:function(){var e=this.uploader;switch(e.state){case s.COMPLETED:this._onUploaderComplete();break;case s.FAILED:this._onUploaderFail(e.error);break;default:this.state=e.state}}},{key:"_bindMethods",value:function(){this._onUploaderProgress=this._onUploaderProgress.bind(this),this._onUploaderComplete=this._onUploaderComplete.bind(this),this._onUploaderFail=this._onUploaderFail.bind(this),this._onValidateReject=this._onValidateReject.bind(this),this._onUploaderStateChange=this._onUploaderStateChange.bind(this),this._hasFileSizeChanged=this._hasFileSizeChanged.bind(this),this.start=this.start.bind(this),this.pause=this.pause.bind(this),this.cancel=this.cancel.bind(this),this.resume=this.resume.bind(this),this.finishCancel=this.finishCancel.bind(this)}},{key:"_generateId",value:function(){return p()()}},{key:"_hasFileSizeChanged",value:function(){var e=this.file,t=this.initial_size;if(e.size!==t){var n=0===e.size?C.VIDEO_FILE_REMOVED:C.VIDEO_FILE_SIZE_CHANGED;this.emit(u.FILE_SIZE_CHANGED,n)}}},{key:"start",value:function(){this.state=s.STARTING}},{key:"pause",value:function(){var e=this.logger,t=this.state;t===s.UPLOADING?(this.pause_start=(new Date).getTime(),this.state=s.PAUSED):e.warn("Can only pause while uploading (".concat(t,")"))}},{key:"resume",value:function(){var e=this.logger,t=this.state;t===s.PAUSED?(this.pause_duration+=(new Date).getTime()-this.pause_start,this.state=s.RESUMING):e.warn("Can only resume while paused (".concat(t,")"))}},{key:"fail",value:function(e){console.warn("[BaseClient.fail] Should only be called by subclass")}},{key:"cancel",value:function(){var e=this;this.state=s.CANCELING,setTimeout(function(){e.config.service===c.UPLOAD_SERVICE_API&&e.clip_id||(e.state=s.CANCELED,e.removeAllListeners())},100)}},{key:"finishCancel",value:function(){var e=this;setTimeout(function(){e.state=s.CANCELED,e.removeAllListeners()},100)}}],U(i.prototype,n),r&&U(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(h.a);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n,r,o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,r=void 0,r=function(e,t){if("object"!==G(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==G(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===G(r)?r:String(r)),i)}}function V(e,t){return(V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(i,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=z(i);return e=t?Reflect.construct(n,arguments,z(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===G(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.console;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),r=o.call(this),!e)throw Error("BaseUploader needs a config");if(!t)throw Error("BaseUploader needs an endpoint");if(!n)throw Error("BaseUploader needs a file");return r.config=e,r.endpoint=t,r.file=n,r.logger=a,r.APP_ID=3,r.backoff_count=0,r.backoff_timeout=null,r.bytes_uploaded=0,r.started_on=new Date,r.last_progress_dispatch=null,r.slice_method=b(),r._bindMethods(),r}return n=[{key:"state",get:function(){return this._state},set:function(e){if(void 0!==e&&this._state!==e){if(-1===Object.keys(s).indexOf(e))throw Error("Invalid state set for Upload: ".concat(e));this._state=e,this.emit(u.STATE_CHANGE,{state:e,uploader:this})}}},{key:"_onUploadProgress",value:function(e){var t=this.last_progress_dispatch,n=window.performance.now();this.bytes_uploaded=e.loaded,n-(t=t||0)<200||(this.last_progress_dispatch=n,this.emit(u.PROGRESS,{loaded:e.loaded}))}},{key:"_bindMethods",value:function(){this._complete=this._complete.bind(this),this._onUploadProgress=this._onUploadProgress.bind(this)}},{key:"_complete",value:function(e){this.bytes_uploaded=this.file.size,this.state=s.COMPLETED,this.removeAllListeners()}},{key:"upload",value:function(){}},{key:"pause",value:function(){}},{key:"resume",value:function(){this.state=s.RESUMING}},{key:"cancel",value:function(){this.removeAllListeners()}},{key:"fail",value:function(e){this.logger.error("[BaseUploader] fail: ".concat(e.toString())),j(e,{message:"[BaseUploader] fail",level:"error"}),this.error=e,this.state=s.FAILED,this.removeAllListeners()}}],B(i.prototype,n),r&&B(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(h.a);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t){for(var n,r,o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,r=void 0,r=function(e,t){if("object"!==q(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==q(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===q(r)?r:String(r)),i)}}function Z(){return(Z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=J(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Q(e,t){return(Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(i,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=J(i);return e=t?Reflect.construct(n,arguments,J(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e,t,n,r){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window.console,u=arguments.length>5?arguments[5]:void 0;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,i),(a=o.call(this,e,t,n,s)).mime_type=r,a.resumed_bytes=0;var l=t.match(/v1\/b\/([a-z,-]*)\//);l&&l.length>0&&(a.bucket=l.pop()),void 0===a.bucket&&(l=t.match("com/([a-z,-]*)/"))&&l.length>0&&(a.bucket=l.pop());var c=t.match(/upload_id=([^&]*)/);return c&&c.length>0&&(a.upload_id=c.pop()),a.jwtToken=void 0===u?e.leatherback.token:u,a}return n=[{key:"_bindMethods",value:function(){this._abortRequests=this._abortRequests.bind(this),this._getRange=this._getRange.bind(this),this._makeUploadRequest=this._makeUploadRequest.bind(this),this._onRequestReject=this._onRequestReject.bind(this),this._onRequestResolve=this._onRequestResolve.bind(this),this._parseHeadersForRange=this._parseHeadersForRange.bind(this),this._parseRangeHeader=this._parseRangeHeader.bind(this),this._handleCompleteUpload=this._handleCompleteUpload.bind(this),this._handleIncompleteUpload=this._handleIncompleteUpload.bind(this),Z(J(i.prototype),"_bindMethods",this).call(this)}},{key:"_abortRequests",value:function(){var e=this.logger,t=this._xhr,n=this.backoff_timeout;t?(t.abort(),clearTimeout(n),this.backoff_count=0):e.info("[GCSUploader] no xhr to cancel: ".concat(t))}},{key:"_parseRangeHeader",value:function(e){var t,n=this.logger;if("string"!=typeof e)return n.warn("[GCSUploader] _parseRangeHeader empty header: ".concat(e)),!1;var r=function(e){if(Array.isArray(e))return e}(t=e.split("-"))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{for(i=(n=n.call(e)).next;!(u=(r=i.call(n)).done)&&(s.push(r.value),2!==s.length);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return W(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=r[0],i=r[1];n.info("[GCSUploader] _parseRangeHeader: ".concat(o," -> ").concat(i));var a=parseInt(i,10);return isNaN(a)?(n.warn("[GCSUploader] _parseRangeHeader: finish isn't a number: ".concat(a)),!1):a}},{key:"_parseHeadersForRange",value:function(){var e=this.logger,t=this._xhr,n=this._parseRangeHeader;e.info("[GCSUploader] ".concat(t.status,": ").concat(t.statusText));try{var r=t.getAllResponseHeaders();if(/^Range:/im.test(r)){var o=t.getResponseHeader("Range");return e.info(r),n(o)}e.info("[GCSUploader] _parseHeadersForRange: No range header"),e.info(r)}catch(t){e.info("[GCSUploader] _parseHeadersForRange getAllResponseHeaders: ".concat(t))}try{return n(t.getResponseHeader("Range"))}catch(t){e.info("[GCSUploader] _parseHeadersForRange getResponseHeader: ".concat(t))}try{var i=t.getAllResponseHeaders();e.info("[GCSUploader] _parseHeadersForRange No range header: ".concat(i))}catch(t){e.info("[GCSUploader] _parseHeadersForRange final fail: ".concat(t))}return!1}},{key:"_onRequestReject",value:function(e){var t=this.logger,n=this._xhr;return e&&"object"===q(e)&&"target"in e&&e.target instanceof XMLHttpRequest?(t.warn("[GCSUploader] _onUploaderFail: XHR Failed"),t.warn("[GCSUploader] _onUploaderFail: Status: ".concat(e.target.status," ").concat(e.target.statusText," - Response text: ").concat(e.target.responseText)),j(e,{message:"[GCSUploader] _onUploaderFail",status:e.target.status,statusText:e.target.statusText,level:"warning",responseText:e.target.responseText})):(t.error("[GCSUploader] _onUploaderFail: ~XHR error - ".concat(e)),j(e,{message:"[GCSUploader] _onUploaderFail",level:"error"})),e instanceof Error?this.fail(e):-1===k.indexOf(e)&&n?"status"in n&&404===n.status?this.fail(C.INVALID_UPLOAD_ENDPOINT):this._retryWithBackoff():this.fail(e)}},{key:"_onUploadProgress",value:function(e){var t=this.resumed_bytes+e.loaded;return Z(J(i.prototype),"_onUploadProgress",this).call(this,{loaded:t})}},{key:"_makeRequest",value:function(e,t,n){var r=this,o=this.endpoint,i=this._onUploadProgress,a=this._xhr;return a instanceof XMLHttpRequest&&(2===a.readyState||3===a.readyState)&&a.abort(),new Promise(function(a,s){r.error&&s(r.error),r._xhr=new XMLHttpRequest,r._xhr.open("PUT",o,!0),r._xhr.setRequestHeader("Content-Type",t),r._xhr.setRequestHeader("Content-Range",e),r._xhr.setRequestHeader("X-GUploader-No-308","yes"),r._xhr.addEventListener("load",a),r._xhr.addEventListener("error",s),r._xhr.addEventListener("timeout",s),void 0!==n&&r._xhr.upload.addEventListener("progress",i),r._xhr.send(n)})}},{key:"_getRange",value:function(){var e=this.file;this.logger.info("[GCSUploader] _getRange");var t="bytes */".concat(e.size);return this._makeRequest(t,"application/octet-stream")}},{key:"_makeUploadRequest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.logger,n=this.file,r=this.slice_method,o=this.mime_type,i=this.config.max_request_chunk_size;this.state=s.UPLOADING;var a=n.size,u=n;if(!1===r?(e=0,this.bytes_uploaded=0):(a=Math.min(e+i,n.size),u=n[r](e,a)),0===a)return t.info("User has probably deleted the file"),Promise.reject(C.VIDEO_FILE_REMOVED);a-=1,t.info("[GCSUploader] _makeUploadRequest: ".concat(e," -> ").concat(a));var l="bytes ".concat(e,"-").concat(a,"/").concat(n.size);return this._makeRequest(l,o,u)}},{key:"_onRequestResolve",value:function(){var e=this.logger,t=this._xhr,n=this._handleCompleteUpload,r=this._handleIncompleteUpload,o="308"===t.getResponseHeader("X-HTTP-Status-Code-Override")||308===t.status;return e.info("[GCSUploader] _onRequestResolve: ".concat(t.status)),e.info("[GCSUploader] _onRequestResolve: Incomplete Upload? ".concat(o)),o?r():n()}},{key:"_handleCompleteUpload",value:function(){var e=this.logger,t=this._xhr,n=this._complete;return 200!==t.status?(e.warn("[GCSUploader] Bad GCS response: ".concat(t.status)),this.state===s.RESUMING?Promise.reject(C.RANGE_RESUME_FAILED):Promise.reject(C.RANGE_FAILED)):(e.info("[GCSUploader] Upload complete: ".concat(t.status)),n())}},{key:"_handleIncompleteUpload",value:function(){var e=this._makeUploadRequest,t=this._parseHeadersForRange,n=this._onRequestResolve,r=this._onRequestReject,o=t();return!1===o?this.state===s.RESUMING?Promise.reject(C.RANGE_RESUME_HEADERS_MISSING):Promise.reject(C.RANGE_HEADERS_MISSING):(this.backoff_count=0,this.bytes_uploaded=o,this.resumed_bytes=o,e(o+1).then(n).catch(r))}},{key:"_retryWithBackoff",value:function(){var e=this.file,t=this.logger,n=this._getRange,r=this._makeUploadRequest,o=this._onRequestResolve,i=this._onRequestReject;this.backoff_count++;var a=e.size<=10485760?2:4,u=e.size<=10485760?3:6;if(this.backoff_count>u)return t.info("[GCSUploader] Exceeded retries, failing upload attempt"),this.fail(C.RETRY_FAILED);var l=n;this.backoff_count>a&&(t.info("[GCSUploader] Exceeded range retries, restarting upload"),this.state=s.REROUTING,l=r);var c=1e3*Math.pow(2,this.backoff_count)+Math.round(1e3*Math.random());return t.info("[GCSUploader] retry #".concat(this.backoff_count," after ").concat(c,"ms")),this.backoff_timeout=setTimeout(function(){l().then(o).catch(i)},c),this.backoff_timeout}},{key:"upload",value:function(){var e=this._onRequestResolve,t=this._onRequestReject;Z(J(i.prototype),"upload",this).call(this),this._makeUploadRequest().then(e).catch(t)}},{key:"pause",value:function(){this._abortRequests(),Z(J(i.prototype),"pause",this).call(this)}},{key:"resume",value:function(){var e=this._onRequestResolve,t=this._onRequestReject;Z(J(i.prototype),"resume",this).call(this),this._getRange().then(e).catch(t)}},{key:"fail",value:function(e){Z(J(i.prototype),"fail",this).call(this,e),this._abortRequests()}},{key:"cancel",value:function(){this._abortRequests(),Z(J(i.prototype),"cancel",this).call(this)}}],X(i.prototype,n),r&&X(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(H);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var n,r,o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,r=void 0,r=function(e,t){if("object"!==K(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==K(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===K(r)?r:String(r)),i)}}var ee=function(){var e,t;function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.console;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),"string"!=typeof e)throw Error("Invalid endpoint passed to VideoValidator");this.endpoint=e,this.chunk_size=512,this.logger=t,this._onResolve=this._onResolve.bind(this)}return e=[{key:"slice_method",get:function(){var e;if("undefined"!=typeof window&&!("Blob"in window))return!1;if(this._slice_method)return this._slice_method;try{e=new Blob}catch(t){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,!window.BlobBuilder)return this._slice_method=!1,this._slice_method;"TypeError"===t.name&&window.BlobBuilder&&(e=(new window.BlobBuilder).getBlob())}return"slice"in e?this._slice_method="slice":"mozSlice"in e?this._slice_method="mozSlice":"webkitSlice"in e&&(this._slice_method="webkitSlice"),this._slice_method},set:function(e){this._slice_method=e}},{key:"_onResolve",value:function(e){var t,n=this.logger,r=e.target;if(200!==r.status)return n.info("[VideoValidator] _onResolve status: ".concat(r.status)),n.info("[VideoValidator] _onResolve response: ".concat(r.responseText)),Promise.reject(C.VALIDATOR_CALL_ERROR);try{t=JSON.parse(r.responseText)}catch(e){return n.info("[VideoValidator] _onResolve: Failed to parse xhr.responseText - ".concat(r.responseText)),Promise.reject(e)}return n.addLabel("file_type",t.ContentType),t.Blacklisted?Promise.reject(C.VIDEO_FILE_INVALID):Promise.resolve(t.ContentType)}},{key:"validateFile",value:function(e){var t=this.endpoint,n=this.slice_method,r=this.chunk_size,o=this._onResolve;if(!1===n)return Promise.resolve(e.type);var i={method:"PUT",body:e[n](0,r)};return m(E,2)(t,i).then(o)}},{key:"validateUrl",value:function(e){var t=this.endpoint,n=this._onResolve;return m(E,2)("".concat(t,"?url=").concat(e)).then(n)}}],Y(n.prototype,e),t&&Y(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=ei(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ei(r.key),r)}}function ei(e){var t=function(e,t){if("object"!==et(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==et(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===et(t)?t:String(t)}var ea=function(){var e,t;function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.console;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),!e)throw Error("[VimeoApp] constructor requires a config");this.config=e,this.logger=t,this._parseResponse=this._parseResponse.bind(this),this._parseToken=this._parseToken.bind(this),this.getNewToken=this.getNewToken.bind(this)}return e=[{key:"_parseResponse",value:function(e){var t=this.logger,n=e.target,r=n.status,o=n.responseText;if(200!==r)return t.info("[VimeoApp] _parseResponse ".concat(r,": ").concat(o)),Promise.reject(e);try{var i=JSON.parse(o);return Promise.resolve(i)}catch(e){return Promise.reject(e)}}},{key:"_parseToken",value:function(e){var t=this.logger,n=e.target,r=n.status,o=n.responseText;if(200!==r)return t.info("[VimeoApp] _parseResponse ".concat(r,": ").concat(o)),Promise.reject(e);try{var i=e.target.getResponseHeader("Authorization");return Promise.resolve(i)}catch(e){return t.info("[VimeoApp] _parseResponse ".concat(r,": ").concat(o)),Promise.reject(e)}}},{key:"_post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.config,o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},body:g(er(er({},t),{},{token:r.xsrft})),withCredentials:!0};return null!==n&&(o.headers.Authorization="Bearer ".concat(n)),w(e,o)}},{key:"attach",value:function(e,t,n,r,o,i,a,s){return this._post("/upload/_attach",{file_name:e,file_size:t,type:n,region:r,api_app:o,content_type:i,clip_id:a,folder_id:s}).then(this._parseResponse)}},{key:"pause",value:function(e,t,n){return this._post("/upload/_pause",{attempt_id:e,upload_type:t,signature:n}).then(this._parseResponse)}},{key:"resume",value:function(e,t,n){return this._post("/upload/_resume",{attempt_id:e,upload_type:t,signature:n}).then(this._parseResponse)}},{key:"cancel",value:function(e,t,n){return this._post("/upload/_cancel",{attempt_id:e,upload_type:t,signature:n}).then(this._parseResponse)}},{key:"complete",value:function(e,t,n,r,o,i){return this._post("/upload/_complete",{attempt_id:e,video_file_id:t,upload_type:n,signature:i,make_private:!0===r,file_extension:o&&o.length<=4?o:""}).then(this._parseResponse)}},{key:"fail",value:function(e,t,n){return this._post("/upload/_fail",{attempt_id:e,type:t,signature:n}).then(this._parseResponse)}},{key:"saveError",value:function(e,t){return this._post("/upload/_save_error",{attempt_id:e,error_code:t}).then(this._parseResponse)}},{key:"getNewToken",value:function(e){return this._post("/upload/_verify",{},e).then(this._parseToken)}}],eo(n.prototype,e),t&&eo(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();function es(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eu(e){return(eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function el(e,t){for(var n,r,o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,r=void 0,r=function(e,t){if("object"!==eu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eu(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===eu(r)?r:String(r)),i)}}function ec(){return(ec="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ep(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function ef(e,t){return(ef=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ep(e){return(ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ed=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ef(e,t)}(i,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=ep(i);return e=t?Reflect.construct(n,arguments,ep(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===eu(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e,t,n,r,a){var s;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),s=o.call(this,e,t,n,r,a),!e.tomdawg)throw Error("[SiteClient] tomdawg data not in the config");if(t===l.CLIP_REPLACE&&!a)throw Error("[SiteClient] Clip replacement upload must provide a clip_id");return s.server_url=e.tomdawg.url,s.clip_id=a,s.vimeo_app=new ea(e,s.logger),s._setFileSizeChangeListener(),s}return n=[{key:"_onUploaderComplete",value:function(){var e,t,n=this,r=this.file,o=this.upload_type,a=this.attempt_id,s=this.video_file_id,u=this.vimeo_app,l=this.logger,c=this.signature,f=((e=r.name).match(/\.([^.]*)$/i)&&(t=e.split(".").pop().toLowerCase()),t);u.complete(a,s,o,r,f,c).then(function(e){return ec(ep(i.prototype),"_onUploaderComplete",n).call(n)}).catch(function(e){return l.warn("[SiteClient] _onUploaderComplete failed",e.toString()),n._onUploaderFail(C.COMPLETE_CALL_FAILED)})}},{key:"_onUploaderFail",value:function(e){var t=this.attempt_id;if(ec(ep(i.prototype),"_onUploaderFail",this).call(this,e),t){var n=this.vimeo_app,r=this.upload_type,o=this.signature;e in I&&t&&n.saveError(t,I[e]),n.fail(t,r,o)}}},{key:"_onAttachReject",value:function(e){var t=this.logger;return e&&"object"===eu(e)&&"target"in e&&e.target instanceof XMLHttpRequest?(t.warn("[SiteClient] _onUploaderFail: ".concat(e.target.status," - ").concat(e.target.responseText)),j(e,{message:"[SiteClient] _onUploaderFail",status:e.target.status,responseText:e.target.responseText,level:"warning"})):(t.error("[SiteClient] _onUploaderFail: ".concat(e.toString())),j(e,{message:"[SiteClient] _onUploaderFail",level:"error"})),Promise.reject(C.ATTACH_FAILED)}},{key:"_bindMethods",value:function(){this._onAttachReject=this._onAttachReject.bind(this),this._validate=this._validate.bind(this),this._createAttempt=this._createAttempt.bind(this),this._beginUploading=this._beginUploading.bind(this),this._setFileSizeChangeListener=this._setFileSizeChangeListener.bind(this),ec(ep(i.prototype),"_bindMethods",this).call(this)}},{key:"_validate",value:function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return es(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return es(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=t[0];t.slice(1),this.fastest_region=n;var r=this.id,o=this.file,i=this.server_url,a=this.logger,u=this._onValidateReject;return this.state=s.VALIDATING,new ee("".concat(i,"/probe/").concat(r),a).validateFile(o).catch(u)}},{key:"_createAttempt",value:function(e){var t=this.file,n=this.fastest_region,r=this.vimeo_app,o=this.upload_type,i=this.api_app,a=this.clip_id,u=this.folder_id,l=this._onAttachReject;return this.state=s.ATTACHING,r.attach(t.name,t.size,o,n.Region,i,e,a,u).catch(l)}},{key:"_beginUploading",value:function(e){var t=this.logger,n=this.file,r=this.config,o=this._onUploaderProgress,i=this._onUploaderStateChange,a=e.clip_id,s=e.video_file_id,l=e.attempt_id,c=e.upload_id,f=e.upload_endpoint,p=e.clip_url,d=e.signature;this.clip_id=a,this.clip_url=p,this.attempt_id=l,this.uid=c,this.video_file_id=s,this.signature=d,t.addLabel("clip_id",a),t.addLabel("attempt_id",l),t.addLabel("video_file_id",s),this.uploader=new $(r,f,n,n.type,t),this.uploader.attempt_id=l,this.uploader.on(u.PROGRESS,o),this.uploader.on(u.STATE_CHANGE,i),this.uploader.upload()}},{key:"_setFileSizeChangeListener",value:function(){var e=this;this.on(u.FILE_SIZE_CHANGED,function(t){e.fail(t)})}},{key:"start",value:function(){ec(ep(i.prototype),"start",this).call(this);var e=this.config.lighthouse,t=this._validate,n=this._createAttempt,r=this._beginUploading,o=this._onUploaderFail;e.getFastestRegion().then(t).then(n).then(r).catch(o)}},{key:"pause",value:function(){ec(ep(i.prototype),"pause",this).call(this);var e=this.vimeo_app,t=this.attempt_id,n=this.upload_type,r=this.signature,o=this.logger,a=this.uploader;a&&a.pause(),e.pause(t,n,r).catch(function(e){o.warn("[SiteClient] pause ".concat(e.toString()))})}},{key:"resume",value:function(){ec(ep(i.prototype),"resume",this).call(this);var e=this.vimeo_app,t=this.attempt_id,n=this.upload_type,r=this.signature,o=this.logger,a=this.uploader;a&&a.resume(),e.resume(t,n,r).catch(function(e){o.warn("[SiteClient] resume ".concat(e.toString()))})}},{key:"fail",value:function(e){this.uploader.fail(e)}},{key:"cancel",value:function(){ec(ep(i.prototype),"cancel",this).call(this);var e=this.vimeo_app,t=this.attempt_id,n=this.upload_type,r=this.signature,o=this.logger,a=this.uploader;a&&a.cancel(),e.cancel(t,n,r).catch(function(e){o.warn("[SiteClient] cancel ".concat(e.toString()))})}}],el(i.prototype,n),r&&el(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(M);function eh(e){return(eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ev(e,t){for(var n,r,o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,r=void 0,r=function(e,t){if("object"!==eh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eh(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===eh(r)?r:String(r)),i)}}function e_(){return(e_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eg(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function ey(e,t){return(ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eg(e){return(eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ey(e,t)}(i,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=eg(i);return e=t?Reflect.construct(n,arguments,eg(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===eh(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e,t,n,r){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window.console;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),a=o.call(this,e,t,n,s),!r)throw Error("PullUploader needs an api_token");return a.token=r,a._xhr=null,a}return n=[{key:"_onRequestReject",value:function(e){var t=this.logger,n=e.target;if(t.warn("[PullUpload] _onRequestReject: ".concat(n.status,": ").concat(n.statusText)),n.status>=500)return this.fail(C.DNS_ERROR);var r=JSON.parse(n.responseText);return"error_code"in r&&2204===r.error_code?this.fail(C.VIDEO_FILE_INVALID):"error"in r?this.fail(r.error):this.fail(C.PULL_FAILED)}},{key:"_onRequestResolve",value:function(e){var t=this.logger,n=e.target,r=JSON.parse(n.responseText);if(200!==n.status||!r.uri)return t.info("[PullUpload] PULL_API_FAILED: ".concat(n.status,": ").concat(n.statusText," - ").concat(r.error||n.responseText)),Promise.reject(e);var o=r.uri;return this.clip_id=parseInt(o.split("/").pop(),10),this.clip_url="/".concat(this.clip_id),t.addLabel("clip_id",this.clip_id),this._complete()}},{key:"_bindMethods",value:function(){this._abortRequests=this._abortRequests.bind(this),this._dispatchProgressEvent=this._dispatchProgressEvent.bind(this),this._endFakeProgress=this._endFakeProgress.bind(this),this._makeUploadRequest=this._makeUploadRequest.bind(this),this._onRequestReject=this._onRequestReject.bind(this),this._onRequestResolve=this._onRequestResolve.bind(this),this._startFakeProgress=this._startFakeProgress.bind(this),e_(eg(i.prototype),"_bindMethods",this).call(this)}},{key:"_dispatchProgressEvent",value:function(){var e=this.bytes_uploaded,t=this.file,n=this._onUploadProgress,r=(new Date).getTime()-this.start,o=t.size-e;this.bytes_uploaded=o*Math.sin(r/2e6*(Math.PI/2))+e,n({loaded:e})}},{key:"_startFakeProgress",value:function(){this.start=(new Date).getTime(),this._progressInterval=setInterval(this._dispatchProgressEvent.bind(this),250)}},{key:"_endFakeProgress",value:function(){clearTimeout(this._progressInterval)}},{key:"_makeUploadRequest",value:function(){var e=this,t=this.token,n=this.file,r=this.endpoint;this.state=s.UPLOADING,this._startFakeProgress();var o={type:"pull",link:n.link,size:n.size,current_user:n.target_user_id,folder_id:n.folder_id};n.headers&&(o.headers=n.headers),n.thumbnailLink&&(o.picture_link=n.thumbnailLink),"string"==typeof n.name&&(o.name=n.name);var i={Accept:"application/vnd.vimeo.video;version=3.2",Authorization:"JWT ".concat(t)};return new Promise(function(t,n){e._xhr=new XMLHttpRequest,e._xhr.open("POST",r),e._xhr.setRequestHeader("Content-Type","application/json"),e._xhr.setRequestHeader("Accept",i.Accept),e._xhr.setRequestHeader("Authorization",i.Authorization),e._xhr.addEventListener("load",t),e._xhr.addEventListener("error",n),e._xhr.addEventListener("timeout",n),e._xhr.send(JSON.stringify(o))})}},{key:"_abortRequests",value:function(){var e=this.logger;this._xhr?(this._endFakeProgress(),this._xhr.abort()):e.warn("[PullUploader] no xhr to cancel: ".concat(this._xhr))}},{key:"upload",value:function(){e_(eg(i.prototype),"upload",this).call(this),this._makeUploadRequest().then(this._onRequestResolve.bind(this)).catch(this._onRequestReject.bind(this))}},{key:"fail",value:function(e){e_(eg(i.prototype),"fail",this).call(this,e),this._abortRequests()}},{key:"cancel",value:function(){this.removeAllListeners()}}],ev(i.prototype,n),r&&ev(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(H);function em(e){return(em="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eE(e,t){for(var n,r,o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,r=void 0,r=function(e,t){if("object"!==em(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==em(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===em(r)?r:String(r)),i)}}function ew(){return(ew="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eR(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function eO(e,t){return(eO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eR(e){return(eR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eO(e,t)}(i,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=eR(i);return e=t?Reflect.construct(n,arguments,eR(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===em(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e,t,n,r,a){if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),s=o.call(this,e,t,n,r,a),!r.link)throw Error("ApiClient file object needs a link property");if(!r.size)throw Error("ApiClient file object needs a size property");var s,u=e.api,l=u.url,c=u.tokens,f=u.jwt;if(!l)throw Error("[ApiClient] Incorrect config format for vime api");if(!f)throw Error("Token for Vimeo app must be in config.api.jwt");return s.api_token=c[n]||f,s.endpoint="//".concat(l,"/users/").concat(r.target_user_id,"/videos"),s.vimeo_app=new ea(e,s.logger),s}return n=[{key:"_onUploaderComplete",value:function(){var e=this.uploader,t=e.clip_id,n=e.clip_url;this.clip_id=t,this.clip_url=n,ew(eR(i.prototype),"_onUploaderComplete",this).call(this)}},{key:"_onUploaderFail",value:function(e){var t=this.logger,n=this.attempt_id,r=this.vimeo_app;t.warn("[ApiClient] _onUploaderFail ".concat(e.toString())),j(e,{message:"[ApiClient] _onUploaderFail",level:"warning"}),ew(eR(i.prototype),"_onUploaderFail",this).call(this,e),n&&(L.indexOf(e)>-1||e in I&&r.saveError(n,I[e]))}},{key:"_bindMethods",value:function(){this._validate=this._validate.bind(this),this._beginUploading=this._beginUploading.bind(this),this._validateResponse=this._validateResponse.bind(this),ew(eR(i.prototype),"_bindMethods",this).call(this)}},{key:"_validate",value:function(){var e=this,t=this.logger,n=this.file;return this.state=s.VALIDATING,t.addLabel("file_link",n.link),new Promise(function(t,r){e._xhr=new XMLHttpRequest,e._xhr.open("GET",n.link),"object"===em(n.headers)&&Object.keys(n.headers).forEach(function(t){e._xhr.setRequestHeader(t,n.headers[t])}),e._xhr.onreadystatechange=function(){if(e._xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED||e._xhr.readyState===XMLHttpRequest.READYSTATE_LOADED){var n={status:e._xhr.status,content_type:e._xhr.getResponseHeader("Content-Type")};setTimeout(function(){e._xhr.abort()},0),t(n)}},e._xhr.addEventListener("error",function(){r(C.INVALID_UPLOAD_ENDPOINT)}),e._xhr.addEventListener("timeout",function(){r(C.INVALID_UPLOAD_ENDPOINT)}),e._xhr.send()})}},{key:"_beginUploading",value:function(){var e=this.file,t=this.logger,n=this.endpoint,r=this.api_token,o=this.config,i=this._onUploaderProgress,a=this._onUploaderStateChange;this.uploader=new eb(o,n,e,r,t),this.uploader.on(u.PROGRESS,i),this.uploader.on(u.STATE_CHANGE,a),this.uploader.upload()}},{key:"_validateResponse",value:function(e){return this.logger.addLabel("file_type",e.content_type),429===e.status?Promise.reject(C.INVALID_DROPBOX_URL):200!==e.status?Promise.reject(C.VIDEO_FILE_INVALID):Promise.resolve()}},{key:"start",value:function(){ew(eR(i.prototype),"start",this).call(this);var e=this._validate,t=this._validateResponse,n=this._beginUploading,r=this._onUploaderFail;e().then(t).then(n).catch(r)}},{key:"pause",value:function(){this._xhr.abort(),ew(eR(i.prototype),"pause",this).call(this)}},{key:"resume",value:function(){ew(eR(i.prototype),"resume",this).call(this),this.start()}},{key:"fail",value:function(e){this.uploader.fail(e)}},{key:"cancel",value:function(){this._xhr.abort(),ew(eR(i.prototype),"cancel",this).call(this)}}],eE(i.prototype,n),r&&eE(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(M),eA={UPLOAD_FROM_CLIENT:"upload_from_client",UPLOADER_COMPLETE:"uploader_complete",UPLOAD_FAILURE:"upload_failure"},eS=n(0);function ej(e){return(ej="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ek(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eI(r.key),r)}}function eI(e){var t=function(e,t){if("object"!==ej(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ej(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ej(t)?t:String(t)}function eT(){return(eT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ex(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function eU(e,t){return(eU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ex(e){return(ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eU(e,t)}(i,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=ex(i);return e=t?Reflect.construct(n,arguments,ex(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===ej(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e,t,n,r,a,s){var u;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),u=o.call(this,e,t,n,r,a),!e.leatherback)throw Error("[ApiUploadClient] leatherback data not in the config");if(t===l.CLIP_REPLACE&&!a)throw Error("[ApiUploadClient] Clip replacement upload must provide a clip_id");return u.clip_data=s||null,u.uploaders=[],u.chunk_size=e.default_parallel_chunk_size,u.clip_id=a||null,u.endpoint_count=null,u._setFileSizeChangeListener(),u.vimeo_app=new ea(e,u.logger),u}return n=[{key:"_bindMethods",value:function(){this._create=this._create.bind(this),this._start=this._start.bind(this),this._validate=this._validate.bind(this),this._deleteClip=this._deleteClip.bind(this),this._deleteVersion=this._deleteVersion.bind(this),this._setFileSizeChangeListener=this._setFileSizeChangeListener.bind(this),this._startUploader=this._startUploader.bind(this),this._getNewToken=this._getNewToken.bind(this),this._createAndStartUploaderWithEndpoints=this._createAndStartUploaderWithEndpoints.bind(this),eT(ex(i.prototype),"_bindMethods",this).call(this)}},{key:"_validate",value:function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{for(i=(n=n.call(e)).next;!(u=(r=i.call(n)).done)&&(s.push(r.value),2!==s.length);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,2)||function(e,t){if(e){if("string"==typeof e)return eL(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eL(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=t[0],r=t[1],o=this.id,i=this.file,a=this.config,u=this.logger,l=this._onValidateReject;return this.fastest_region=n,this.ip=r,this.state=s.VALIDATING,new ee("".concat(a.tomdawg.url,"/probe/").concat(o),u).validateFile(i).catch(l)}},{key:"_create",value:function(){var e=this.config,t=this.file,n=this.logger,r=this.upload_type,o=this.clip_id,i={},a="";if(r===l.CLIP_REPLACE&&o)n.info("[ApiUploadClient] _create: Replacing clip by creating new version through API via gcs approach"),i={file_name:t.name.replace(/\.[^.]*$/,"").slice(0,128),upload:{approach:"gcs",size:t.size,mime_type:t.type}},a="https://".concat(e.api.url,"/videos/").concat(o,"/versions?fields=upload.gcs,uri,upload.gcs_uid");else{n.info("[ApiUploadClient] _create: Creating file upload through API via gcs approach");var s=t.target_user_id?t.target_user_id:e.user.id;i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eC(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=eI(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({upload:{approach:"gcs",size:t.size,mime_type:t.type},name:t.name.replace(/\.[^.]*$/,"").slice(0,128),folder_id:t.folder_id},this.clip_data),a="https://".concat(e.api.url,"/users/").concat(s,"/videos?fields=upload.gcs,uri,upload.gcs_uid")}return E(a,{method:"POST",headers:{Authorization:"jwt ".concat(e.api.jwt),Accept:"application/vnd.vimeo.*+json;version=3.4","Content-Type":"application/json"},body:JSON.stringify(i),withCredentials:!0,successCode:201})}},{key:"_start",value:function(e){var t=e.target,n=t.status,r=t.responseText,o=t.statusText,i=this.logger,a=JSON.parse(r);if(201!==n)return i.info("[ApiUploadClient] API_UPLOAD_FAILED: ".concat(n,": ").concat(o," - ").concat(a.error||r)),Promise.reject(e);try{return this.uploads_completed=0,this.endpoints=a.upload.gcs,this.uid=a.upload.gcs_uid,this.clip_url=a.uri,this.clip_id=a.uri.split("/")[2],this.attempt_id=a.upload.gcs[0].metadata.connections.upload_attempt.uri.replace("/upload/attempt/",""),this.endpoint_count=this.endpoints.length,i.info("[ApiUploadClient] _start: Uploading ".concat(this.file.size," byte file to ").concat(this.endpoint_count," endpoints")),this.endpoints.forEach(this._createAndStartUploaderWithEndpoints)}catch(e){return Promise.reject()}}},{key:"_onUploaderFail",value:function(e){var t=this.config,n=this.logger,r=this.uid,o=this.uploaders;if(this.state!==s.FAILED){if(n.info("[ApiUploadClient] _onUploaderFail: Failing remaining uploads"),"string"==typeof e||"code"in e&&"message"in e)eT(ex(i.prototype),"_onUploaderFail",this).call(this,e),o.forEach(function(t){t.fail(e)});else{var a=JSON.parse(e.target.responseText);"error_code"in a&&(8002!==a.error_code&&8e3!==a.error_code||eT(ex(i.prototype),"_onUploaderFail",this).call(this,C.VERIFICATION_FAILED),2204===a.error_code&&"invalid_parameters"in a&&("name"===a.invalid_parameters[0].field||"password"===a.invalid_parameters[0].field)&&eT(ex(i.prototype),"_onUploaderFail",this).call(this,a.invalid_parameters[0].error)),"error"in a&&eT(ex(i.prototype),"_onUploaderFail",this).call(this,a.error),o.forEach(function(e){e.fail(a.error)})}var u=t.user,l="id"in u?u.id:null;l||(e=Error("[ApiUploadClient] _update:  missing user id"),eT(ex(i.prototype),"_onUploaderFail",this).call(this,e)),w("".concat(t.api.url,"/users/").concat(l,"/uploads/").concat(r,"/fail"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(this.jwtToken),"Content-Type":"application/json"}})}}},{key:"_createAndStartUploaderWithEndpoints",value:function(e,t){var n=this.endpoints,r=this.file,o=this.logger,i=this.slice_method,a=this.config,s=this.uid,l=this._onUploaderProgress,c=this._onUploaderStateChange,f=e.upload_link,p=e.start_byte,d=e.end_byte,h=e.metadata.connections.upload_attempt,v=n.length;o.info("[ApiUploadClient] _createAndStartUploaderWithEndpoints for bytes ".concat(p," to ").concat(d," (uploader ").concat(t+1,"/").concat(v,")"));var _=r[i](p,d+1);_.name="".concat(s,"_").concat(t+1,"_").concat(v),_.uid=s;var y=new $(a,f,_,r.type,o,this.jwtToken);y.storage_path=h,this.uploaders.push(y),y.on(u.PROGRESS,l),y.on(u.STATE_CHANGE,c),y.upload()}},{key:"_getNewToken",value:function(){var e=this,t=this.config,n=this.vimeo_app;try{return Promise.resolve(n.getNewToken(t.leatherback.token)).then(function(t){return e.jwtToken=t,t})}catch(e){return Promise.reject(e)}}},{key:"_startUploader",value:function(e,t,n){var r=this.file,o=this.logger,i=this.config,a=this.uploaders,s=this._onUploaderProgress,l=this._onUploaderStateChange,c=new $(i,e,t,r.type,o);c.storage_path=n,a.push(c),c.on(u.PROGRESS,s),c.on(u.STATE_CHANGE,l),c.upload()}},{key:"_onUploaderProgress",value:function(){var e=this.uploaders;this.bytes_uploaded=e.reduce(function(e,t){return e+t.bytes_uploaded},0),eT(ex(i.prototype),"_onUploaderProgress",this).call(this,{loaded:this.bytes_uploaded})}},{key:"_onUploaderStateChange",value:function(e){var t=this,n=this.logger,r=this.signed_urls,o=this._onUploaderComplete,i=this._onUploaderFail,a=this.uploaders,u=this.endpoints,l=this.uploads_completed,c=this.config,f=this.file;switch(e.state){case s.COMPLETED:var p=null;if(void 0!==u?(this.uploads_completed=l+1,p=u.length-this.uploads_completed):(delete r[e.uploader.storage_path],p=Object.keys(r).length),n.info("[ApiUploadClient] _onUploaderStateChange: Completed ".concat(e.uploader.file.name,", ").concat(p," remaining uploads")),p>0)return;var d={title:f.name,folder_id:f.folder_id};E("https://".concat(c.api.url,"/videos/").concat(this.clip_id,"/upload_attempts/").concat(this.uid,"/complete"),{method:"POST",headers:{Authorization:"jwt ".concat(c.api.jwt),Accept:"application/vnd.vimeo.*+json;version=3.4","Content-Type":"application/json"},body:JSON.stringify(d),withCredentials:!0}).catch(function(e){var n=JSON.parse(e.target.responseText);"error_code"in n&&t.logger.warn("[ApiUploadClient] _onUploaderStateChange: Completed: Upload complete call to Vimeo API failed: ".concat(n.error))}),o(),this._sendBigPictureEvent(eA.UPLOADER_COMPLETE);break;case s.UPLOADING:var h=a.some(function(e){return e.state===s.UPLOADING});this.state=h?s.UPLOADING:e.state;break;case s.FAILED:i(e.uploader.error),this._sendBigPictureEvent(eA.UPLOAD_FAILURE)}}},{key:"_setFileSizeChangeListener",value:function(){var e=this;this.on(u.FILE_SIZE_CHANGED,function(t){e.fail(t)})}},{key:"_deleteVersion",value:function(){var e=this,t=this.logger,n=this.config,r=this.uid,o=this.clip_id;if(t.info("[ApiUploadClient] _deleteVersion: Canceling replacement by deleting version"),r){var a="https://".concat(n.api.url,"/videos/").concat(o,"/upload_attempts/").concat(r),s={method:"DELETE",headers:{Authorization:"jwt ".concat(n.api.jwt),"Content-Type":"application/json"},withCredentials:!0,successCode:202};w(a,s).catch(function(e){t.warn("Version deletion for replacement cancellation failed",e)}),w(a,s).then(function(){t.info("[ApiUploadClient] _deleteVersion: Version deletion succeeded:",o),eT(ex(i.prototype),"finishCancel",e).call(e)}).catch(function(n){eT(ex(i.prototype),"finishCancel",e).call(e),t.warn("[ApiUploadClient] _deleteVersion: Version deletion failed:",n,o)})}}},{key:"_deleteClip",value:function(){var e=this,t=this.logger,n=this.config,r=this.clip_url;t.info("[ApiUploadClient] _deleteClip: Deleting clip: ".concat(r)),w("https://".concat(n.api.url).concat(r),{method:"DELETE",headers:{Authorization:"jwt ".concat(n.api.jwt),Accept:"application/vnd.vimeo.*+json;version=3.4","Content-Type":"application/json"},withCredentials:!0,successCode:204}).then(function(){t.info("[ApiUploadClient] _deleteClip: Clip deletion succeeded:",r),eT(ex(i.prototype),"finishCancel",e).call(e)}).catch(function(n){eT(ex(i.prototype),"finishCancel",e).call(e),t.warn("[ApiUploadClient] _deleteClip: Clip deletion failed:",n,r)})}},{key:"start",value:function(){eT(ex(i.prototype),"start",this).call(this);var e=this.config.lighthouse,t=this._validate,n=this._create,r=this._start,o=this._onUploaderFail,a=this._getNewToken;this._sendBigPictureEvent(eA.UPLOAD_FROM_CLIENT),e.getFastestRegion().then(t).then(a).then(n).then(r).catch(o)}},{key:"_sendBigPictureEvent",value:function(e){var t={upload_session_id:this.id,app_id:this.api_app,upload_stage:e,upload_system:"javascript_uploader",file_size:this.file.size,file_type:this.file.type,region:null,clip_id:null,attempt_id:null,upload_id:null,num_files:null,num_endpoints:this.endpoint_count?this.endpoint_count:null,upload_service:"UPLOAD_SERVICE_API"};eS.BigPictureClient.sendEvent(new eS.Event("time_to_play_stages",5,t))}},{key:"pause",value:function(){eT(ex(i.prototype),"pause",this).call(this),this.uploaders.forEach(function(e){e.pause()})}},{key:"resume",value:function(){eT(ex(i.prototype),"resume",this).call(this),this.uploaders.forEach(function(e){e.resume()})}},{key:"fail",value:function(e){this.uploaders.forEach(function(t){t.fail(e)})}},{key:"cancel",value:function(){var e=this.logger,t=this.upload_type;eT(ex(i.prototype),"cancel",this).call(this),this.uploaders.forEach(function(e){e.cancel()}),e.info("[ApiUploadClient] cancel(): Cancelling upload"),t===l.CLIP_REPLACE?this._deleteVersion():this.clip_id&&this._deleteClip()}}],ek(i.prototype,n),r&&ek(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(M);function eN(e){return(eN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eF(e,t){for(var n,r,o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,r=void 0,r=function(e,t){if("object"!==eN(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eN(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===eN(r)?r:String(r)),i)}}var eM=[s.CANCELED,s.COMPLETED,s.FAILED],eG=function(){var e,t;function n(e){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),this.config=e,this._onBeforeWindowUnload=this._onBeforeWindowUnload.bind(this),this._onWindowUnload=this._onWindowUnload.bind(this),this._toggleAbort=this._toggleAbort.bind(this),this.is_set=!1,this.logger=new S(e)}return e=[{key:"uploads",get:function(){return this._uploads},set:function(e){var t=this;this._uploads!==e&&(this._uploads=[],e.forEach(function(e){-1===eM.indexOf(e.state)&&t._uploads.push(e)}),this._uploads.length>0?this._setWarning():this._removeWarning())}},{key:"_setWarning",value:function(){this.is_set||(window.addEventListener("beforeunload",this._onBeforeWindowUnload),window.addEventListener("unload",this._onWindowUnload),this.is_set=!0)}},{key:"_removeWarning",value:function(){window.removeEventListener("beforeunload",this._onBeforeWindowUnload),window.removeEventListener("unload",this._onWindowUnload),this.is_set=!1}},{key:"_makeAborterRequest",value:function(e,t,n,r,o){var i=this;return E("https://".concat(o.replace(/\/$/,""),"/users/").concat(n,"/uploads/").concat(t,"/").concat(e?"revive":"abort"),{method:"PUT",headers:{Authorization:"jwt ".concat(r),Accept:"application/vnd.vimeo.*+json;version=3.4","Content-Type":"application/json"},withCredentials:!0,successCode:204}).then(function(e){return i.logger.debug("[AttemptAborter] response: ",i._xhrEventToLog(e))}).catch(function(e){return i.logger.warn("[AttemptAborter] error: ",i._xhrEventToLog(e))})}},{key:"_xhrEventToLog",value:function(e){if(e instanceof Event){var t=e.target,n=t.status,r=t.statusText,o=t.responseText,i=t.responseType,a=t.response;return JSON.stringify({status:n,statusText:r,responseText:o,responseType:i,typeofResponse:eN(a)})}return null}},{key:"_toggleAbort",value:function(e,t){var n=this.config,r=n.user,o=n.api,i=t.uid,a="id"in r?r.id:null,s=e?"revive":"abort";i?t.apiToken?a?"object"===eN(o)&&o.url?(this.logger.debug("[AttemptAborter] fetching ".concat(s," for upload attempt: "),i),this._makeAborterRequest(e,i,a,t.apiToken,o.url)):this.logger.warn("[AttemptAborter] skip ".concat(s,"; reason: missing Vimeo API URL")):this.logger.warn("[AttemptAborter] skip ".concat(s,"; reason: config missing user ID"),r):this.logger.warn("[AttemptAborter] skip ".concat(s,"; reason: missing API token")):this.logger.warn("[AttemptAborter] skip ".concat(s,"; reason: missing upload attempt ID"),t)}},{key:"_onBeforeWindowUnload",value:function(e){var t=this.uploads,n=this._toggleAbort;this._timeout=window.setTimeout(function(){t.forEach(function(e){n(!0,e)})},3e3),t.forEach(function(e){n(!1,e)});var r="WARNING: You are currently uploading ".concat(t.length," video\n            ").concat(1!==t.length?"s":"","! Your uploads will not be completed if you leave this page.");return((e=e||window.event)||window.event).returnValue=r,r}},{key:"_onWindowUnload",value:function(e){clearTimeout(this._timeout)}}],eF(n.prototype,e),t&&eF(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}(),eB={Ip:"127.0.0.1",Regions:[{PingUrl:"https://storage.googleapis.com/vimeo-prod-src-std-us/0.png",Region:"gs-us"}]},eV=eB.Regions[0];function ez(e){return(ez="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eH(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=eX(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eX(r.key),r)}}function eX(e){var t=function(e,t){if("object"!==ez(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ez(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ez(t)?t:String(t)}var eZ=function(){var e,t;function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.console;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),!e)throw Error("[Lighthouse] url required in first argument");this.url=e,this.logger=t,this.regions=[],this.sorted_regions=[],this._getRegions=this._getRegions.bind(this),this._onRegionsGetSuccess=this._onRegionsGetSuccess.bind(this),this._raceEndpoints=this._raceEndpoints.bind(this),this._sortByRttAndDistance=this._sortByRttAndDistance.bind(this),this._pickWinningEndpoint=this._pickWinningEndpoint.bind(this),this._onRegionsGetFail=this._onRegionsGetFail.bind(this),this._onRaceFail=this._onRaceFail.bind(this),this._getIp=this._getIp.bind(this),this._onIpGetSuccess=this._onIpGetSuccess.bind(this),this._onIpGetFail=this._onIpGetFail.bind(this),this._warn=this._warn.bind(this),this.ip=null,this.fastest_region=null,this.getFastestRegion()}return e=[{key:"_getRegions",value:function(){if(this.regions.length>0)return Promise.resolve(this.regions);var e=this.url;return this._regionsRequest(e)}},{key:"_getIp",value:function(){return null!==this.ip?Promise.resolve(this.ip):w(this.url)}},{key:"_onRegionsGetSuccess",value:function(e){var t=e.target,n=t.status,r=t.responseText;if(200!==n)return this.regions=eB.Regions,this.ip=eB.Ip,Promise.resolve(this.regions);var o=null;try{o=JSON.parse(r)}catch(e){return this._warn("[GETREGIONS] ".concat(e)),this.regions=eB.Regions,this.ip=eB.Ip,Promise.resolve(this.regions)}return this.regions=o.Regions,this.ip=o.Ip,Promise.resolve(o.Regions)}},{key:"_onIpGetSuccess",value:function(e){var t=e.target,n=t.status,r=t.responseText;if(200!==n)return Promise.reject("".concat(n,": ").concat(r));var o=null;try{o=JSON.parse(r)}catch(e){return Promise.reject(e)}return this.ip=o.Ip,Promise.resolve(o.Ip)}},{key:"_raceEndpoints",value:function(e){var t=this._pingRequest,n=this._warn,r=[],o=0,i=new Promise(function(i){e.map(function(a,s){var u=window.performance.now();return t(a.PingUrl).then(function(e){var t=window.performance.now()-u,n=200!==e.target.status?0:t;return r.push(eq(eq({},a),{},{distance_index:s,rtt:n})),t>=1e3&&i(r),e}).catch(function(e){var t="There was an error pinging ".concat(a.Region,": ").concat(e.message);n("_raceEndpoints: ".concat(t))}).then(function(t){return++o===e.length&&i(r),t})})});return Promise.race([new Promise(function(e,t){setTimeout(function(){r.length||(n("_raceEndpoints: No successful responses after ".concat(3e3,"ms")),t(C.LIGHTHOUSE_RACE_ERROR)),e(r)},3e3)}),i])}},{key:"_sortByRttAndDistance",value:function(e){return new Promise(function(t){e.sort(function(e,t){return 100*Math.abs((e.rtt-t.rtt)/e.rtt)<.2?e.distance_index-t.distance_index:e.rtt-t.rtt}),t(e)})}},{key:"_pickWinningEndpoint",value:function(e){return this.sorted_regions=e,this.fastest_region=e[0],Promise.resolve([this.fastest_region,this.ip])}},{key:"_onRegionsGetFail",value:function(e){return(0,this._warn)("_onRegionsGetFail: ".concat(e.toString())),this.ip=eB.Ip,this.regions=eB.Regions,this.sorted_regions=eB.Regions,this.fastest_region=eV,Promise.resolve([this.fastest_region,this.ip])}},{key:"_onIpGetFail",value:function(e){return(0,this._warn)("_onIpGetFail: ".concat(e.toString())),Promise.reject(C.LIGHTHOUSE_LOAD_ERROR)}},{key:"_onRaceFail",value:function(e){var t=this.regions,n=this._warn;return e===C.LIGHTHOUSE_LOAD_ERROR?Promise.reject(e):(n("_onRaceFail: ".concat(e.toString())),t&&t.length>0?(n("_onRaceFail: Resolving with unsorted first region"),Promise.resolve(t[0])):Promise.resolve(this.regions))}},{key:"getFastestRegion",value:function(){var e=this.fastest_region,t=this.ip;if(e)return Promise.resolve([e,t]);var n=this._getRegions,r=this._onRegionsGetSuccess,o=this._pickWinningEndpoint,i=this._onRegionsGetFail;return n().catch(i).then(r).then(o)}},{key:"getIpAddress",value:function(){var e=this.ip;if(e)return Promise.resolve(e);var t=this._getIp,n=this._onIpGetFail,r=this._onIpGetSuccess;return t().catch(n).then(r)}},{key:"_warn",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.logger,r="[Lighthouse] ".concat(e);n.warn(r),t&&j(r)}},{key:"_regionsRequest",value:function(e){return E(e)}},{key:"_pingRequest",value:function(e){return E(e,{method:"HEAD"})}}],eW(n.prototype,e),t&&eW(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();function eQ(e){return(eQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eJ(e,t){for(var n,r,o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,r=void 0,r=function(e,t){if("object"!==eQ(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eQ(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===eQ(r)?r:String(r)),i)}}var e$,eK=function(){var e,t;function n(e){if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),!e)throw Error("Undefined fresnel index name");"vimeo.com"!==window.location.hostname&&(e+="-dev"),this.endpoint="https://fresnel.vimeocdn.com/add/".concat(e)}return e=[{key:"log",value:function(e){var t=this.endpoint;if(e=JSON.stringify(e),navigator.sendBeacon)return navigator.sendBeacon(t,e);var n=new XMLHttpRequest;return n.open("POST",t,!0),n.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),n.send(e)}}],eJ(n.prototype,e),t&&eJ(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();function eY(e){return(eY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e0(e,t,n){var r;return(r=function(e,t){if("object"!==eY(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eY(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===eY(r)?r:String(r))in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var e1=(e0(e$={},"UPLOAD_SERVICE_SITE",3),e0(e$,"UPLOAD_SERVICE_LEATHERBACK",87099),e0(e$,"UPLOAD_SERVICE_API",87099),e$),e2={GCS_RESUMABLE_UPLOADER_APP:3,DROPBOX_APP:20166,BOX_APP:67545,ONEDRIVE_APP:67813,GOOGLE_DRIVE_APP:69025,PARALLEL_UPLOADER_APP:87099};function e5(e){return(e5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e4(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=e8(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e4(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function e9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,e8(r.key),r)}}function e8(e){var t=function(e,t){if("object"!==e5(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==e5(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===e5(t)?t:String(t)}var e6=[s.CANCELED,s.COMPLETED,s.FAILED],e7=function(){var e,t;function n(e,t){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),this.config=e3(e3({},r),e),this.uploads=new Map,this.site_config=t,this._aborter=new eG(this.config),this.config.lighthouse=new eZ(this.config.lighthouse.url),this.fresnel=new eK("upload-stats");var o,i="production"==(o="undefined"!=typeof window?window.location.hostname:"localhost",RegExp(/\bvimeo.com\b/).test(o)?"production":"development")?eS.Service.FRESNEL_PROD:eS.Service.FRESNEL_DEV;eS.BigPictureClient.configure(new eS.Configuration(i)),this._setSessionId(),this._setUserId(),this.config.use_core_count&&this._setParallelRequestsCount(),this._onUploadStateChange=this._onUploadStateChange.bind(this),this.clear=this.clear.bind(this)}return e=[{key:"version",get:function(){return this.config.version}},{key:"session_id",get:function(){return this._session_id}},{key:"user_id",get:function(){return this._user_id}},{key:"log_to_console",get:function(){return this.config.log_to_console},set:function(e){this.config.log_to_console=!0===e}},{key:"summary",get:function(){var e={total_bytes:0,bytes_uploaded:0,eta:0,active_count:0,complete_count:0,queued_count:0,in_progress_count:0,failed_count:0,canceled_count:0,total_count:0,is_paused:!1,is_canceled:!1,is_complete:!1,has_failures:!1},t=[];return this.uploads.forEach(function(n){if(t.push(n.state),n.state!==s.CANCELED){if(n.state===s.FAILED)return e.failed_count++,void(e.has_failures=!0);e.total_bytes+=n.file.size,e.bytes_uploaded+=n.bytes_uploaded,e.eta+=n.eta||0,e.total_count++,n.state===s.QUEUED&&e.queued_count++,n.state!==s.COMPLETED?e.active_count++:e.complete_count++,e.in_progress_count=e.active_count-e.queued_count}else e.canceled_count++}),t.length>0&&(e.is_paused=t.every(function(e){return!a.hasOwnProperty(e)}),e.is_canceled=t.every(function(e){return e===s.CANCELED}),e.is_complete=t.every(function(e){return e===s.COMPLETED})),e}},{key:"uploading_clip_ids",get:function(){var e=[];return this.uploads.forEach(function(t){t.clip_id&&t.state!==s.COMPLETE&&e.push(t.clip_id)}),e}},{key:"_onUploadStateChange",value:function(e){var t=e.state,n=e.is_resume,r=e.is_restart,o=e.upload;if(!n&&!r){var i=this.uploads;switch(t){case s.COMPLETED:case s.CANCELED:case s.FAILED:this.startQueue();case s.UPLOADING:}this._aborter.uploads=i,this._sendDataToFresnel(t,o)}}},{key:"product",get:function(){return"undefined"!=typeof window&&"vimeo"in window&&vimeo.is_mobile?"mobile":"undefined"!=typeof window&&-1!==window.location.pathname.indexOf("ondemand")?"ondemand":"creator"}},{key:"_setSessionId",value:function(){var e=this;void 0===this._session_id&&setTimeout(function(){void 0===window.__fa_session?void 0===window.vimeo||"object"!==e5(window.vimeo.cur_user)?e._session_id="undefined.".concat(Date.now()):e._session_id="".concat(window.vimeo.cur_user.id,".").concat(Date.now()):e._session_id=window.__fa_session},0)}},{key:"_setUserId",value:function(){void 0===this._user_id&&(void 0===window.vimeo||"object"!==e5(window.vimeo.cur_user)?this._user_id=0:this._user_id=window.vimeo.cur_user.id)}},{key:"_setParallelRequestsCount",value:function(){var e=window.navigator.hardwareConcurrency||1;this.config.max_parallel_upload_requests=Math.min(e,4)}},{key:"_create",value:function(e,t,n,r,o){var i=this.config,a=null;switch(t){case l.CLIP:case l.CLIP_REPLACE:case l.DRM_CLIP:case l.DRM_CLIP_REPLACE:a=87099===n?new eD(i,t,n,e,r,o):new ed(i,t,n,e,r);break;case l.API_PULL_CLIP:case l.API_PULL_CLIP_REPLACE:a=new eP(i,t,n,e,r);break;default:throw Error("".concat(t," upload not implemented yet"))}return this.uploads.set(a.id,a),a}},{key:"_start",value:function(e){if(e.state!==s.QUEUED)return e;var t=this.config.max_simultaneous_uploads;return this.summary.in_progress_count>=t?console.log("Max simultaneous uploads ".concat(t,", leaving in queue")):(e.on(u.STATE_CHANGE,this._onUploadStateChange),e.start()),e}},{key:"_sendDataToFresnel",value:function(e,t){var n=this.config,r=this.fresnel,o=this.uploads,i=this.product,a=this.session_id,l=this.user_id,f=t.file,p=t.upload_type,d=t.api_app,h=0;o.forEach(function(e){e.active&&h++});var v=t.uid?t.uid:"",_="",y=0;n.service===c.UPLOAD_SERVICE_LEATHERBACK||n.service===c.UPLOAD_SERVICE_API?(t.uploaders&&t.uploaders.length&&(_=t.uploaders[0].bucket),y=t.signed_urls?Object.keys(t.signed_urls).length:y):n.service===c.UPLOAD_SERVICE_SITE&&(_=t.uploader?t.uploader.bucket:_);var g={name:u.STATE_CHANGE,session_id:a,user_id:l,upload_id:v,state:e,bucket:_,concurrent_uploads:h,parallel_requests:y,upload_type:p,product:i,api_app:d,size:f.size,file_type:f.type,location:window?window.location.pathname:"",uploader_version:n.version,service:n.service,user_account_type:n.user.account_type,chunk_number:n.max_parallel_upload_requests};e===s.COMPLETED&&(g.duration=t.duration,g.speed_mbps=t.speed_mbps),e===s.FAILED&&(g.error=t.error.toString()),r.log(g)}},{key:"queue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.CLIP,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return e instanceof FileList&&(e=Array.from(e)),Array.isArray(e)?e.map(function(e){return t._create(e,n,r,o,i)}):this._create(e,n,r,o)}},{key:"startQueue",value:function(){var e=this,t=[];return this.uploads.forEach(function(n){var r=e._start(n);t.push(r)}),t}},{key:"upload",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.CLIP,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=this.queue(e,t,n,r,o);return this.startQueue(),1===i.length?i[0]:i}},{key:"setVimeoJWT",value:function(e){this.config.api.jwt=e}},{key:"pauseAll",value:function(){this.uploads.forEach(function(e){e.state===s.UPLOADING&&e.pause()})}},{key:"resumeAll",value:function(){this.uploads.forEach(function(e){e.state===s.PAUSED&&e.resume()})}},{key:"cancelAll",value:function(){this.uploads.forEach(function(e){e6.includes(e.state)||e.cancel()})}},{key:"clearAll",value:function(){this.uploads.forEach(this.clear)}},{key:"clear",value:function(e){e6.includes(e.state)||e.cancel(),this.uploads.delete(e.id),e.state=s.REMOVED}}],e9(n.prototype,e),t&&e9(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();t.default=e7},function(e,t,n){"use strict";n.r(t),n.d(t,"camelCaseTransform",function(){return p}),n.d(t,"camelCaseTransformMerge",function(){return d}),n.d(t,"camelCase",function(){return h}),n.d(t,"capitalCaseTransform",function(){return _}),n.d(t,"capitalCase",function(){return y}),n.d(t,"constantCase",function(){return b}),n.d(t,"dotCase",function(){return m}),n.d(t,"headerCase",function(){return E}),n.d(t,"noCase",function(){return s}),n.d(t,"paramCase",function(){return w}),n.d(t,"pascalCaseTransform",function(){return l}),n.d(t,"pascalCaseTransformMerge",function(){return c}),n.d(t,"pascalCase",function(){return f}),n.d(t,"pathCase",function(){return O}),n.d(t,"sentenceCaseTransform",function(){return R}),n.d(t,"sentenceCase",function(){return P}),n.d(t,"snakeCase",function(){return A});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function o(e){return e.toLowerCase()}"function"==typeof SuppressedError&&SuppressedError;var i=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],a=/[^A-Z0-9]+/gi;function s(e,t){void 0===t&&(t={});for(var n=t.splitRegexp,r=t.stripRegexp,s=t.transform,l=t.delimiter,c=u(u(e,void 0===n?i:n,"$1\0$2"),void 0===r?a:r,"\0"),f=0,p=c.length;"\0"===c.charAt(f);)f++;for(;"\0"===c.charAt(p-1);)p--;return c.slice(f,p).split("\0").map(void 0===s?o:s).join(void 0===l?" ":l)}function u(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce(function(e,t){return e.replace(t,n)},e)}function l(e,t){var n=e.charAt(0),r=e.substr(1).toLowerCase();return t>0&&n>="0"&&n<="9"?"_"+n+r:""+n.toUpperCase()+r}function c(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function f(e,t){return void 0===t&&(t={}),s(e,r({delimiter:"",transform:l},t))}function p(e,t){return 0===t?e.toLowerCase():l(e,t)}function d(e,t){return 0===t?e.toLowerCase():c(e)}function h(e,t){return void 0===t&&(t={}),f(e,r({transform:p},t))}function v(e){return e.charAt(0).toUpperCase()+e.substr(1)}function _(e){return v(e.toLowerCase())}function y(e,t){return void 0===t&&(t={}),s(e,r({delimiter:" ",transform:_},t))}function g(e){return e.toUpperCase()}function b(e,t){return void 0===t&&(t={}),s(e,r({delimiter:"_",transform:g},t))}function m(e,t){return void 0===t&&(t={}),s(e,r({delimiter:"."},t))}function E(e,t){return void 0===t&&(t={}),y(e,r({delimiter:"-"},t))}function w(e,t){return void 0===t&&(t={}),m(e,r({delimiter:"-"},t))}function O(e,t){return void 0===t&&(t={}),m(e,r({delimiter:"/"},t))}function R(e,t){var n=e.toLowerCase();return 0===t?v(n):n}function P(e,t){return void 0===t&&(t={}),s(e,r({delimiter:" ",transform:R},t))}function A(e,t){return void 0===t&&(t={}),m(e,r({delimiter:"_"},t))}},function(e,t,n){"use strict";let r;n.r(t),n.d(t,"v1",function(){return v}),n.d(t,"v3",function(){return P}),n.d(t,"v4",function(){return S}),n.d(t,"v5",function(){return C}),n.d(t,"NIL",function(){return L}),n.d(t,"version",function(){return k}),n.d(t,"validate",function(){return s}),n.d(t,"stringify",function(){return c}),n.d(t,"parse",function(){return _});let o=new Uint8Array(16);function i(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(e){return"string"==typeof e&&a.test(e)};let u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));function l(e,t=0){return u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]}var c=function(e,t=0){let n=l(e,t);if(!s(n))throw TypeError("Stringified UUID is invalid");return n};let f,p,d=0,h=0;var v=function(e,t,n){let r=t&&n||0,o=t||Array(16),a=(e=e||{}).node||f,s=void 0!==e.clockseq?e.clockseq:p;if(null==a||null==s){let t=e.random||(e.rng||i)();null==a&&(a=f=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==s&&(s=p=16383&(t[6]<<8|t[7]))}let u=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:h+1,v=u-d+(c-h)/1e4;if(v<0&&void 0===e.clockseq&&(s=s+1&16383),(v<0||u>d)&&void 0===e.nsecs&&(c=0),c>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");d=u,h=c,p=s;let _=(1e4*(268435455&(u+=122192928e5))+c)%4294967296;o[r++]=_>>>24&255,o[r++]=_>>>16&255,o[r++]=_>>>8&255,o[r++]=255&_;let y=u/4294967296*1e4&268435455;o[r++]=y>>>8&255,o[r++]=255&y,o[r++]=y>>>24&15|16,o[r++]=y>>>16&255,o[r++]=s>>>8|128,o[r++]=255&s;for(let e=0;e<6;++e)o[r+e]=a[e];return t||l(o)},_=function(e){let t;if(!s(e))throw TypeError("Invalid UUID");let n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function y(e,t,n){function r(e,r,o,i){var a;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=_(r)),16!==(null===(a=r)||void 0===a?void 0:a.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(r),s.set(e,r.length),(s=n(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,o){i=i||0;for(let e=0;e<16;++e)o[i+e]=s[e];return o}return l(s)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function g(e){return 14+(e+64>>>9<<4)+1}function b(e,t){let n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function m(e,t,n,r,o,i){var a;return b((a=b(b(t,e),b(r,i)))<<o|a>>>32-o,n)}function E(e,t,n,r,o,i,a){return m(t&n|~t&r,e,t,o,i,a)}function w(e,t,n,r,o,i,a){return m(t&r|n&~r,e,t,o,i,a)}function O(e,t,n,r,o,i,a){return m(t^n^r,e,t,o,i,a)}function R(e,t,n,r,o,i,a){return m(n^(t|~r),e,t,o,i,a)}var P=y("v3",48,function(e){if("string"==typeof e){let t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){let t=[],n=32*e.length;for(let r=0;r<n;r+=8){let n=e[r>>5]>>>r%32&255,o=parseInt("0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[g(t)-1]=t;let n=1732584193,r=-271733879,o=-1732584194,i=271733878;for(let t=0;t<e.length;t+=16){let a=n,s=r,u=o,l=i;n=E(n,r,o,i,e[t],7,-680876936),i=E(i,n,r,o,e[t+1],12,-389564586),o=E(o,i,n,r,e[t+2],17,606105819),r=E(r,o,i,n,e[t+3],22,-1044525330),n=E(n,r,o,i,e[t+4],7,-176418897),i=E(i,n,r,o,e[t+5],12,1200080426),o=E(o,i,n,r,e[t+6],17,-1473231341),r=E(r,o,i,n,e[t+7],22,-45705983),n=E(n,r,o,i,e[t+8],7,1770035416),i=E(i,n,r,o,e[t+9],12,-1958414417),o=E(o,i,n,r,e[t+10],17,-42063),r=E(r,o,i,n,e[t+11],22,-1990404162),n=E(n,r,o,i,e[t+12],7,1804603682),i=E(i,n,r,o,e[t+13],12,-40341101),o=E(o,i,n,r,e[t+14],17,-1502002290),r=E(r,o,i,n,e[t+15],22,1236535329),n=w(n,r,o,i,e[t+1],5,-165796510),i=w(i,n,r,o,e[t+6],9,-1069501632),o=w(o,i,n,r,e[t+11],14,643717713),r=w(r,o,i,n,e[t],20,-373897302),n=w(n,r,o,i,e[t+5],5,-701558691),i=w(i,n,r,o,e[t+10],9,38016083),o=w(o,i,n,r,e[t+15],14,-660478335),r=w(r,o,i,n,e[t+4],20,-405537848),n=w(n,r,o,i,e[t+9],5,568446438),i=w(i,n,r,o,e[t+14],9,-1019803690),o=w(o,i,n,r,e[t+3],14,-187363961),r=w(r,o,i,n,e[t+8],20,1163531501),n=w(n,r,o,i,e[t+13],5,-1444681467),i=w(i,n,r,o,e[t+2],9,-51403784),o=w(o,i,n,r,e[t+7],14,1735328473),r=w(r,o,i,n,e[t+12],20,-1926607734),n=O(n,r,o,i,e[t+5],4,-378558),i=O(i,n,r,o,e[t+8],11,-2022574463),o=O(o,i,n,r,e[t+11],16,1839030562),r=O(r,o,i,n,e[t+14],23,-35309556),n=O(n,r,o,i,e[t+1],4,-1530992060),i=O(i,n,r,o,e[t+4],11,1272893353),o=O(o,i,n,r,e[t+7],16,-155497632),r=O(r,o,i,n,e[t+10],23,-1094730640),n=O(n,r,o,i,e[t+13],4,681279174),i=O(i,n,r,o,e[t],11,-358537222),o=O(o,i,n,r,e[t+3],16,-722521979),r=O(r,o,i,n,e[t+6],23,76029189),n=O(n,r,o,i,e[t+9],4,-640364487),i=O(i,n,r,o,e[t+12],11,-421815835),o=O(o,i,n,r,e[t+15],16,530742520),r=O(r,o,i,n,e[t+2],23,-995338651),n=R(n,r,o,i,e[t],6,-198630844),i=R(i,n,r,o,e[t+7],10,1126891415),o=R(o,i,n,r,e[t+14],15,-1416354905),r=R(r,o,i,n,e[t+5],21,-57434055),n=R(n,r,o,i,e[t+12],6,1700485571),i=R(i,n,r,o,e[t+3],10,-1894986606),o=R(o,i,n,r,e[t+10],15,-1051523),r=R(r,o,i,n,e[t+1],21,-2054922799),n=R(n,r,o,i,e[t+8],6,1873313359),i=R(i,n,r,o,e[t+15],10,-30611744),o=R(o,i,n,r,e[t+6],15,-1560198380),r=R(r,o,i,n,e[t+13],21,1309151649),n=R(n,r,o,i,e[t+4],6,-145523070),i=R(i,n,r,o,e[t+11],10,-1120210379),o=R(o,i,n,r,e[t+2],15,718787259),r=R(r,o,i,n,e[t+9],21,-343485551),n=b(n,a),r=b(r,s),o=b(o,u),i=b(i,l)}return[n,r,o,i]}(function(e){if(0===e.length)return[];let t=8*e.length,n=new Uint32Array(g(t));for(let r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))}),A={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},S=function(e,t,n){if(A.randomUUID&&!t&&!e)return A.randomUUID();let r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return l(r)};function j(e,t){return e<<t|e>>>32-t}var C=y("v5",80,function(e){let t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){let t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let r=Math.ceil((e.length/4+2)/16),o=Array(r);for(let t=0;t<r;++t){let n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];o[t]=n}o[r-1][14]=8*(e.length-1)/4294967296,o[r-1][14]=Math.floor(o[r-1][14]),o[r-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<r;++e){let r=new Uint32Array(80);for(let t=0;t<16;++t)r[t]=o[e][t];for(let e=16;e<80;++e)r[e]=j(r[e-3]^r[e-8]^r[e-14]^r[e-16],1);let i=n[0],a=n[1],s=n[2],u=n[3],l=n[4];for(let e=0;e<80;++e){let n=Math.floor(e/20),o=j(i,5)+function(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}(n,a,s,u)+l+t[n]+r[e]>>>0;l=u,u=s,s=j(a,30)>>>0,a=i,i=o}n[0]=n[0]+i>>>0,n[1]=n[1]+a>>>0,n[2]=n[2]+s>>>0,n[3]=n[3]+u>>>0,n[4]=n[4]+l>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}),L="00000000-0000-0000-0000-000000000000",k=function(e){if(!s(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}}])},e.exports=t()},782274:function(e){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},610111:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},159512:function(e){e.exports=function(e){return e.split("")}},793192:function(e,t,n){var r=n(687500),o=n(658260),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];i.call(e,t)&&o(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},687500:function(e,t,n){var r=n(25595);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},722825:function(e,t,n){var r=n(610111),o=n(767123);e.exports=function e(t,n,i,a,s){var u=-1,l=t.length;for(i||(i=o),s||(s=[]);++u<l;){var c=t[u];n>0&&i(c)?n>1?e(c,n-1,i,a,s):r(s,c):a||(s[s.length]=c)}return s}},740548:function(e,t,n){var r=n(224007),o=n(786040);e.exports=function(e,t){t=r(t,e);for(var n=0,i=t.length;null!=e&&n<i;)e=e[o(t[n++])];return n&&n==i?e:void 0}},462902:function(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},333016:function(e,t,n){var r=n(469823),o=n(450440);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},821785:function(e,t,n){var r=n(57121),o=n(656708);e.exports=function(e,t){return r(e,t,function(t,n){return o(e,n)})}},57121:function(e,t,n){var r=n(740548),o=n(632619),i=n(224007);e.exports=function(e,t,n){for(var a=-1,s=t.length,u={};++a<s;){var l=t[a],c=r(e,l);n(c,l)&&o(u,i(l,e),c)}return u}},632619:function(e,t,n){var r=n(793192),o=n(224007),i=n(805023),a=n(493702),s=n(786040);e.exports=function(e,t,n,u){if(!a(e))return e;t=o(t,e);for(var l=-1,c=t.length,f=c-1,p=e;null!=p&&++l<c;){var d=s(t[l]),h=n;if("__proto__"===d||"constructor"===d||"prototype"===d)break;if(l!=f){var v=p[d];void 0===(h=u?u(v,d,p):void 0)&&(h=a(v)?v:i(t[l+1])?[]:{})}r(p,d,h),p=p[d]}return e}},746739:function(e,t,n){var r=n(789203),o=n(25595),i=n(280229),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=a},577379:function(e){e.exports=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}},21656:function(e,t,n){var r=n(862438),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},224007:function(e,t,n){var r=n(855589),o=n(805130),i=n(144041),a=n(199835);e.exports=function(e,t){return r(e)?e:o(e,t)?[e]:i(a(e))}},703237:function(e,t,n){var r=n(577379);e.exports=function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:r(e,t,n)}},441254:function(e,t,n){var r=n(703237),o=n(463932),i=n(215233),a=n(199835);e.exports=function(e){return function(t){var n=o(t=a(t))?i(t):void 0,s=n?n[0]:t.charAt(0),u=n?r(n,1).join(""):t.slice(1);return s[e]()+u}}},25595:function(e,t,n){var r=n(565234),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},933273:function(e,t,n){var r=n(262923),o=n(320340),i=n(104173);e.exports=function(e){return i(o(e,void 0,r),e+"")}},513544:function(e,t,n){var r=n(224007),o=n(579312),i=n(855589),a=n(805023),s=n(666052),u=n(786040);e.exports=function(e,t,n){t=r(t,e);for(var l=-1,c=t.length,f=!1;++l<c;){var p=u(t[l]);if(!(f=null!=e&&n(e,p)))break;e=e[p]}return f||++l!=c?f:!!(c=null==e?0:e.length)&&s(c)&&a(p,c)&&(i(e)||o(e))}},463932:function(e){var t=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},767123:function(e,t,n){var r=n(270861),o=n(579312),i=n(855589),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||o(e)||!!(a&&e&&e[a])}},805023:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},805130:function(e,t,n){var r=n(855589),o=n(252624),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!!("number"==n||"symbol"==n||"boolean"==n||null==e||o(e))||a.test(e)||!i.test(e)||null!=t&&e in Object(t)}},932924:function(e,t,n){var r=n(167997);e.exports=function(e){var t=r(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},320340:function(e,t,n){var r=n(782274),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,s=o(i.length-t,0),u=Array(s);++a<s;)u[a]=i[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=i[a];return l[t]=n(u),r(e,this,l)}}},104173:function(e,t,n){var r=n(746739),o=n(637357)(r);e.exports=o},637357:function(e){var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var o=t(),i=16-(o-r);if(r=o,i>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},215233:function(e,t,n){var r=n(159512),o=n(463932),i=n(432205);e.exports=function(e){return o(e)?i(e):r(e)}},144041:function(e,t,n){var r=n(932924),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,function(e,n,r,o){t.push(r?o.replace(i,"$1"):n||e)}),t});e.exports=a},786040:function(e,t,n){var r=n(252624),o=1/0;e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}},862438:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},432205:function(e){var t="\ud800-\udfff",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\ud83c[\udffb-\udfff]",o="[^"+t+"]",i="(?:\ud83c[\udde6-\uddff]){2}",a="[\ud800-\udbff][\udc00-\udfff]",s="(?:"+n+"|"+r+")?",u="[\\ufe0e\\ufe0f]?",l="(?:\\u200d(?:"+[o,i,a].join("|")+")"+u+s+")*",c=RegExp(r+"(?="+r+")|(?:"+[o+n+"?",n,i,a,"["+t+"]"].join("|")+")"+(u+s+l),"g");e.exports=function(e){return e.match(c)||[]}},289309:function(e,t,n){var r=n(160844),o=n(25048)(function(e,t,n){return t=t.toLowerCase(),e+(n?r(t):t)});e.exports=o},160844:function(e,t,n){var r=n(199835),o=n(451309);e.exports=function(e){return o(r(e).toLowerCase())}},789203:function(e){e.exports=function(e){return function(){return e}}},477837:function(e,t,n){var r=n(493702),o=n(980231),i=n(829153),a=Math.max,s=Math.min;e.exports=function(e,t,n){var u,l,c,f,p,d,h=0,v=!1,_=!1,y=!0;if("function"!=typeof e)throw TypeError("Expected a function");function g(t){var n=u,r=l;return u=l=void 0,h=t,f=e.apply(r,n)}function b(e){var n=e-d,r=e-h;return void 0===d||n>=t||n<0||_&&r>=c}function m(){var e,n,r,i=o();if(b(i))return E(i);p=setTimeout(m,(e=i-d,n=i-h,r=t-e,_?s(r,c-n):r))}function E(e){return(p=void 0,y&&u)?g(e):(u=l=void 0,f)}function w(){var e,n=o(),r=b(n);if(u=arguments,l=this,d=n,r){if(void 0===p)return h=e=d,p=setTimeout(m,t),v?g(e):f;if(_)return clearTimeout(p),p=setTimeout(m,t),g(d)}return void 0===p&&(p=setTimeout(m,t)),f}return t=i(t)||0,r(n)&&(v=!!n.leading,c=(_="maxWait"in n)?a(i(n.maxWait)||0,t):c,y="trailing"in n?!!n.trailing:y),w.cancel=function(){void 0!==p&&clearTimeout(p),h=0,u=d=l=p=void 0},w.flush=function(){return void 0===p?f:E(o())},w}},262923:function(e,t,n){var r=n(722825);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},656708:function(e,t,n){var r=n(462902),o=n(513544);e.exports=function(e,t){return null!=e&&o(e,t,r)}},280229:function(e){e.exports=function(e){return e}},579312:function(e,t,n){var r=n(333016),o=n(450440),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},666052:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},980231:function(e,t,n){var r=n(783250);e.exports=function(){return r.Date.now()}},749335:function(e,t,n){var r=n(821785),o=n(933273)(function(e,t){return null==e?{}:r(e,t)});e.exports=o},214633:function(e,t,n){var r=n(477837),o=n(493702);e.exports=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw TypeError("Expected a function");return o(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:i,maxWait:t,trailing:a})}},829153:function(e,t,n){var r=n(21656),o=n(493702),i=n(252624),a=0/0,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return a;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=u.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):s.test(e)?a:+e}},451309:function(e,t,n){var r=n(441254)("toUpperCase");e.exports=r},40643:function(e,t,n){"use strict";n.d(t,{bZ:function(){return j},aS:function(){return S},xE:function(){return A}});var r=n(867932),o=n(92575),i=n(397458),a=n(450032),s=n(354549),u=n(919938),l=n(93141),c=n(408232),f=n(712626),p=(0,a.G)(function(e,t){var n;let{status:r="info",addRole:o=!0,...a}=(0,l.Lr)(e),p=null!=(n=e.colorScheme)?n:(0,s.TR)(r),d=(0,c.jC)("Alert",{...e,colorScheme:p}),h={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...d.container};return(0,i.jsx)(s.uZ,{value:{status:r},children:(0,i.jsx)(s.Hm,{value:d,children:(0,i.jsx)(f.m.div,{"data-status":r,role:o?"alert":void 0,ref:t,...a,className:(0,u.cx)("chakra-alert",e.className),__css:h})})})});p.displayName="Alert";var d=n(75103),h=n(394580),v=n(47953),_=n(77312),y=n(328727),g=n(849762),b=n(496777);let m=["children"],E=["onClose","children","status"];function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let R={info:"blue.500",success:"green.500",error:"red.500",warning:"yellow.500"},P={info:(0,i.jsx)(v.B,{}),success:(0,i.jsx)(_.r,{}),error:(0,i.jsx)(y.p,{}),warning:(0,i.jsx)(y.p,{})},A=(0,a.G)((e,t)=>{let{children:n}=e,r=(0,o.Z)(e,m);return(0,i.jsx)(p,O(O({ref:t},r),{},{children:n}))}),S=e=>{let t=(0,c.jC)("Alert");return(0,i.jsx)(b.h,O({size:"xs",sx:t.closeButton,variant:"minimal",icon:(0,i.jsx)(g.p,{})},e))},j=(0,a.G)((e,t)=>{let{onClose:n,children:r,status:a="info"}=e,s=(0,o.Z)(e,E);return(0,i.jsxs)(A,O(O({ref:t},s),{},{variant:a,sx:{paddingRight:n?"3rem":"1rem"},children:[(0,i.jsx)(d.z,{children:P[a]}),(0,i.jsx)(h.k,{direction:"column",children:r}),n&&(0,i.jsx)(S,{color:R[a],"aria-label":"Dismiss notice",onClick:n})]}))})},809839:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});let r=n(935588).I},696198:function(e,t,n){"use strict";n.d(t,{Y:function(){return i}});var r=n(940117),o=n(652983),i=(0,o.forwardRef)(function(e,t){return o.createElement("svg",(0,r.c)({viewBox:"0 0 24 24",ref:t},e),o.createElement("path",{d:"M12 22a10 10 0 1 1 10-10 10 10 0 0 1-10 10zm0-18a8 8 0 1 0 8 8 8 8 0 0 0-8-8z",fill:"#1a2e3b"}),o.createElement("path",{fill:"#1a2e3b",d:"M11 11h2v6h-2zm1-2a1 1 0 0 1-1-1 1.46 1.46 0 0 1 0-.2.63.63 0 0 1 .06-.18.77.77 0 0 1 .09-.18 1.48 1.48 0 0 1 .12-.15.92.92 0 0 1 .33-.21 1 1 0 0 1 1.09.21A1.05 1.05 0 0 1 13 8a.84.84 0 0 1-.08.38 1 1 0 0 1-.21.33l-.15.12-.18.09-.18.08z"}))})},359462:function(e,t,n){"use strict";n.d(t,{r:function(){return f}});var r,o,i,a=n(940117),s=n(652983),u=n(173898),l=n(524777),c=u.default.span(i||(i=(0,a.a)(["\n  ","\n"],["\n  ","\n"])),function(e){var t=e.variant,n=e.theme,i=e.format;i&&n.formats[i]||(i="primary");var s=n.formats[i],c=(0,l.tint)(.15,s);return(0,u.css)(o||(o=(0,a.a)(["\n      color: ",";\n      display: inline;\n      position: relative;\n      padding: 0;\n      font-size: inherit;\n      line-height: inherit;\n      text-decoration: none;\n      border: 0;\n      background-color: transparent;\n      transition: all 0.1s ease-in-out;\n      appearance: none;\n      cursor: pointer;\n\n      &:hover {\n        color: ",";\n      }\n\n      &::-moz-focus-inner {\n        margin: 0;\n        padding: 0;\n        border: 0;\n      }\n\n      &:active {\n        cursor: wait;\n      }\n\n      ","\n    "],["\n      color: ",";\n      display: inline;\n      position: relative;\n      padding: 0;\n      font-size: inherit;\n      line-height: inherit;\n      text-decoration: none;\n      border: 0;\n      background-color: transparent;\n      transition: all 0.1s ease-in-out;\n      appearance: none;\n      cursor: pointer;\n\n      &:hover {\n        color: ",";\n      }\n\n      &::-moz-focus-inner {\n        margin: 0;\n        padding: 0;\n        border: 0;\n      }\n\n      &:active {\n        cursor: wait;\n      }\n\n      ","\n    "])),s,c,"minimal"!==t&&(0,u.css)(r||(r=(0,a.a)(["\n        &::after {\n          display: block;\n          position: absolute;\n          bottom: ",";\n          left: 0;\n          width: 100%;\n          height: 1em;\n          margin-top: ",";\n          border-bottom: "," solid currentColor;\n          content: '';\n        }\n      "],["\n        &::after {\n          display: block;\n          position: absolute;\n          bottom: ",";\n          left: 0;\n          width: 100%;\n          height: 1em;\n          margin-top: ",";\n          border-bottom: "," solid currentColor;\n          content: '';\n        }\n      "])),(0,l.rem)(-2),(0,l.rem)(10),(0,l.rem)(1)))}),f=(0,n(953440).w)(function(e){var t=e.children,n=e.variant,r=e.element,o=e.format,i=e.href,u=(0,a.b)(e,["children","variant","element","format","href"]);return s.createElement(c,(0,a.c)({as:void 0===r?"a":r,href:i,variant:n,format:void 0===o?"primary":o},u),t)})},256913:function(e,t,n){"use strict";n.d(t,{n:function(){return c}});var r,o,i=n(940117),a=n(652983),s=n(173898),u=n(61186),l=(0,s.default)(u.x)(r||(r=(0,i.a)(["\n  font-weight: 400;\n  letter-spacing: 0.01rem;\n  ",";\n"],["\n  font-weight: 400;\n  letter-spacing: 0.01rem;\n  ",";\n"])),function(e){var t=4-e.size/100;return(0,s.css)(o||(o=(0,i.a)(["\n    font-weight: 400;\n    line-height: ",";\n    margin-bottom: ","rem;\n  "],["\n    font-weight: 400;\n    line-height: ",";\n    margin-bottom: ","rem;\n  "])),Math.round((t/25+1.46)*100)/100,Math.round((1.5-.25*t)*100)/100)}),c=(0,n(953440).w)(function(e){var t=e.element,n=e.forwardRef,r=e.size,o=void 0===r?"4":r,s=e.format,u=(0,i.b)(e,["element","forwardRef","size","format"]),c="number"==typeof o?o:parseInt(o);return a.createElement(l,(0,i.c)({element:void 0===t?"p":t,format:void 0===s?"basic":s,ref:n,size:400-100*c},u))})},75103:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var r=n(354549),o=n(919938),i=n(712626),a=n(397458);function s(e){let{status:t}=(0,r.oX)(),n=(0,r.XO)(t),s=(0,r.uL)(),u="loading"===t?s.spinner:s.icon;return(0,a.jsx)(i.m.span,{display:"inherit","data-status":t,...e,className:(0,o.cx)("chakra-alert__icon",e.className),__css:u,children:e.children||(0,a.jsx)(n,{h:"100%",w:"100%"})})}s.displayName="AlertIcon"},289849:function(e,t,n){"use strict";n.d(t,{X:function(){return u}});var r=n(354549),o=n(919938),i=n(450032),a=n(712626),s=n(397458),u=(0,i.G)(function(e,t){let n=(0,r.uL)(),{status:i}=(0,r.oX)(),u={display:"inline",...n.description};return(0,s.jsx)(a.m.div,{ref:t,"data-status":i,...e,className:(0,o.cx)("chakra-alert__desc",e.className),__css:u})});u.displayName="AlertDescription"},354549:function(e,t,n){"use strict";n.d(t,{uZ:function(){return u},Hm:function(){return c},TR:function(){return d},XO:function(){return h},oX:function(){return l},uL:function(){return f}});var r=n(494802),o=n(397458);function i(e){return(0,o.jsx)(r.J,{viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var a=n(396248),s=n(901301),[u,l]=(0,a.k)({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[c,f]=(0,a.k)({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),p={info:{icon:function(e){return(0,o.jsx)(r.J,{viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})},colorScheme:"blue"},warning:{icon:i,colorScheme:"orange"},success:{icon:function(e){return(0,o.jsx)(r.J,{viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})},colorScheme:"green"},error:{icon:i,colorScheme:"red"},loading:{icon:s.$,colorScheme:"blue"}};function d(e){return p[e].colorScheme}function h(e){return p[e].icon}},935588:function(e,t,n){"use strict";n.d(t,{I:function(){return c}});var r=n(478534),o=n(450032),i=n(408232),a=n(93141),s=n(712626),u=n(919938),l=n(397458),c=(0,o.G)(function(e,t){let{htmlSize:n,...o}=e,c=(0,i.jC)("Input",o),f=(0,a.Lr)(o),p=(0,r.Y)(f),d=(0,u.cx)("chakra-input",e.className);return(0,l.jsx)(s.m.input,{size:n,...p,__css:c.field,ref:t,className:d})});c.displayName="Input",c.id="Input"},771504:function(e,t,n){"use strict";n.d(t,{W:function(){return u}});var r=n(867932),o=n(397458),i=n(754514);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let u=e=>(0,o.jsx)(i.J,s(s({viewBox:"0 0 24 24"},e),{},{fill:"none",children:(0,o.jsx)("path",{d:"M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a.998.998 0 0 0 1.42 0L17 10.59a.997.997 0 0 0 .219-1.095.998.998 0 0 0-.22-.325Z",fill:"currentColor"})}))},64095:function(e,t,n){"use strict";n.d(t,{_:function(){return u}});var r=n(867932),o=n(397458),i=n(754514);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let u=e=>(0,o.jsx)(i.J,s(s({viewBox:"0 0 24 24"},e),{},{fill:"none",children:(0,o.jsx)("path",{d:"m12.85 15.55 5.6-5.7c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0l-5 4.9-5-4.9c-.4-.4-1-.4-1.4 0-.2.2-.3.4-.3.7 0 .3.1.5.3.7l5.6 5.7c.5.4 1.1.4 1.6 0-.1 0-.1 0 0 0Z",fill:"currentColor"})}))}}]);
//# sourceMappingURL=28531-babee83a766262ed.js.map