"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61423],{113690:function(e,t,n){n.d(t,{B7:function(){return i},Ib:function(){return o},po:function(){return r}});let r={UNINITIALIZED:"uninitialized",INITIALIZING:"initializing",INITIALIZED:"initialized",BYPASSED:"bypassed"},i={CUID:"cuid",VUID:"vuid",DEVICE_ID:"device_id",TEAM_OWNER_ID:"team_owner_id",CLIP_ID:"clip_id"},o={STRING:"STRING",NUMERIC:"NUMERIC",INTEGER:"INTEGER",BOOLEAN:"BOOLEAN",JSON:"JSON"}},61423:function(e,t,n){n.d(t,{MY:function(){return k},CZ:function(){return C},HV:function(){return Z},u_:function(){return R}});var r=n(92575),i=n(867932),o=n(410281),a=n(844992),s=n(113690);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let l=(e,t,n,r,i=s.Ib.STRING)=>{try{let o=a.s8(),c=t.subject_key;if(!o||!c)return r;let l=u({bigPictureContexts:JSON.stringify(n)},t);switch(i){case s.Ib.STRING:return o.getStringAssignment(e,c.toString(),l,r);case s.Ib.NUMERIC:return o.getNumericAssignment(e,c.toString(),l,r);case s.Ib.INTEGER:return o.getIntegerAssignment(e,c.toString(),l,r);case s.Ib.BOOLEAN:return o.getBooleanAssignment(e,c.toString(),l,r);case s.Ib.JSON:return o.getJSONAssignment(e,c.toString(),l,r);default:return r}}catch(e){return r}},p=(e,t,n={})=>u({subject_key:e,subject_key_type:t,[t]:e},n);var g=n(411594),f=n(185822),b=n(560583),I=n(923801),O=n(356105);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class N{constructor(e={}){(0,i.Z)(this,"contexts",{}),this.initializeContexts(e)}initializeContexts(e){for(let[t,n]of Object.entries(N.CONTEXT_CONFIGURATION_MAP)){let r=e[t]||{},i=n.fields||{};this.contexts[t]=y(y({},n),{},{fields:y(y({},i),r)})}}getAllContexts(){return this.contexts}}(0,i.Z)(N,"CONTEXT_CONFIGURATION_MAP",y(y(y(y(y({},(0,g.FI)({product:"general",feature:"general",location:"not_applicable_pageview"})),(0,f.lg)({is_integration:!1,integration_id:null,integration_name:null,is_partner:null})),(0,b.g9)({page_name:"other"})),(0,I.UW)({is_team_member:!1})),(0,O.Mw)({view_type:"impression",feature:null})));var E=n(652983);let S=(0,n(775714).Ue)(e=>({initializationState:s.po.UNINITIALIZED,setInitializationState:t=>e({initializationState:t})}));var j=n(126371);let m=["bigPictureContexts"];class _{logAssignment(e){let{allocation:t,experiment:n,featureFlag:i,subject:o,subjectAttributes:a,variation:s,extraLogging:c,sdkMetadata:u}=e,{bigPictureContexts:l}=a,p={experiment:n??"",subject:o,variation:s??"",subject_attributes:JSON.stringify((0,r.Z)(a,m)),feature_flag:i,allocation:t??"",extra_logging:c?JSON.stringify(c):null,sdk_metadata:u?JSON.stringify(u):null};(0,j.Ou)("vimeo.eppo_feature_flag_assignment",JSON.parse(l),1,p)}}function A({flagsConfiguration:e,bypassInitialization:t=!1}){let{initializationState:r,setInitializationState:i}=S(),o=(0,E.useRef)(r);return(0,E.useEffect)(()=>{if(o.current!==s.po.INITIALIZED&&(!t||o.current!==s.po.BYPASSED)){if(t||!e){o.current=s.po.BYPASSED,i(s.po.BYPASSED);return}(async()=>{if(o.current!==s.po.INITIALIZING){o.current=s.po.INITIALIZING;try{let{offlineInit:t}=await Promise.resolve().then(n.bind(n,844992));t({flagsConfiguration:e,assignmentLogger:new _,overridesStorageKey:"eppo-overrides",enableOverrides:!0}),i(s.po.INITIALIZED),o.current=s.po.INITIALIZED}catch(e){i(s.po.BYPASSED),o.current=s.po.BYPASSED}}})()}},[t,i,e]),{initializationState:r,isInitialized:r===s.po.INITIALIZED}}let D=["additionalData","disabled"],P=["additionalData","disabled"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let h=new Set;function T({flagKey:e,subject:t,bigPictureOverrides:n,defaultAssignment:r,assignmentType:i}){if(!i)return h.has(e)||(console.warn(`Eppo flag "${e}" not found in configuration. Check that the flag is enabled in Eppo UI.`),h.add(e)),{assignment:r};let o=new N(n??{}).getAllContexts(),a=p(t.key,t.keyType,t.additionalData);{let t=new URLSearchParams(window.location?.search),n=t.get("eppo_name"),r=t.get("eppo_var");if(r&&n===e&&r&&n===e)return{assignment:i===s.Ib.BOOLEAN?"true"===r:i===s.Ib.NUMERIC||i===s.Ib.INTEGER?Number(r):i===s.Ib.JSON?JSON.parse(r):r}}return{assignment:l(e,a,o,r,i)??r}}function C({flagKey:e,subject:t,bigPictureOverrides:n,defaultAssignment:r,assignmentType:i,disabled:a=!1}){let s=(0,o.R)(),{isInitialized:c}=A({flagsConfiguration:s?.eppoConfig?.flags,bypassInitialization:a}),u=L();if(a||!c||!s?.eppoConfig?.flags)return{assignment:r,isEppoSDKInitialized:c};let{assignment:l}=T({flagKey:e,subject:w(w({},t),{},{additionalData:w(w({},u),t.additionalData)}),bigPictureOverrides:n,defaultAssignment:r,assignmentType:s.eppoConfig.flags[e]?.variationType??i});return{assignment:l,isEppoSDKInitialized:c}}function k(e){let{additionalData:t,disabled:n=!1}=e,i=(0,r.Z)(e,D),a=(0,o.R)();return C(w(w({},i),{},{subject:{key:a?.user?.id??0,keyType:s.B7.CUID,additionalData:t},disabled:!a?.user||n}))}function R(e){let{additionalData:t,disabled:n=!1}=e,i=(0,r.Z)(e,P),a=(0,o.R)();return C(w(w({},i),{},{subject:{key:a?.vuid??"",keyType:s.B7.VUID,additionalData:t},disabled:!a?.vuid||n}))}function Z(){let e=(0,o.R)(),{isInitialized:t}=A({flagsConfiguration:e?.eppoConfig?.flags}),n=L();return{getEppoAssignment:function(r){return t&&e?.eppoConfig?.flags?T(w(w({},r),{},{subject:w(w({},r.subject),{},{additionalData:w(w({},n),r.subject.additionalData)}),assignmentType:e.eppoConfig.flags[r.flagKey]?.variationType??r.assignmentType})):{assignment:r.defaultAssignment}},isEppoSDKInitialized:t}}function L(){let e=(0,o.R)();return e?{cuid:e.user?.id,vuid:e.vuid,is_free:!e.user?.capabilities?.hasPaid,is_enterprise:e.user?.capabilities?.hasEnterprise,is_staff:e.user?.badge?.type==="staff",device_type:B(),language:e.locale,location:e.location}:{}}let B=()=>{if("undefined"!=typeof navigator&&navigator.userAgent)return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(navigator.userAgent)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(navigator.userAgent)?"mobile":"desktop"}}}]);
//# sourceMappingURL=61423-3f7fef9fd38ed0ab.js.map