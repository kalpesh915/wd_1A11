"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61062],{561062:function(e,t,r){r.d(t,{P:function(){return eW}});var n=r(867932),o=r(652983),i=r(394580),a=r(767269),s=r(771534),l=r(147054),c=r(292154),u=r(496777),d=r(560148),p=r(347237),g=r(662555),O=r(410281),f=r(751004),h=r(205609),y=r(954297),b=r(667376),w=r(371731);function j(e){return{videoId:e}}function m({isLoading:e,hasValidResponse:t,apiError:r}){let n=(0,o.useRef)({mountedAt:Date.now()});return e&&void 0===n.current.startedAt&&(n.current.startedAt=Date.now(),n.current.delayToInitRequestMs=n.current.startedAt-n.current.mountedAt),e||!n.current.startedAt||n.current.completedAt||(n.current.completedAt=Date.now(),n.current.timeToFetchDataMs=n.current.completedAt-n.current.startedAt),n.current.timeToFetchDataMs&&(n.current.hasError=!!r,n.current.hasResponse=t),n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let E="in_progress",D=["language","transcode","type","upload","uri","quota","provenance","active","download"];var I=r(198005);let R={PROCESS:"PRCS"},S=["serviceMode","status","targetLang","audiotrackUri","translationMode"];var P=r(348973);function A(e){let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)}let T={VIDEO_ID_MISSING:"VIDEO_ID_MISSING",FETCH_DL_LINKS_FAILED:"FETCH_DL_LINKS_FAILED",FETCH_CLIP_FAILED:"FETCH_CLIP_FAILED",FETCH_AUDIOTRACKS_FAILED:"FETCH_AUDIOTRACKS_FAILED",FETCH_CLIP_METADATA_FAILED:"FETCH_CLIP_METADATA_FAILED",VIDEO_VERSION_ID_MISSING:"VIDEO_VERSION_ID_MISSING",UI_NO_LINKS_TO_SHOW:"UI_NO_LINKS_TO_SHOW",UI_USED_FALLBACK_LINKS:"UI_USED_FALLBACK_LINKS",FAILED_VIDEO_TAGGING:"FAILED_VIDEO_TAGGING"},k="downloads-modal",L={APP_TYPE:k,ALLOW_AUDIOTRACK_SELECTOR:null,IS_AB_TEST:null,USER_ID:null,USER_LOCALE:null,LOG_ERRORS_TRACKED:0,LOG_ERRORS_LIMIT:50,SESSION_ID:null,STARTED_AT:Date.now(),PAGE_NAME:null,MODAL_LOCATION:null,VIDEO_ID:null};function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function U(){return $($({},N()),{},{pageLifeDuration:Date.now()-L.STARTED_AT,pageErrorsTracked:L.LOG_ERRORS_TRACKED,pageIsFocused:window.document.hasFocus(),screenWidth:window.screen.width,screenHeight:window.screen.height})}function N(){return{appType:L.APP_TYPE,pageSessionId:L.SESSION_ID,pageSessionLocale:L.USER_LOCALE,allowAudioTracksSelector:L.ALLOW_AUDIOTRACK_SELECTOR,isUserInAudioTrackSelectorTest:L.IS_AB_TEST,videoId:L.VIDEO_ID,modalLocation:L.MODAL_LOCATION}}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let K=location.host.endsWith("vimeo.com");function x(e,t){if(!(L.LOG_ERRORS_TRACKED<=L.LOG_ERRORS_LIMIT))return console.debug("Skipping error tracking, session facing limit");L.LOG_ERRORS_TRACKED+=1;let r=M(M({},t),U());K&&window.DD_RUM&&window.DD_RUM.onReady(()=>{console.debug("Sending Datadog report",{error:e,errorInfo:r,globals:window.DD_RUM.getUser()??null}),window.DD_RUM.addError(e,r)})}function G(e,t={}){try{let r=Object.assign({},t,U());K&&window.DD_RUM?window.DD_RUM.onReady(()=>{let t=window.DD_RUM.getUser()??null;console.debug("Sending Datadog action",{action:e,actionInfo:r,globals:t}),window.DD_RUM.addAction(e,r)}):console.debug("Got local Datadog action",{action:e,actionInfo:r,globals:null})}catch{}}let V={downloadLinks:{onModalMounted:A(e=>G("MODAL_MOUNTED",e)),onLinksLoaded:A(e=>G("DOWNLOAD_LINKS_LOADED",e)),onDownloadOptionsReady:A(e=>G("DOWNLOAD_OPTIONS_READY",e)),userSelectDownloadOption:e=>G("USER_SELECT_DOWNLOAD_OPTION",e),onLinksRetryRendered:A(()=>G("DOWNLOAD_LINKS_RENDERED_RETRY_UI")),userRetriesGetLinks:e=>G("USER_RETRIES_GET_LINKS",e)},audioTrackSelector:{onSelectorMounted:A(()=>G("AUDIOTRACKS_SELECTOR_MOUNTED")),onTracksLoaded:A(e=>G("AUDIOTRACKS_LOADED",e)),onSelectorUIRendered:A(()=>G("AUDIOTRACKS_SELECTOR_RENDERED_UI")),onSelectorRetryRendered:A(()=>G("AUDIOTRACKS_SELECTOR_RENDERED_RETRY_UI")),userSelectedAudioTrack:e=>G("USER_SELECTED_AUDIOTRACK",e),userRetriesGetAudiotracks:()=>G("USER_RETRIES_GET_AUDIOTRACKS")}};var z=r(40643),B=r(289849),Z=r(590862),Y=r(619719),J=r(397458);let H=({onRetry:e,isLoading:t})=>(0,J.jsxs)(i.k,{justifyContent:"space-between",alignItems:"center",mt:"sm",gap:"md",flexDirection:"column",children:[(0,J.jsx)(z.bZ,{status:"error",children:(0,J.jsx)(B.X,{children:(0,g.Iu)({singular:"Unable to load content",dictionary:{es:{singular:"No se puede cargar el contenido"},"de-DE":{singular:"Inhalte k\xf6nnen nicht geladen werden"},"fr-FR":{singular:"Impossible de charger le contenu"},"ja-JP":{singular:"コンテンツを読み込めません"},"ko-KR":{singular:"콘텐츠 불러오기 실패"},"pt-BR":{singular:"N\xe3o foi poss\xedvel carregar o conte\xfado."},"zh-CN":{singular:"无法加载内容"}}})})}),(0,J.jsx)(Z.z,{isLoading:t,onClick:()=>{e()},size:"sm",variant:"primary",width:"100%",leftIcon:(0,J.jsx)(Y.O,{}),children:(0,g.Iu)({singular:"Try again",dictionary:{es:{singular:"Intentar de nuevo"},"de-DE":{singular:"Nochmal versuchen"},"fr-FR":{singular:"Veuillez r\xe9essayer"},"ja-JP":{singular:"再試行してください"},"ko-KR":{singular:"다시 시도하세요"},"pt-BR":{singular:"Tente de novo"},"zh-CN":{singular:"再试一次"}}})})]}),q={main:(0,g.Iu)({singular:"dubbed audio",dictionary:{es:{singular:"audio doblado"},"de-DE":{singular:"synchronisiertes Audio"},"fr-FR":{singular:"Doublage audio"},"ja-JP":{singular:"吹き替え音声"},"ko-KR":{singular:"더빙된 오디오"},"pt-BR":{singular:"\xe1udio dublado"},"zh-CN":{singular:"配音音频"}}}),descriptive:(0,g.Iu)({singular:"audio description",dictionary:{es:{singular:"descripci\xf3n de audio"},"de-DE":{singular:"Audiobeschreibung"},"fr-FR":{singular:"Audiodescription"},"ja-JP":{singular:"音声説明"},"ko-KR":{singular:"오디오 설명"},"pt-BR":{singular:"audiodescri\xe7\xe3o"},"zh-CN":{singular:"音频描述"}}}),commentary:(0,g.Iu)({singular:"commentary",dictionary:{es:{singular:"comentarios"},"de-DE":{singular:"Kommentare"},"fr-FR":{singular:"commentaire"},"ja-JP":{singular:"コメンタリー/解説"},"ko-KR":{singular:"해설"},"pt-BR":{singular:"coment\xe1rios"},"zh-CN":{singular:"现场解说"}}}),ai_generated:(0,g.Iu)({singular:"AI generated",dictionary:{es:{singular:"Generado con IA"},"de-DE":{singular:"KI-generiert"},"fr-FR":{singular:"G\xe9n\xe9r\xe9 par l'IA"},"ja-JP":{singular:"AI生成"},"ko-KR":{singular:"인공지능(AI) 생성"},"pt-BR":{singular:"Gerado por IA"},"zh-CN":{singular:"（AI 生成）"}}})};function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let X="VALUE_ORIGINAL_AUDIO_TRACK",ee={cursor:"not-allowed",opacity:.5,pointerEvents:"none"},et=({videoID:e,hasEditRights:t,setSelectedAudioTrack:r,selectedAudioTrack:n,hasVideoTranslations:i,versionId:a,videoLanguage:s})=>{let{languageCodeToNameMap:l}=function(){let{data:e}=(0,P.d3)({query:{filter:"audiotracks"},select:["code","name"]});return{languageCodeToNameMap:(0,o.useMemo)(()=>e?.data?.reduce((e,t)=>(e[t.code]=t.name,e),{})||{},[e])}}(),{keepPollingTranslations:c,translations:u}=function({videoId:e,hasVideoTranslations:t}){let{data:r,mutate:n,isLoading:o,isValidating:i}=(0,I.ef)(()=>e&&t?{where:j(e),select:S}:null),a=!!(r?.data&&r?.data.some(e=>"full_apply"===e.serviceMode&&e.status===R.PROCESS));return(0,w.X)(n,a,{interval:3e3,backoff:"linear",shouldResetBackoff:e=>e>5}),{translations:r?.data.filter(e=>"dubbing"===e.translationMode),keepPollingTranslations:a,isFetching:o||i}}({videoId:e,hasVideoTranslations:i}),{accessibleAudioTracks:d,alternateAudioTracks:p,hasValidResponse:O,isLoading:v,getAudioTracks:A,audioTracksError:k,fetchMetrics:L}=function({videoId:e,videoVersionId:t,keepPollingTranslations:r,translations:n,exclusiveAccess:i}){let{error:a,mutate:s,data:l,isLoading:c,isValidating:u}=(0,b.W3)(()=>t&&e?{where:_(_({},j(e)),{},{versionId:t}),select:D,headers:{Accept:"application/vnd.vimeo.*+json;version=3.4.10"}}:null,{refreshWhenHidden:!1,revalidateOnFocus:!1,shouldRetryOnError:!1}),d=l?.data,p=d?.length!==void 0,g=m({isLoading:c,apiError:a,hasValidResponse:p}),O=!!d?.some(e=>e.transcode.status===E);(0,w.X)(s,O||r,{interval:1e4,backoff:"exponential",shouldResetBackoff:e=>e>5});let f=(0,o.useMemo)(()=>(d??[]).filter(e=>i||e.active).map(e=>{let{code:t}=e.language,r=n?.find(e=>e.targetLang===t&&"PRCS"===e.status),o=e.transcode.status===E,i=e.upload.status===E;return _(_({},e),{},{disableReason:i?"uploading":o?"transcoding":r?"beingTranslated":void 0})}),[d,i,n]);return{alternateAudioTracks:d,accessibleAudioTracks:f,hasValidResponse:p,audioTracksError:a,getAudioTracks:s,isLoading:c,isValidating:u,fetchMetrics:g}}({videoId:e,videoVersionId:a,keepPollingTranslations:c,translations:u,exclusiveAccess:t}),C=(0,o.useCallback)(()=>{V.audioTrackSelector.userRetriesGetAudiotracks(),A()},[A]);(0,o.useEffect)(()=>{V.audioTrackSelector.onSelectorMounted()},[]),(0,o.useEffect)(()=>{k&&x(k,Q({videoID:e,hint:"Failed to fetch clip's alternate audio tracks.",method:"useGetVideoVersionAudiotracks",trackingTag:T.FETCH_AUDIOTRACKS_FAILED},L.current))},[k,L,e]);let $=(0,o.useMemo)(()=>d.map(e=>{let t=q[e.type]??e.type,r="ai_generated"===e.provenance,n=r?`(${q.ai_generated})`:"";return{label:[`${e.language.name}`,t,n].join(" "),value:e.uri,disableReason:e.disableReason,isAIGenerated:r,isOriginalAudio:!1}}).sort((e,t)=>e.label.localeCompare(t.label)),[d]),U=s&&l?l[s]:s,N=(0,o.useMemo)(()=>[{label:U?`${U} (${(0,g.Iu)({singular:"original",dictionary:{es:{singular:"Original"},"de-DE":{singular:"Original"},"fr-FR":{singular:"Original"},"ja-JP":{singular:"オリジナルサイズ"},"ko-KR":{singular:"오리지널"},"pt-BR":{singular:"Original"},"zh-CN":{singular:"原创"}}})})`:(0,g.Iu)({singular:"Original audio track",dictionary:{es:{singular:"Pista de audio original"},"de-DE":{singular:"Originale Audiospur"},"fr-FR":{singular:"Piste audio originale"},"ja-JP":{singular:"オリジナルオーディオトラック"},"ko-KR":{singular:"원본 오디오 트랙"},"pt-BR":{singular:"Faixa de \xe1udio original"},"zh-CN":{singular:"原始音频轨道"}}}),value:X,isAIGenerated:!1,isOriginalAudio:!0}].concat($),[$,U]),F=(0,o.useCallback)(e=>{let t=e.value[0],n=N.find(e=>e.value===t);r({value:t,label:n?.label??t,isAIGenerated:!!n?.isAIGenerated,isOriginalAudio:!!n?.isOriginalAudio})},[N,r]);return(O&&V.audioTrackSelector.onTracksLoaded(Q({numberOfFetchedTracks:p?.length},L.current)),0!==$.length||k)?(k?V.audioTrackSelector.onSelectorRetryRendered():V.audioTrackSelector.onSelectorUIRendered(),(0,J.jsxs)(f.xu,{children:[(0,J.jsx)(h.x,{variant:"heading-xs",mb:"md",children:(0,g.Iu)({singular:"Audio language",dictionary:{es:{singular:"Idioma del audio"},"de-DE":{singular:"Audiosprache"},"fr-FR":{singular:"Langue audio"},"ja-JP":{singular:"オーディオ言語"},"ko-KR":{singular:"오디오 언어"},"pt-BR":{singular:"Idioma do \xe1udio"},"zh-CN":{singular:"音频语言"}}})}),(0,J.jsx)(y.Ph,{value:n?[n]:void 0,items:N,disabled:v,placeholder:(0,g.Iu)({singular:"Original audio track",dictionary:{es:{singular:"Pista de audio original"},"de-DE":{singular:"Originale Audiospur"},"fr-FR":{singular:"Piste audio originale"},"ja-JP":{singular:"オリジナルオーディオトラック"},"ko-KR":{singular:"원본 오디오 트랙"},"pt-BR":{singular:"Faixa de \xe1udio original"},"zh-CN":{singular:"原始音频轨道"}}}),size:"md",onValueChange:F,highlightedValue:n,children:e=>(0,J.jsx)(y.Ql,{mt:"sm",display:"flex",gap:"sm",alignItems:"center",sx:e.disableReason?ee:void 0,children:(0,J.jsx)(y.S_,{children:e.label})})}),k&&(0,J.jsx)(H,{onRetry:C})]})):null};var er=r(945368);let en=()=>(0,J.jsx)(z.bZ,{status:"warning",mb:"md",children:(0,J.jsx)(B.X,{children:(0,g.Iu)({singular:"Downloaded videos are not protected by digital rights management (DRM). {LINK}Learn more{/LINK}",replacements:{LINK:e=>(0,J.jsx)(er.r,{title:(0,g.Iu)({singular:"Learn more",dictionary:{es:{singular:"Ver m\xe1s"},"de-DE":{singular:"Mehr dazu"},"fr-FR":{singular:"En savoir plus "},"ja-JP":{singular:"詳細を見る"},"ko-KR":{singular:"자세히 보기"},"pt-BR":{singular:"Saiba mais"},"zh-CN":{singular:"了解更多"}}}),target:"_blank",href:"https://vimeo.com/help/zendesk_sso?redirect_to=https://help.vimeo.com/hc/en-us/articles/31622243101969",children:e},"learn-more-link")},dictionary:{es:{singular:"Los videos descargados no est\xe1n protegidos por la gesti\xf3n de derechos digitales (DRM). {LINK}M\xe1s informaci\xf3n{/LINK}"},"de-DE":{singular:"Heruntergeladene Videos sind nicht durch Digital Rights Management (DRM) gesch\xfctzt. {LINK}Mehr erfahren{/LINK}"},"fr-FR":{singular:"Les vid\xe9os t\xe9l\xe9charg\xe9es ne sont pas prot\xe9g\xe9es par la gestion des droits num\xe9riques (DRM). {LINK}En savoir plus{/LINK}"},"ja-JP":{singular:"ダウンロードした動画はデジタル著作権管理（DRM）によって保護されていません。{LINK}詳細はこちら{/LINK}"},"ko-KR":{singular:"다운로드한 동영상은 디지털 저작권 관리(DRM)로 보호되지 않습니다. {LINK}자세히 보기{/LINK}"},"pt-BR":{singular:"Os v\xeddeos baixados n\xe3o s\xe3o protegidos pelo gerenciamento de direitos digitais (DRM). {LINK}Saiba mais{/LINK}"},"zh-CN":{singular:"下载的视频不受数字版权管理 (DRM) 保护。{LINK}了解更多{/LINK}"}}})})});var eo=r(163421),ei=r(61423),ea=r(113690);let es=()=>{let e=(0,O.R)(),t=e?.user?.id??0,{assignment:r}=(0,ei.CZ)({flagKey:"svv-download-modal-audio-track-selector",subject:{key:t,keyType:ea.B7.CUID},defaultAssignment:"control"});return"variant"===r};var el=r(908258);function ec(e){return e.split("/").pop()}let eu=["language","usesDrm","metadata.interactions.translations","metadata.interactions.edit.uri","metadata.connections.versions.currentUri","metadata.connections.versions.latestIncompleteVersion","user.uri"];var ed=r(92575),ep=r(996240);let eg=["baseUrl","where","query"];function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ef(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eO(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}async function eh(e){let{baseUrl:t,where:{videoId:r,versionId:n},query:o}=e,i=(0,ed.Z)(e,eg),a=await fetch(`${t}/videos/${r}/versions/${n}/downloads?${(0,ep.Ov)(o)}`,ef(ef({},i),{},{method:"GET"}));if(!a.ok)throw new ep.F7("A network error occurred",a.status,a);if(204===a.status)return null;if(!a.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let s=await a.json();return(0,ep.l_)(s)}var ey=r(296638),eb=r(502349),ew=r(848568),ej=r(173656);function em(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ev(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?em(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):em(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function e_(e,t){let r="function"==typeof e?e():e,{baseUrl:n,jwt:o,xVimeoPage:i,locale:a}=(0,ew.r)();return(0,ey.ZP)(r?`/videos/${r.where.videoId}/versions/${r.where.versionId}/downloads${(0,eb.Y$)(r)}`:()=>null,r?()=>eh(ev(ev({},r),{},{headers:ev(ev({},r.headers),{},{"Content-Type":"application/json",Authorization:o?`jwt ${o}`:"","Vimeo-Page":`${i}`,"Accept-Language":a??"en"}),baseUrl:n})):null,t)}"true"===ej.env.STORYBOOK&&(0,eb.MR)(e_,{endpoint:"/videos/:videoId/versions/:versionId/downloads",method:"GET"}),"true"===ej.env.STORYBOOK&&(0,eb.MR)(function(){let{mutate:e}=(0,ey.kY)(),{baseUrl:t,jwt:r,xVimeoPage:n,locale:i}=(0,ew.r)(),[a,s]=(0,eb.AC)();return[(0,o.useCallback)(async o=>{s({type:"REQUEST"});try{let a=await e(`/videos/${o.where.videoId}/versions/${o.where.versionId}/downloads${(0,eb.Y$)(o)}`,eh(ev(ev({},o),{},{baseUrl:t,headers:ev(ev({},o.headers),{},{"Content-Type":"application/json",Authorization:r?`jwt ${r}`:"","Vimeo-Page":`${n}`,"Accept-Language":i??"en"})})));s({type:"SUCCESS",payload:a})}catch(e){s({type:"FAILURE",payload:e})}},[t,n,r,i,s]),a]},{endpoint:"/videos/:videoId/versions/:versionId/downloads",method:"GET"});var eE=r(426546);function eD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eD(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let eR=["download.height","download.link","download.quality","download.rendition","download.type","download.width","download.sizeShort","download.publicName","download.videoFileId"];var eS=r(228296),eP=r(408262);class eA extends Error{constructor(e,t="General error."){super(["Video tagging error.",t].join(" ")),(0,n.Z)(this,"_data",void 0),this._data=e,this.name=this.constructor.name}get data(){return this._data}}let eT=async(e,t,r,n,o)=>{let i=await fetch(`//${t}/videos/${e}/tag_job`,{method:"POST",headers:{Authorization:`jwt ${r}`,"Content-Type":"application/json"},body:JSON.stringify({flow:o,video_file_id:n})});if(i.ok){let e=await i.json();return(0,eP.uo)(e)}{let e=(await i.json()).catch(()=>({empty:!0}));throw e.status=i.status,new eA(e,"Bad response.")}},ek=async(e,t,r,n,o)=>{let i=await fetch(`//${t}/videos/${e}/tag_job/${n}?filename=${o}`,{method:"GET",headers:{Authorization:`jwt ${r}`}});if(i.ok){let e=await i.json();return(0,eP.uo)(e)}{let e=(await i.json()).catch(()=>({empty:!0}));throw e.status=i.status,new eA(e,"Bad response.")}};function eL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eL(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var e$=r(92332),eU=r(16871),eN=r(902213),eF=r(467426),eM=r(297715),eK=r(411594),ex=r(185822),eG=r(560583),eV=r(923801),ez=r(126371);function eB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eB(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let eY=e=>e&&e.ownerId!==e.userId?"Admin"===e.plainTextPermissionLevel?"admin":"Contributor"===e.plainTextPermissionLevel?"contributor":"ContributorPlus"===e.plainTextPermissionLevel?"contributor_plus":"Viewer"===e.plainTextPermissionLevel?"viewer":null:"owner",eJ=(e,t,r,n,o,i,a,s)=>{let l=(0,eF.kD)({action_type:"click",feature:null}),c=(0,eM.Qt)({video_id:e,video_owner_id:i?.ownerId??null}),u=(0,eK.FI)({product:"distribution",feature:"download",location:"modal",modal_name:"download_modal",flow:"download_video_file",element:"button",is_user_facing_data:!1,entity_type:"video",copy:null,device_type:(0,eN.Z)()}),d=(0,ex.lg)({is_integration:!1,integration_id:null,integration_name:null,managed_user_id:null,app_id:null,integration_type:null,partner_bucket:null,is_partner:null}),p=(0,eG.g9)({page_name:o??"viewer_home",referrer_page_name:"svv"===s?"single_video_view":null,target:null,target_path:null,path:a??null,copy:"Download"}),g=eY(i),O=(0,eV.UW)({is_team_member:!!i?.ownerId,team_owner_id:i?.ownerId??null,team_id:i?.teamId??null,team_subscription_type:i?.accountType??null,team_size:i?.currentTeamSize??null,team_role:g}),f=eZ(eZ(eZ(eZ(eZ(eZ({},l),c),u),O),d),p),h={distribution_type:"download",target_quality:t,target_resolution:r,target_file_details:null,number_of_items:1,embed_config:null,embed_custom_dimensions:null,is_internal:!1,target_transcript_language:null,audio_language_selected_for_download:n.label,is_ai_translated:n.isAIGenerated,is_original_language_downloaded:n.isOriginalAudio,collection_type:null,distribution_tab:null,embed_layout:null,embed_playback_toggles_off:null,embed_playback_toggles_on:null,is_send_email_notification:null,lms_completion_threshold:null,lms_scoring_method:null,lms_technical_standard:null,sharee_email:null,sharee_entity_permission:null,sharee_id:null,sharee_team_permission:null};(0,ez.Ou)("vimeo.distribute_content",f,18,h)};function eH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let eW=({files:e,handleClick:t,videoID:r,versionUri:f,clipRequestId:h,location:y,className:b,pageName:w,usesDrm:v,audioTracksSelector:_=!0})=>{let{0:E,1:D}=(0,o.useState)({value:X,label:X,isAIGenerated:!1,isOriginalAudio:!0}),I=E.value,R=(0,o.useMemo)(()=>(0,eE.x)(e),[e]),{0:S,1:P}=(0,o.useState)(!1),A=h??(r?`${r}`:void 0),C=(0,o.useMemo)(()=>f?Number(ec(f)):void 0,[f]),$=(0,O.R)(),U=(0,p.E)(),F=es(),M=_&&!!$?.user&&(U||F),{usesDrm:K,mostRecentVersion:G,isFetching:z,hasVideoTranslations:B,videoLanguage:Z,clipMetadataError:Y,canEdit:q}=function({videoId:e,disabled:t}){let r=(0,O.R)(),{data:n,error:i,isLoading:a,isValidating:s}=(0,el.rw)(()=>!e||t?null:{where:j(e),select:eu,headers:{Accept:"application/vnd.vimeo.*+json;version=3.4.10"}}),l=!!n?.metadata?.interactions?.translations?.uri,c=!!n?.metadata?.interactions?.edit?.uri,u=n?.metadata?.connections?.versions?.currentUri,d=n?.metadata?.connections?.versions??[],p=(0,o.useMemo)(()=>n?.metadata?.connections?.versions?.currentUri?Number(ec(n?.metadata.connections.versions.currentUri)):void 0,[n?.metadata?.connections?.versions?.currentUri]),g=n?.user?.uri,f=!!(g&&g===r?.user?.uri);return{hasVideoTranslations:l,mostRecentVersion:p&&p>=0?p:void 0,currentVideoUri:u,allVideoVersions:d,isFetching:a||s,videoLanguage:n?.language,usesDrm:n?.usesDrm,clipMetadataError:i,canEdit:f||c}}({disabled:!M,videoId:A}),W=C??G,Q=!z&&void 0===W;!function({appType:e,modalLocation:t=null,pageName:r=null,userId:n=null,userLocale:i=null,videoId:a=null,allowAudioTracksSelector:s=null,isUserInAudioTrackSelectorTest:l=null},c=!0){(0,o.useEffect)(()=>{if(function(e){for(let t in e)L[t]=e[t]}({APP_TYPE:e,USER_ID:n,USER_LOCALE:i,MODAL_LOCATION:t,PAGE_NAME:r,VIDEO_ID:a,ALLOW_AUDIOTRACK_SELECTOR:s,IS_AB_TEST:l}),c){var o;o=N(),window.DD_RUM&&window.DD_RUM.onReady(()=>{for(let e in o)window.DD_RUM.setViewContextProperty(e,String(o[e]))})}},[e,c,t,r,n,i,a,s,l])}({appType:k,userId:$?.user?.id,userLocale:$?.locale,modalLocation:y??w,videoId:A,allowAudioTracksSelector:M,isUserInAudioTrackSelectorTest:F,pageName:w},!1),(0,o.useEffect)(()=>{V.downloadLinks.onModalMounted({allowAudioTracksSelector:M})},[M]);let ee=I===X,er=ee?void 0:I,{onDownloadClick:ei,loadingButtons:ea}=function({location:e,pageName:t,handleClick:r,videoID:n,audiotrackUri:i,allowAudioTracksSelector:a}){let{0:s,1:l}=(0,o.useState)([]),{shouldTagVideo:c,tagVideo:u}=function(){let{0:e,1:t}=(0,o.useState)({}),r=(0,o.useCallback)((n,o,i,a,s,l)=>new Promise((c,u)=>{let d=null;ek(n,o,i,a,s).then(p=>{"success"===p.status&&p.downloadUrl?(t(eC(eC({},e),{},{[l]:p.downloadUrl})),d&&clearTimeout(d),c(p.downloadUrl)):"failed"===p.status?u(new eA(p,'Received status is "failed".')):d=setTimeout(()=>r(n,o,i,a,s,l).then(e=>c(e)).catch(e=>u(e)),500)}).catch(e=>u(new eA(e)))}),[e]);return{shouldTagVideo:(e,t)=>"svv"===t&&e.size&&e.size<=104857600,tagVideo:(0,o.useCallback)((n,o,i,a,s)=>new Promise((l,c)=>{let u=e[a];u?l(u):eT(i,n,o,a,s).then(s=>{"failed"===s.status&&c(new eA(s,'Received status is "failed".')),s.downloadUrl?(t(eC(eC({},e),{},{[a]:s.downloadUrl})),l(s.downloadUrl)):r(i,n,o,s.id,s.filename,a).then(e=>l(e)).catch(e=>c(new eA(e,"Failed to fetch job status.")))}).catch(e=>c(new eA(e,"Failed to trigger tagging job.")))}),[r,e])}}(),d=(0,o.useContext)(eU.Z),p=(0,eS.useRouter)().pathname;return{onDownloadClick:(0,o.useCallback)((o,g)=>O=>{eJ(n??0,o.quality,o.rendition,g,t,d?.teamUser,p,e);let{quality:f,rendition:h}=o;r&&r(o),V.downloadLinks.userSelectDownloadOption({videoID:n??0,quality:f,rendition:h,allowAudioTracksSelector:a,audiotrackUri:g.value,isOriginalAudio:g.isOriginalAudio,isAIGenerated:g.isAIGenerated}),d?.apiUrl&&d?.jwt&&e&&n&&!i&&c(o,e)&&(O.preventDefault(),l([...s,o.link]),u(d.apiUrl,d.jwt,n,o.videoFileId?.toString()??"").then(e=>{e?(0,e$.S)(e):(0,e$.S)(`${o.link}`),l([...s.filter(e=>e!==o.link)])}).catch(e=>{x(e,{videoID:n,audiotrackUri:i,hint:"Failed to complete video-tagging job.",trackingTag:T.FAILED_VIDEO_TAGGING}),(0,e$.S)(`${o.link}`),l([...s.filter(e=>e!==o.link)])}))},[a,i,r,s,e,t,p,c,u,n,d?.apiUrl,d?.jwt,d?.teamUser]),loadingButtons:s}}({location:y,pageName:w,handleClick:t,videoID:r,audiotrackUri:er,allowAudioTracksSelector:M}),{downloadableFiles:ed,getVideoFiles:ep,isValidating:eg,isLoading:eO,videoFilesError:ef}=function({videoId:e,disabled:t}){let{error:r,mutate:n,data:i,isLoading:a,isValidating:s}=(0,el.rw)(()=>!e||t?null:{where:j(e),select:eR,headers:{Accept:"application/vnd.vimeo.*+json;version=3.4.1"}},{refreshWhenHidden:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{downloadableFiles:(0,o.useMemo)(()=>(0,eE.x)(i?.download??[]),[i?.download]),videoFilesError:r,getVideoFiles:n,isLoading:a,isValidating:s,isFetching:a||s}}({videoId:A,disabled:!M}),{downloadableFiles:eh,downloadsError:ey,getDownloads:eb,isDownloadsValidating:ew,isDownloadsLoading:ej,fetchMetrics:em,hasValidResponse:ev}=function({videoId:e,versionId:t,disabled:r,audiotrackUri:n}){let{error:i,mutate:a,data:s,isLoading:l,isValidating:c}=e_(()=>{if(!e||!t||r)return null;let o=n?.split("/").pop();return{where:eI(eI({},j(e)),{},{versionId:t}),headers:{Accept:"application/vnd.vimeo.*+json;version=3.4.10"},query:{audiotrackId:o}}},{keepPreviousData:!0,refreshWhenHidden:!1,revalidateOnFocus:!1,shouldRetryOnError:!1}),u="object"==typeof s&&null!==s&&Array.isArray(s.download),d=m({isLoading:l,apiError:i,hasValidResponse:u});return{downloadableFiles:(0,o.useMemo)(()=>u?(0,eE.x)(s.download,{allowDownloadOriginal:!n}):[],[n,s,u]),downloadsError:i,getDownloads:a,isDownloadsLoading:l,isDownloadsValidating:c,hasValidResponse:u,fetchMetrics:d}}({versionId:W,videoId:A,disabled:!M,audiotrackUri:er});(0,o.useEffect)(()=>{ev&&V.downloadLinks.onLinksLoaded(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eq(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({numberOfLinks:eh.length},em.current))},[em,eh.length,ev]),(0,o.useEffect)(()=>{er&&eb()},[er,eb]);let eD=ee&&!ef&&!eO,eP=(0,o.useMemo)(()=>ee?eD?ed:R:null,[eD,ee,ed,R]),eL=ej||eO||z,eN=(0,o.useMemo)(()=>M?eL&&eP?{files:eP}:eL?{isLoading:!0,files:[]}:(Q||ey)&&eP?{files:eP,isFallback:!0}:{files:eh}:{files:R},[eL,M,R,Q,ey,eP,eh]),eF=eN.files,eM=eN.isFallback,eK=0===eF.length&&!eN.isLoading;(0,o.useEffect)(()=>{eN.isLoading||V.downloadLinks.onDownloadOptionsReady({allowAudioTracksSelector:M,isNoLinksToShow:eK,isFallbackLinksUsed:eM,numberOfOptions:eF.length})},[M,eM,eK,eF.length,eN.isLoading]),function({versionIsMissing:e,clipMetadataError:t,videoFilesError:r,downloadsError:i,videoID:a,versionId:s,selectedAudioTrack:l,isFallbackLinksUsed:c,isNoLinksToShow:u,allowAudioTracksSelector:d,downloadableFilesFetchMetrics:p}){(0,o.useEffect)(()=>{if(d&&!a){let e="Video ID is missing.";x(Error(e),{versionId:s,videoID:a,hint:e,trackingTag:T.VIDEO_ID_MISSING})}},[a,s,d]),(0,o.useEffect)(()=>{if(i){let e=l.split("/").pop();x(i,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eH(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({videoID:a,versionId:s,selectedAudioTrack:l,trackId:e,hint:"Failed to fetch DL links for video and audio-track.",method:"useGetVideoVersionDownloads",trackingTag:T.FETCH_DL_LINKS_FAILED},p))}},[l,i,a,s,p]),(0,o.useEffect)(()=>{r&&x(r,{videoID:a,hint:"Failed to fetch main DL links for video.",method:"useGetVideo",trackingTag:T.FETCH_CLIP_FAILED})},[r,a]),(0,o.useEffect)(()=>{d&&t&&x(t,{versionId:s,videoID:a,hint:"Failed to fetch clip's metadata.",method:"useGetVideoMetadata",trackingTag:T.FETCH_CLIP_METADATA_FAILED})},[d,t,s,a]),(0,o.useEffect)(()=>{if(d&&e){let t="Version ID is missing.";x(Error(t),{versionIsMissing:e,videoID:a,hint:t,trackingTag:T.VIDEO_VERSION_ID_MISSING})}},[d,e,a]),(0,o.useEffect)(()=>{d&&(u||c)&&x(Error(u?"No download links to show.":"Used fallback links."),{videoID:a,versionId:s,isNoLinksToShow:u,isFallbackLinksUsed:c,selectedAudioTrack:l,trackingTag:u?T.UI_NO_LINKS_TO_SHOW:T.UI_USED_FALLBACK_LINKS})},[d,u,s,a,l,c])}({versionIsMissing:Q,clipMetadataError:Y,videoFilesError:ef,downloadsError:ey,videoID:A,versionId:W,selectedAudioTrack:I,isFallbackLinksUsed:eM,isNoLinksToShow:eK,allowAudioTracksSelector:M,downloadableFilesFetchMetrics:em});let ex=(0,o.useCallback)(()=>{D({value:X,label:X,isAIGenerated:!1,isOriginalAudio:!0})},[]),eG=(0,o.useCallback)(()=>{ep(),eb()},[eb,ep]),eV=(0,o.useCallback)(()=>{S&&er?ex():(eG(),P(!0)),V.downloadLinks.userRetriesGetLinks({audiotrackUri:er})},[er,ex,eG,S]),ez=(0,o.useCallback)(e=>{V.audioTrackSelector.userSelectedAudioTrack(e),D(e)},[]),eB=M&&eK&&ey;return(0,o.useEffect)(()=>{eB&&V.downloadLinks.onLinksRetryRendered()},[eB]),(0,J.jsxs)(J.Fragment,{children:[(K||v)&&(0,J.jsx)(en,{}),(0,J.jsxs)(i.k,{gap:"1.75rem",direction:"column",className:b,minHeight:M?(0,a.h)(300):void 0,children:[M&&(0,J.jsx)(et,{videoID:A,setSelectedAudioTrack:ez,selectedAudioTrack:I,versionId:W,videoLanguage:Z,hasVideoTranslations:B,hasEditRights:q}),eB&&(0,J.jsx)(H,{isLoading:ew||eg,onRetry:eV}),eN.isLoading&&(0,J.jsx)(s.M,{w:"100%",h:"100%",margin:"auto",children:(0,J.jsx)(l.$,{size:"md"})}),eK&&!ey?(0,J.jsx)(eo.w,{}):eF.map(e=>(0,J.jsxs)(i.k,{align:"center",justify:"space-between",id:`download-file-${e.link}`,children:[(0,J.jsxs)(i.k,{gap:"0.75rem",align:"center",children:[(0,J.jsx)(c.n,{size:"lg",fontWeight:"500",minW:"3.13rem",children:"source"===e.quality?(0,g.Iu)({singular:"Original",dictionary:{"ja-JP":{singular:"オリジナルサイズ"},"ko-KR":{singular:"오리지널"},"zh-CN":{singular:"原创"}}}):e.publicName}),(0,J.jsxs)(i.k,{gap:"xs",children:[(0,J.jsx)(c.n,{size:"sm",color:"text-secondary",children:e.sizeShort}),(0,J.jsx)(c.n,{size:"sm",color:"text-secondary",children:"|"}),(0,J.jsxs)(c.n,{size:"sm",color:"text-secondary",children:[e.width," x ",e.height]})]})]}),(0,J.jsx)(u.h,{"aria-label":(0,g.Iu)({singular:"Download",dictionary:{es:{singular:"Descargar"},"de-DE":{singular:"Herunterladen"},"fr-FR":{singular:"T\xe9l\xe9charger "},"ja-JP":{singular:"ダウンロード"},"ko-KR":{singular:"다운로드"},"pt-BR":{singular:"Baixar"},"zh-CN":{singular:"下载"}}}),as:"a",href:`${e.link}`,variant:"secondary",icon:(0,J.jsx)(d.n,{}),isDisabled:eN.isLoading,isLoading:-1!==ea.indexOf(e.link),onClick:ei(e,E)})]},`${I}-${e.link}`))]})]})}},163421:function(e,t,r){r.d(t,{w:function(){return c}});var n=r(112756),o=r(292154),i=r(810464),a=r(590862),s=r(662555),l=r(397458);let c=({closeModal:e})=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.x,{pt:"3xl",pr:"lg",pb:"lg",pl:"lg",textAlign:"center",children:(0,l.jsx)(o.n,{size:"lg",children:(0,s.Iu)({singular:"Your downloads are still processing...",dictionary:{es:{singular:"Sus descargas a\xfan se est\xe1n procesando..."},"de-DE":{singular:"Deine Downloads werden noch bearbeitet..."},"fr-FR":{singular:"Vos t\xe9l\xe9chargements sont encore en cours de traitement…"},"ja-JP":{singular:"ダウンロードを処理しています..."},"ko-KR":{singular:"다운로드가 아직 진행 중입니다..."},"pt-BR":{singular:"Seus downloads ainda est\xe3o sendo processados..."},"zh-CN":{singular:"您的下载仍在处理中..."}}})})}),e&&(0,l.jsx)(i.m,{border:"none",py:"sm",px:"lg",children:(0,l.jsx)(a.z,{onClick:e,children:(0,s.Iu)({singular:"OK",dictionary:{es:{singular:"Aceptar"},"ko-KR":{singular:"확인"},"zh-CN":{singular:"确定"}}})})})]})},426546:function(e,t,r){r.d(t,{x:function(){return n}});let n=(e,t={allowDownloadOriginal:!0})=>{let r=["hd","sd","uhd"].concat(t.allowDownloadOriginal?["source"]:[]);return e.filter(e=>r.includes(e.quality)).sort((e,t)=>"source"===e.quality?-1:t.height-e.height)}},885980:function(e,t,r){r.d(t,{R7:function(){return p},_i:function(){return d},bj:function(){return g}});var n=r(867932),o=r(92575),i=r(996240);let a=["baseUrl","select","where","query"],s=["baseUrl","variables","where"],l=["baseUrl","variables","where"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}async function d(e){let{baseUrl:t,select:r,where:{videoId:n},query:s}=e,l=(0,o.Z)(e,a),c=await fetch(`${t}/videos/${n}/translations?${(0,i.Ov)(s)}&fields=${r.map(i.Rb).join(",")}`,u(u({},l),{},{method:"GET"}));if(!c.ok)throw new i.F7("A network error occurred",c.status,c);if(204===c.status)return null;if(!c.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let d=await c.json();return(0,i.l_)(d)}async function p(e){let{baseUrl:t,variables:r,where:{videoId:n}}=e,a=(0,o.Z)(e,s),l=await fetch(`${t}/videos/${n}/translations`,u(u({},a),{},{method:"POST",body:JSON.stringify((0,i.mH)(r))}));if(!l.ok)throw new i.F7("A network error occurred",l.status,l);if(204===l.status)return null;if(!l.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let c=await l.json();return(0,i.l_)(c)}async function g(e){let{baseUrl:t,variables:r,where:{videoId:n}}=e,a=(0,o.Z)(e,l),s=await fetch(`${t}/videos/${n}/translations`,u(u({},a),{},{method:"DELETE",body:JSON.stringify((0,i.mH)(r))}));if(!s.ok)throw new i.F7("A network error occurred",s.status,s);if(204===s.status)return null;if(!s.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let c=await s.json();return(0,i.l_)(c)}},348973:function(e,t,r){r.d(t,{d3:function(){return w}});var n=r(92575),o=r(867932),i=r(996240);let a=["baseUrl","select","query"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}async function c(e){let{baseUrl:t,select:r,query:o}=e,s=(0,n.Z)(e,a),c=await fetch(`${t}/languages?${(0,i.Ov)(o)}&fields=${r.map(i.Rb).join(",")}`,l(l({},s),{},{method:"GET"}));if(!c.ok)throw new i.F7("A network error occurred",c.status,c);if(204===c.status)return null;if(!c.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let u=await c.json();return(0,i.l_)(u)}var u=r(296638),d=r(502349),p=r(652983),g=r(512959),O=r(848568),f=r(173656);let h=["perPage","page"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w(e,t){let r="function"==typeof e?e():e,{baseUrl:n,jwt:o,xVimeoPage:i,locale:a}=(0,O.r)();return(0,u.ZP)(r?`/languages${(0,d.Y$)(r)}`:()=>null,r?()=>c(b(b({},r),{},{headers:b(b({},r.headers),{},{"Content-Type":"application/json",Authorization:o?`jwt ${o}`:"","Vimeo-Page":`${i}`,"Accept-Language":a??"en"}),baseUrl:n})):null,t)}"true"===f.env.STORYBOOK&&(0,d.MR)(w,{endpoint:"/languages",method:"GET"}),"true"===f.env.STORYBOOK&&(0,d.MR)(function(){let{mutate:e}=(0,u.kY)(),{baseUrl:t,jwt:r,xVimeoPage:n,locale:o}=(0,O.r)(),[i,a]=(0,d.AC)();return[(0,p.useCallback)(async i=>{a({type:"REQUEST"});try{let s=await e(`/languages${(0,d.Y$)(i)}`,c(b(b({},i),{},{baseUrl:t,headers:b(b({},i.headers),{},{"Content-Type":"application/json",Authorization:r?`jwt ${r}`:"","Vimeo-Page":`${n}`,"Accept-Language":o??"en"})})));a({type:"SUCCESS",payload:s})}catch(e){a({type:"FAILURE",payload:e})}},[t,n,r,o,a]),i]},{endpoint:"/languages",method:"GET"}),"true"===f.env.STORYBOOK&&(0,d.MR)(function(e,t){let r="function"==typeof e?e():e,{baseUrl:o,jwt:i,xVimeoPage:a,locale:s}=(0,O.r)();return(0,g.ZP)((e,t)=>{if(null===r||t&&!t.paging.next)return null;let o=r.query??{},{perPage:i=25,page:a}=o,s=(0,n.Z)(o,h),l=r.select.join(","),c=Object.entries(s??{}).filter(([,e])=>void 0!==e).map(([e,t])=>`${e}=${t}`).join("&");return[`/languages?page=${e+1}&perPage=${i}&fields=${l}&${c}`,e]},null!==r?([e,t])=>c(b(b({},r),{},{baseUrl:o,headers:b(b({},r.headers),{},{"Content-Type":"application/json",Authorization:i?`jwt ${i}`:"","Vimeo-Page":`${a}`,"Accept-Language":s??"en"}),query:b(b({},r.query),{},{page:t+1})})):null,t)},{endpoint:"/languages",method:"GET"})},198005:function(e,t,r){r.d(t,{Ni:function(){return h},ef:function(){return f}});var n=r(92575),o=r(867932),i=r(502349),a=r(885980),s=r(652983),l=r(296638),c=r(512959),u=r(848568),d=r(173656);let p=["perPage","page"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f(e,t){let r="function"==typeof e?e():e,{baseUrl:n,jwt:o,xVimeoPage:s,locale:c}=(0,u.r)();return(0,l.ZP)(r?`/videos/${r.where.videoId}/translations${(0,i.Y$)(r)}`:()=>null,r?()=>(0,a._i)(O(O({},r),{},{headers:O(O({},r.headers),{},{"Content-Type":"application/json",Authorization:o?`jwt ${o}`:"","Vimeo-Page":`${s}`,"Accept-Language":c??"en"}),baseUrl:n})):null,t)}function h(){let{baseUrl:e,jwt:t,xVimeoPage:r,locale:n}=(0,u.r)(),[o,l]=(0,i.AC)();return[(0,s.useCallback)(async o=>{l({type:"REQUEST"});try{let i=await (0,a.bj)(O(O({},o),{},{baseUrl:e,headers:O(O({},o.headers),{},{"Content-Type":"application/json",Authorization:t?`jwt ${t}`:"","Vimeo-Page":`${r}`,"Accept-Language":n??"en"})}));l({type:"SUCCESS",payload:i})}catch(e){l({type:"FAILURE",payload:e})}},[e,r,t,n,l]),o]}"true"===d.env.STORYBOOK&&(0,i.MR)(f,{endpoint:"/videos/:videoId/translations",method:"GET"}),"true"===d.env.STORYBOOK&&(0,i.MR)(function(){let{mutate:e}=(0,l.kY)(),{baseUrl:t,jwt:r,xVimeoPage:n,locale:o}=(0,u.r)(),[c,d]=(0,i.AC)();return[(0,s.useCallback)(async s=>{d({type:"REQUEST"});try{let l=await e(`/videos/${s.where.videoId}/translations${(0,i.Y$)(s)}`,(0,a._i)(O(O({},s),{},{baseUrl:t,headers:O(O({},s.headers),{},{"Content-Type":"application/json",Authorization:r?`jwt ${r}`:"","Vimeo-Page":`${n}`,"Accept-Language":o??"en"})})));d({type:"SUCCESS",payload:l})}catch(e){d({type:"FAILURE",payload:e})}},[t,n,r,o,d]),c]},{endpoint:"/videos/:videoId/translations",method:"GET"}),"true"===d.env.STORYBOOK&&(0,i.MR)(function(e,t){let r="function"==typeof e?e():e,{baseUrl:o,jwt:i,xVimeoPage:s,locale:l}=(0,u.r)();return(0,c.ZP)((e,t)=>{if(null===r||t&&!t.paging.next)return null;let o=r.query??{},{perPage:i=25,page:a}=o,s=(0,n.Z)(o,p),l=r.select.join(","),c=Object.entries(s??{}).filter(([,e])=>void 0!==e).map(([e,t])=>`${e}=${t}`).join("&");return[`/videos/${r.where.videoId}/translations?page=${e+1}&perPage=${i}&fields=${l}&${c}`,e]},null!==r?([e,t])=>(0,a._i)(O(O({},r),{},{baseUrl:o,headers:O(O({},r.headers),{},{"Content-Type":"application/json",Authorization:i?`jwt ${i}`:"","Vimeo-Page":`${s}`,"Accept-Language":l??"en"}),query:O(O({},r.query),{},{page:t+1})})):null,t)},{endpoint:"/videos/:videoId/translations",method:"GET"}),"true"===d.env.STORYBOOK&&(0,i.MR)(function(){let{baseUrl:e,jwt:t,xVimeoPage:r,locale:n}=(0,u.r)(),[o,l]=(0,i.AC)();return[(0,s.useCallback)(async o=>{l({type:"REQUEST"});try{let i=await (0,a.R7)(O(O({},o),{},{baseUrl:e,headers:O(O({},o.headers),{},{"Content-Type":"application/json",Authorization:t?`jwt ${t}`:"","Vimeo-Page":`${r}`,"Accept-Language":n??"en"})}));l({type:"SUCCESS",payload:i})}catch(e){l({type:"FAILURE",payload:e})}},[e,r,t,n,l]),o]},{endpoint:"/videos/:videoId/translations",method:"POST"}),"true"===d.env.STORYBOOK&&(0,i.MR)(h,{endpoint:"/videos/:videoId/translations",method:"DELETE"})},667376:function(e,t,r){r.d(t,{W3:function(){return w}});var n=r(867932),o=r(502349),i=r(92575),a=r(996240);let s=["baseUrl","select","where"],l=["baseUrl","select","variables","where"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}async function d(e){let{baseUrl:t,select:r,where:{videoId:n,versionId:o}}=e,l=(0,i.Z)(e,s),c=await fetch(`${t}/videos/${n}/versions/${o}/audiotracks?fields=${r.map(a.Rb).join(",")}`,u(u({},l),{},{method:"GET"}));if(!c.ok)throw new a.F7("A network error occurred",c.status,c);if(204===c.status)return null;if(!c.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let d=await c.json();return(0,a.l_)(d)}async function p(e){let{baseUrl:t,select:r,variables:n,where:{videoId:o,versionId:s}}=e,c=(0,i.Z)(e,l),d=await fetch(`${t}/videos/${o}/versions/${s}/audiotracks?fields=${r.map(a.Rb).join(",")}`,u(u({},c),{},{method:"POST",body:JSON.stringify((0,a.mH)(n))}));if(!d.ok)throw new a.F7("A network error occurred",d.status,d);if(204===d.status)return null;if(!d.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let p=await d.json();return(0,a.l_)(p)}var g=r(652983),O=r(296638),f=r(848568),h=r(173656);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w(e,t){let r="function"==typeof e?e():e,{baseUrl:n,jwt:i,xVimeoPage:a,locale:s}=(0,f.r)();return(0,O.ZP)(r?`/videos/${r.where.videoId}/versions/${r.where.versionId}/audiotracks${(0,o.Y$)(r)}`:()=>null,r?()=>d(b(b({},r),{},{headers:b(b({},r.headers),{},{"Content-Type":"application/json",Authorization:i?`jwt ${i}`:"","Vimeo-Page":`${a}`,"Accept-Language":s??"en"}),baseUrl:n})):null,t)}"true"===h.env.STORYBOOK&&(0,o.MR)(w,{endpoint:"/videos/:videoId/versions/:versionId/audiotracks",method:"GET"}),"true"===h.env.STORYBOOK&&(0,o.MR)(function(){let{mutate:e}=(0,O.kY)(),{baseUrl:t,jwt:r,xVimeoPage:n,locale:i}=(0,f.r)(),[a,s]=(0,o.AC)();return[(0,g.useCallback)(async a=>{s({type:"REQUEST"});try{let l=await e(`/videos/${a.where.videoId}/versions/${a.where.versionId}/audiotracks${(0,o.Y$)(a)}`,d(b(b({},a),{},{baseUrl:t,headers:b(b({},a.headers),{},{"Content-Type":"application/json",Authorization:r?`jwt ${r}`:"","Vimeo-Page":`${n}`,"Accept-Language":i??"en"})})));s({type:"SUCCESS",payload:l})}catch(e){s({type:"FAILURE",payload:e})}},[t,n,r,i,s]),a]},{endpoint:"/videos/:videoId/versions/:versionId/audiotracks",method:"GET"}),"true"===h.env.STORYBOOK&&(0,o.MR)(function(){let{mutate:e}=(0,O.kY)(),{baseUrl:t,jwt:r,xVimeoPage:n,locale:i}=(0,f.r)(),[a,s]=(0,o.AC)();return[(0,g.useCallback)(async a=>{s({type:"REQUEST"});try{let l=await e(`/videos/${a.where.videoId}/versions/${a.where.versionId}/audiotracks${(0,o.Y$)(a)}`,p(b(b({},a),{},{baseUrl:t,headers:b(b({},a.headers),{},{"Content-Type":"application/json",Authorization:r?`jwt ${r}`:"","Vimeo-Page":`${n}`,"Accept-Language":i??"en"})})),!1);s({type:"SUCCESS",payload:l})}catch(e){s({type:"FAILURE",payload:e})}},[t,n,r,i,s]),a]},{endpoint:"/videos/:videoId/versions/:versionId/audiotracks",method:"POST"})},371731:function(e,t,r){r.d(t,{X:function(){return i}});var n=r(652983);let o=(e,t,r)=>"linear"===r?e*t:"exponential"===r?Math.pow(2,t)*e+Math.round(Math.random()*e):e,i=(e,t,r)=>{let i=r?.interval||5e3,{0:a,1:s}=(0,n.useState)(0),l=(0,n.useRef)();(0,n.useEffect)(()=>("function"==typeof t&&t(a)||!0===t?l.current=setTimeout(()=>{s(a+1),e()},o(i,a,r?.backoff)):clearTimeout(l.current),()=>clearTimeout(l.current)),[a,t]),(0,n.useEffect)(()=>{r?.shouldResetBackoff&&r.shouldResetBackoff(a)&&s(0)},[r,a])}},92332:function(e,t,r){r.d(t,{S:function(){return n}});let n=e=>{let t=document.createElement("a");t.href=e,t.click()}}}]);
//# sourceMappingURL=61062-1a1b585b84dae735.js.map