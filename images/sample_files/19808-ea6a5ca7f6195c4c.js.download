"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19808],{665967:function(e,t,r){r.d(t,{W:function(){return eb}});var n=r(439136),o=r(767269),i=r(662555),a=r(652983),s=r(173898),l=r(824588),c=r(612756),u=r(751004),p=r(873394),d=r(172965),f=r(220381),h=r(913807);let g=(e,t)=>t?null:{query:{excludePrivateToMeFolder:!0,perPage:20,topLevelOnly:!0,permissionAction:"folder.view"},select:["isPrivateToUser","metadata.connections.ancestorPath","metadata.connections.folders.total","metadata.connections.folders.uri","privacy","name","uri"],where:{userId:e}},m=(e,t)=>t?{query:{filter:"folder",perPage:20,query:t,queryFields:"title"},select:["folder.isPrivateToUser","folder.metadata.connections.ancestorPath","folder.metadata.connections.folders.total","folder.metadata.interactions.invite.uri","folder.privacy","folder.name","folder.uri"],where:{userId:e}}:null,y=(e,t)=>{if(!e||!t)return null;let r=t.uri.split("/");return{where:{userId:parseInt(r[2]),projectId:parseInt(r[4])},query:{filter:"folder"},select:["folder.isPrivateToUser","folder.metadata.connections.folders.total","folder.metadata.connections.ancestorPath","folder.privacy","folder.name","folder.uri"]}};var j=r(524777),w=r(990748),O=r(443383),b=r(394580),P=r(474766),v=r(292154),S=r(771504),E=r(829278),C=r(867932),_=r(151057),x=r(848568),$=r(246347);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach(function(t){(0,C.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let T={Complete:0,Error:1,Success:2,Requested:3,Reset:4},k=e=>({type:T.Error,payload:{error:e}}),A=e=>({type:T.Complete,payload:{projectItems:e}}),D=(e,t,r)=>({type:T.Success,payload:{projectItems:e,nextPage:t,totalPages:r}}),U=()=>({type:T.Requested}),z=()=>({type:T.Reset}),F={pending:!1,loading:!0,complete:!1,projectItems:[],currentPage:1,totalPages:1,error:void 0},L=(e,t)=>{switch(t.type){case T.Complete:return R(R({},e),{},{projectItems:e.projectItems.concat(t.payload.projectItems),complete:!0,loading:!1,pending:!1});case T.Success:return R(R({},e),{},{projectItems:e.projectItems.concat(t.payload.projectItems),totalPages:t.payload.totalPages,currentPage:t.payload.nextPage,pending:!1});case T.Error:return R(R({},e),{},{error:t.payload.error,complete:!0,loading:!1,pending:!1});case T.Requested:return R(R({},e),{},{pending:!0});case T.Reset:return F;default:return e}},N=e=>{let t="function"==typeof e?e():e,{baseUrl:r,xVimeoPage:n,jwt:o,locale:i}=(0,x.r)(),s=(0,$.D)(t?.where.userId),{0:l,1:c}=(0,a.useReducer)(L,F),u=(0,a.useRef)();return(0,a.useEffect)(()=>{s!==t?.where.userId&&(u.current&&(u.current.abort(),u.current=void 0),c(z()))},[s,t?.where.userId]),{getProjectItems:(0,a.useCallback)(async()=>{let e=[];u.current=new AbortController;for(let a=l.currentPage;a<=l.currentPage+3&&!(a>l.totalPages);a++)if(t){let s=(0,_.Hc)(R(R({},t),{},{baseUrl:r,query:R(R({},t.query),{},{page:a,perPage:100}),headers:R(R({},t.headers),{},{"Content-Type":"application/json",Authorization:o?`jwt ${o}`:"","Vimeo-Page":`${n}`,"Accept-Language":i??"en"}),signal:u.current?.signal}));e.push(s)}try{c(U());let t=(await Promise.all(e)).reduce((e,t)=>({totalPages:Math.ceil(t.total/100),projectItems:e.projectItems.concat(t.data),lastPage:t.page>e.lastPage?t.page:e.lastPage}),{totalPages:1,projectItems:[],lastPage:1}),r=t.lastPage===t.totalPages?A(t.projectItems):D(t.projectItems,t.lastPage+1,t.totalPages);c(r)}catch(e){if("AbortError"===e.name)return;c(k(e instanceof Error?e:Error("Something went wrong.")))}},[r,o,i,t,l.currentPage,l.totalPages,n]),state:l}},Z=s.default.span.withConfig({componentId:"sc-6rs1or-0"})(["margin-right:",";display:flex;align-items:center;"],(0,j.rem)(10));var q=r(611002),J=r(76048),H=r(397458);let M=({isPrivateToUser:e})=>e?(0,H.jsx)(q.H,{boxSize:"xs"}):(0,H.jsx)(J.g,{boxSize:"xs"});var B=r(147054);let V=()=>(0,H.jsx)(Y,{children:(0,H.jsx)(B.$,{})}),Y=s.default.div.withConfig({componentId:"sc-19q3a6g-0"})(["height:100%;width:100%;display:flex;justify-content:center;align-items:center;"]),K=({folder:e,onSelect:t,onUnselect:r,selectedFoldersTree:n,isIncluded:i})=>{let{0:s,1:l}=(0,a.useState)((0,O.Sj)(n,e)),c=!!e.metadata?.connections?.folders?.total,{getProjectItems:u,state:{projectItems:p,loading:d,complete:f}}=N(()=>y(c,e)),h=p?p.map(e=>e.folder):[],g=i||(0,O.nx)(n,e),m=(e,t)=>{let n=g?h.filter(t=>0===(0,O.sX)(e).filter(e=>e.uri===t.uri).length):[];r(e,[...t,...n])};return(0,H.jsxs)("div",{children:[(0,H.jsxs)(b.k,{alignItems:"center",height:(0,o.h)(45),pb:(0,o.h)(8),overflow:"hidden",children:[(0,H.jsx)(P.X,{isChecked:g,onChange:()=>{g?r(e,[]):t(e)},pl:(0,o.h)(8)}),(0,H.jsxs)(Z,{onClick:()=>{c&&(l(!s),s||f||u())},children:[c?s?(0,H.jsx)(S.W,{}):(0,H.jsx)(E.Z,{}):(0,H.jsx)(Q,{}),(0,H.jsx)(M,{isPrivateToUser:!!e.isPrivateToUser})]}),(0,H.jsx)(v.n,{size:"md",margin:"0",pl:(0,o.h)(4),children:e.name})]}),s&&(d?(0,H.jsx)(V,{}):(0,H.jsx)(G,{children:h.map(e=>(0,H.jsx)(K,{folder:e,onSelect:t,onUnselect:m,isIncluded:g,selectedFoldersTree:n},e.uri))}))]})},G=s.default.ul.withConfig({componentId:"sc-1tabh27-0"})(["padding-left:",";"],(0,o.h)(5)),Q=s.default.svg.withConfig({componentId:"sc-1tabh27-1"})(["width:",";"],(0,o.h)(24));var W=r(602156),X=r(359969);let ee=()=>(0,H.jsxs)(W.g,{justifyContent:"center",alignItems:"center",height:"100%",color:"text-tertiary",children:[(0,H.jsx)(Z,{children:(0,H.jsx)(X.N,{boxSize:"lg"})}),(0,H.jsx)(v.n,{size:"sm",margin:(0,o.h)(1),overflow:"hidden",textOverflow:"ellipsis",children:(0,i.Iu)({singular:"Sorry, no results found.",dictionary:{es:{singular:"Lo sentimos, no se encontraron resultados."},"de-DE":{singular:"Leider keine Ergebnisse gefunden."},"fr-FR":{singular:"D\xe9sol\xe9s, aucun r\xe9sultat."},"ja-JP":{singular:"申し訳ありません。検索結果がありません。"},"ko-KR":{singular:"죄송합니다, 검색 결과가 없습니다."},"pt-BR":{singular:"Desculpe, mas n\xe3o encontramos nenhum resultado."},"zh-CN":{singular:"抱歉，未找到结果。"}}})})]}),et=({isLoading:e,folders:t=[],handleLoadMore:r,selectedFoldersTree:n,setSelectedFoldersTree:o})=>{let[i]=(0,w.m)(t,()=>null,()=>null,()=>r()),a=e=>{o((0,O.au)(n,e))},s=(e,t)=>{o((0,O.zl)(n,e,t))};return(0,H.jsxs)(er,{ref:i,children:[!!t.length&&(0,H.jsx)(H.Fragment,{children:t.map(e=>(0,H.jsx)(K,{folder:e,onSelect:a,onUnselect:s,selectedFoldersTree:n,isIncluded:!1},e.uri))}),e&&(0,H.jsx)(V,{}),!e&&!t.length&&(0,H.jsx)(ee,{})]})},er=s.default.div.withConfig({componentId:"eunegr-0"})(["height:",";overflow-y:scroll;"],(0,j.rem)(200)),en=({header:e,ownerId:t,searchPlaceHolderText:r,selectedFoldersTree:s,setSelectedFoldersTree:y,permissionPicker:j})=>{let{0:w,1:O}=(0,a.useState)(),b=(0,h.c)(w,400),{data:P,isValidating:v,size:S,setSize:E,error:C}=(0,d.rT)(()=>g(t,b),{revalidateOnFocus:!1}),{data:_,isValidating:x,size:$,setSize:I,error:R}=(0,p.fw)(()=>m(t,b),{revalidateOnFocus:!1}),T=[];return _&&(T=_.flatMap(e=>e.data).map(e=>e.folder).filter(e=>e&&e.metadata?.interactions?.invite)),P&&(T=P.flatMap(e=>e.data).filter(e=>null!==e)),(0,H.jsx)(f.Oj,{id:"folder-tour",steps:2,automated:!0,children:(0,H.jsxs)(eo,{children:[e??(0,H.jsx)(l.h,{as:"h6",size:"xs",marginBottom:"10",children:(0,i.Iu)({singular:"Select folders",dictionary:{es:{singular:"Seleccionar carpetas"},"de-DE":{singular:"Ordner ausw\xe4hlen"},"fr-FR":{singular:"S\xe9lectionner des dossiers"},"ja-JP":{singular:"フォルダーを選択"},"ko-KR":{singular:"폴더 선택"},"pt-BR":{singular:"Selecionar pastas"},"zh-CN":{singular:"选择文件夹"}}})}),(0,H.jsxs)(n.U,{mb:(0,o.h)(8),paddingLeft:(0,o.h)(2),children:[(0,H.jsx)(c.o,{flex:"1",onChange:e=>O(e.currentTarget.value),placeholder:r??(0,i.Iu)({singular:"Search folders",dictionary:{es:{singular:"Buscar en carpetas"},"de-DE":{singular:"Ordner durchsuchen"},"fr-FR":{singular:"Recherche dans les dossiers"},"ja-JP":{singular:"検索フォルダー"},"ko-KR":{singular:"폴더 검색"},"pt-BR":{singular:"Pesquisar Pastas"},"zh-CN":{singular:"搜索文件夹"}}}),variant:"minimal","data-lpignore":"true"}),(0,H.jsx)(u.xu,{px:(0,o.h)(4),children:j})]}),C||R?(0,H.jsx)(ei,{children:(0,i.Iu)({singular:"Oops! Something went wrong!",dictionary:{es:{singular:"\xa1Ups, algo sali\xf3 mal!"},"de-DE":{singular:"Hoppla, hier ist was schief gegangen!"},"fr-FR":{singular:"Oups\xa0! Quelque chose a plant\xe9\xa0!"},"ja-JP":{singular:"エラーが発生しました！"},"ko-KR":{singular:"죄송합니다. 문제가 발생했습니다."},"pt-BR":{singular:"Opa! Alguma coisa deu errado!"},"zh-CN":{singular:"哎呀！出错了！"}}})}):(0,H.jsx)(et,{isLoading:v||x,folders:T,selectedFoldersTree:s,setSelectedFoldersTree:y,handleLoadMore:()=>{if(b){if(!x){let e=_?.[_.length-1];e?.paging.next&&I($+1)}}else if(!v){let e=P?.[P.length-1];e?.paging.next&&E(S+1)}}})]})})},eo=s.default.div.withConfig({componentId:"sc-1f2y3ze-0"})(["overflow:auto;margin:1.5rem 0 0.5rem 0;"]),ei=s.default.div.withConfig({componentId:"sc-1f2y3ze-1"})(["display:flex;height:",";justify-content:center;align-items:center;"],(0,o.h)(200));var ea=r(929871),es=r(696146),el=r(657699),ec=r(731500),eu=r(63750),ep=r(410281),ed=r(778729);let ef={"Folder Editor":"Can edit","Folder Viewer":"Can view","Folder Admin":"Can manage","Clip Editor":"Can edit","Clip Viewer":"Can view","Clip Admin":"Can manage","Album Editor":"Can edit","Album Viewer":"Can view","Album Admin":"Can manage","Album Creator":"Can manage","Clip Commenter":"Can comment","Folder Commenter":"Can comment"},eh=({permissionPolicies:e,selectedPermissionPolicy:t,teamUsers:r,setSelectedPermissionPolicy:n})=>{let i=(0,ep.R)(),{0:s,1:l}=(0,a.useState)(!1),c=(0,a.useRef)(null),p=(0,a.useRef)(null);(0,ea.O)({ref:p,handler:()=>l(!1)});let d=e=>{let{oldPermission:n,newPermission:o}={oldPermission:t?.name?ef[t.name]:null,newPermission:e?.name?ef[e.name]:null};(0,ed.HW)({viewer:i,teamUsers:r,oldPermission:n,newPermission:o})},f=(0,H.jsx)("div",{"data-id":"rolesMenuContent",ref:p,children:e.map((e,r)=>(0,H.jsxs)(ey,{"data-id":"rolesMenuOption",onClick:()=>{l(!1),n(e),d(e)},children:[(0,H.jsx)(ew,{children:t?.uri==e.uri&&(0,H.jsx)(eu.M,{color:"blue.500"})}),(0,H.jsxs)(ej,{children:[(0,H.jsx)(v.n,{size:"md",children:e.displayName}),(0,H.jsx)(u.xu,{color:"slate.500",children:e.displayDescription})]})]},`${r}-${e.uri}`))});return(0,H.jsx)(eg,{children:(0,H.jsxs)(es.J,{isOpen:s,placement:"bottom",onClose:()=>l(!1),children:[(0,H.jsx)(el.x,{children:(0,H.jsx)(eO,{children:(0,H.jsxs)(em,{"data-id":"rolesMenuButton",onClick:e=>{e.stopPropagation(),l(!s)},ref:c,children:[(0,H.jsx)(v.n,{size:"md",mb:"0",fontWeight:"700",whiteSpace:"nowrap",children:t?.displayName}),(0,H.jsx)(S.W,{width:(0,o.h)(24)})]})})}),(0,H.jsx)(ec.y,{p:"0",mt:"0",children:f})]})})},eg=s.default.div.withConfig({componentId:"sc-13jz7s-0"})(["align-items:center;justify-content:space-between;display:flex;"]),em=s.default.div.withConfig({componentId:"sc-13jz7s-1"})(["display:flex;padding:"," 0 "," ",";justify-content:flex-end;border-radius:",";font-weight:400;line-height:",";font-size:",";&:hover,&:active{cursor:pointer;}align-items:center;right:",";top:0;height:",";"],(0,o.h)(2),(0,o.h)(2),(0,o.h)(10),(0,o.h)(6),(0,o.h)(13),(0,o.h)(13),(0,o.h)(15),(0,o.h)(36)),ey=s.default.div.withConfig({componentId:"sc-13jz7s-2"})(["padding:"," ",";display:flex;border-radius:",";&:hover,&:active{cursor:pointer;background-color:var(--vimeo-colors-background-blur);}&:first-of-type{padding-bottom:",";}&:last-of-type{padding-top:",";}"],(0,o.h)(20),(0,o.h)(20),(0,o.h)(2),(0,o.h)(15),(0,o.h)(15)),ej=s.default.div.withConfig({componentId:"sc-13jz7s-3"})(["margin-bottom:0;font-size:",";display:flex;flex-direction:column;p{font-weight:700;}"],(0,o.h)(13)),ew=s.default.div.withConfig({componentId:"sc-13jz7s-4"})(["min-width:",";svg{width:",";margin:auto;margin-right:",";margin-top:",";}"],(0,o.h)(35),(0,o.h)(25),(0,o.h)(10),(0,o.h)(10)),eO=s.default.div.withConfig({componentId:"sc-13jz7s-5"})(["position:relative;width:100%;flex:1;"]),eb=({error:e,header:t,ownerId:r,searchPlaceHolderText:a,selectedFoldersTree:s,setSelectedFoldersTree:l,selectedPermissionPolicy:c,setSelectedPermissionPolicy:u,applicableFolderPolicies:p,teamUsers:d})=>(0,H.jsx)(H.Fragment,{children:e?(0,H.jsx)(n.U,{height:(0,o.h)(270),children:(0,i.Iu)({singular:"Oops! Something went wrong!",dictionary:{es:{singular:"\xa1Ups, algo sali\xf3 mal!"},"de-DE":{singular:"Hoppla, hier ist was schief gegangen!"},"fr-FR":{singular:"Oups\xa0! Quelque chose a plant\xe9\xa0!"},"ja-JP":{singular:"エラーが発生しました！"},"ko-KR":{singular:"죄송합니다. 문제가 발생했습니다."},"pt-BR":{singular:"Opa! Alguma coisa deu errado!"},"zh-CN":{singular:"哎呀！出错了！"}}})}):(0,H.jsx)(en,{ownerId:r,header:t,searchPlaceHolderText:a,selectedFoldersTree:s,setSelectedFoldersTree:l,permissionPicker:(0,H.jsx)(eh,{selectedPermissionPolicy:c,setSelectedPermissionPolicy:u,permissionPolicies:p,teamUsers:d})})})},262683:function(e,t,r){r.d(t,{N:function(){return O}});var n=r(867932),o=r(652983),i=r(92575),a=r(996240);let s=["baseUrl","variables","where"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}async function u(e){let{baseUrl:t,variables:r,where:{userId:n,teamUserId:o}}=e,l=(0,i.Z)(e,s),u=await fetch(`${t}/users/${n}/team_users/${o}/resource_permissions`,c(c({},l),{},{method:"PUT",body:JSON.stringify((0,a.mH)(r))}));if(!u.ok)throw new a.F7("A network error occurred",u.status,u);if(204===u.status)return null;if(!u.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let p=await u.json();return(0,a.l_)(p)}var p=r(848568);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let h={Complete:0,Error:1,Requested:3},g=e=>({type:h.Error,payload:{error:e}}),m=()=>({type:h.Complete}),y=()=>({type:h.Requested}),j={loading:!1,complete:!1,error:void 0},w=(e,t)=>{switch(t.type){case h.Complete:return f(f({},e),{},{complete:!0,loading:!1});case h.Error:return f(f({},e),{},{error:t.payload.error,complete:!0,loading:!1});case h.Requested:return f(f({},j),{},{loading:!0});default:return e}},O=()=>{let{baseUrl:e,xVimeoPage:t,jwt:r,locale:n}=(0,p.r)(),{0:i,1:a}=(0,o.useReducer)(w,j);return[(0,o.useCallback)(async(o,i,s,l)=>{let c=Array(Math.ceil(i.length/20)).fill(0).map((e,t)=>i.slice(20*t,20*t+20)),p=[];c.forEach(i=>{let a={permissions:i.map(e=>({resourceUri:e,permissionPolicyUri:l}))};o.forEach(o=>{let i=o.uri.split("/"),l=u({baseUrl:e,where:{userId:s,teamUserId:parseInt(i[i.length-1])},variables:a,headers:{"Content-Type":"application/json",Authorization:r?`jwt ${r}`:"","Vimeo-Page":`${t}`,"Accept-Language":n??"en"}});p.push(l)})});try{a(y()),await Promise.all(p),a(m())}catch(e){a(g(e.message))}},[e,t,r,n,a]),i]}},778729:function(e,t,r){r.d(t,{HW:function(){return b},eV:function(){return y},oQ:function(){return O}});var n=r(867932),o=r(397687),i=r.n(o),a=r(900409),s=r(902213),l=r(923801),c=r(126371),u=r(560583),p=r(467426),d=r(411594),f=r(185822);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let m={admin:"admin",contributor:"contributor",contributor_plus:"contributor_plus",viewer:"viewer",uploader:"uploader"},y=(e,t,r,n,o,i)=>{e.forEach(e=>{let a=e.uri.split("/"),s=parseInt(a[a.length-1]),l=e.permissionLevel.toLowerCase().replace(/ /g,"_"),c=r.length,u=c>0?r.map(e=>e.match(/(\d+)(?!.*\d)/)[0]).join(","):null,p=e.user?.uri.split("/").pop(),d=p?parseInt(p):null;if(m[l]||null===l){let r=j(o);i({eventName:"vimeo.distribute_content",distributionActionFields:{number_of_items:c,sharee_id:d,sharee_team_permission:l,sharee_entity_permission:r,is_send_email_notification:!0},contextOverrides:{product:{flow:"share_folder",copy:"Share"},folder:{folder_id:u?u.split(",").at(0):0,access_permission_to_folder:r}}})||w(l,s,t,c,u,n,r,e.email,d)}})},j=e=>{switch(e){case"Folder Viewer":return"can_view";case"Folder Editor":return"can_edit";case"Folder Admin":return"can_manage";default:return null}},w=(e,t,r,n,o,i,s,l=null,c=null)=>{try{let u=new a.Event("add_team_member_to_folder",14,{product:"Collaboration",path:window.parent.location.pathname,location:i?.location||"bulk_share_modal",folder_id:o,role:e,team_id:r,team_member_id:t,is_subfolder:null,entry_point:i?.entryPoint??null,number_of_folders:n,permission:s,sharee_email:l,sharee_id:c});a.BigPictureClient.sendEvent(u)}catch(e){console.error(e)}},O=e=>{let t={page:e?.page||"team_management",name:e?.cancelEventName||"click_cancel_inviting_to_folders",location:e?.location||"invite_modal",feature:e?.feature||"team_management",path:window.parent.location.pathname,type:"general",copy:null,target:null,target_path:null,click_type:null,device_type:null,third_party_integration:null},r=g({},(0,l.Yr)(e?.teamUser));try{(0,c.Ou)("vimeo.click",r,106,t)}catch(e){console.error(e)}},b=({viewer:e,teamUsers:t=null,oldPermission:r=null,newPermission:n=null})=>{let o=e?.teamUser?(0,l.Yr)(e?.teamUser):(0,l._X)(e?.team),a=t?.[0],h=parseInt(a?.user?.uri?.split("/").filter(Boolean).pop()||"0",10)||null,m=a?.permissionLevel?.toLowerCase()||null;try{(0,c.Ou)("vimeo.change_permission",g(g(g(g(g({},(0,u.g9)({page_name:"team_management_page"})),(0,p.kD)({action_type:"click",feature:null})),o),(0,d.FI)({device_type:(0,s.Z)(),is_user_facing_data:!1,flow:null,copy:n,scrolling_percentage:null,product:"collaboration",cta_location_id:null,feature:"access",location:"modal",modal_name:"share_entity_modal",element:"dropdown",entity_type:"folder"})),(0,f.lg)({is_integration:!1,integration_id:null,integration_name:null,managed_user_id:null,is_partner:null})),2,{old_resource_permission:r?i()(r.toLowerCase()):null,new_resource_permission:n?i()(n.toLowerCase()):null,is_send_email_notification:!1,target_user_id:h,member_team_role:m?i()(m):null})}catch(e){console.error(e)}}},37831:function(e,t,r){r.d(t,{W:function(){return n}});let n=e=>e.sort((e,t)=>e.permissionLevel<t.permissionLevel?1:-1).reduce((e,t,r)=>{if("Admin"===t.permissionLevel)return e;let n=t.applicablePermissionPolicies.folder;if(0===r)return n;let o=e.reduce((e,t)=>(e[t.uri]=1,e),{});return n.filter(e=>o[e.uri])},[])},443383:function(e,t,r){r.d(t,{Sj:function(){return s},au:function(){return c},em:function(){return o},nx:function(){return a},sX:function(){return n},zl:function(){return u}});let n=e=>{let t=e.metadata?.connections?.ancestorPath;return t?[{uri:e.uri},...t]:[{uri:e.uri}]},o=e=>{let t=[],r=[e];for(;r.length;){let e=r.pop();for(let n in e.children)e.children[n].isSelected?t.push(n):r.push(e.children[n])}return t},i=(e,t)=>{let r=n(t),o=r.pop(),i=e;for(;o;){if(!i.children[o.uri])return null;i=i.children[o.uri],o=r.pop()}return i},a=(e,t)=>{let r=i(e,t);return!!r?.isSelected},s=(e,t)=>{let r=i(e,t);return null!==r&&!r.isSelected},l=(e,t)=>{let r=n(t),o=r.pop(),i=e;for(;o&&i.children[o.uri];){if(i.children[o.uri].isSelected){delete i.children[o.uri];break}i=i.children[o.uri],o=r.pop()}return e},c=(e,t,r=!1)=>{let o=r?e:JSON.parse(JSON.stringify(e)),i=n(t),a=i.pop(),s=o;for(;a;)s.children[a.uri]||(s.children[a.uri]={isSelected:!1,children:{}}),s=s.children[a.uri],a=i.pop();return s.isSelected=!0,s.children={},o},u=(e,t,r)=>{let n=l(JSON.parse(JSON.stringify(e)),t);for(let e of r)n=c(n,e,!0);return n}},151057:function(e,t,r){r.d(t,{Hc:function(){return p},uL:function(){return f},xC:function(){return d}});var n=r(867932),o=r(92575),i=r(996240);let a=["baseUrl","select","where","query"],s=["baseUrl","variables","where"],l=["baseUrl","where","query"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}async function p(e){let{baseUrl:t,select:r,where:{userId:n,projectId:s},query:l}=e,c=(0,o.Z)(e,a),p=await fetch(`${t}/users/${n}/projects/${s}/items?${(0,i.Ov)(l)}&fields=${r.map(i.Rb).join(",")}`,u(u({},c),{},{method:"GET"}));if(!p.ok)throw new i.F7("A network error occurred",p.status,p);if(204===p.status)return null;if(!p.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let d=await p.json();return(0,i.l_)(d)}async function d(e){let{baseUrl:t,variables:r,where:{userId:n,projectId:a}}=e,l=(0,o.Z)(e,s),c=await fetch(`${t}/users/${n}/projects/${a}/items`,u(u({},l),{},{method:"POST",body:JSON.stringify((0,i.mH)(r))}));if(!c.ok)throw new i.F7("A network error occurred",c.status,c);if(204===c.status)return null;if(!c.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let p=await c.json();return(0,i.l_)(p)}async function f(e){let{baseUrl:t,where:{userId:r,projectId:n},query:a}=e,s=(0,o.Z)(e,l),c=await fetch(`${t}/users/${r}/projects/${n}/items?${(0,i.Ov)(a)}`,u(u({},s),{},{method:"DELETE"}));if(!c.ok)throw new i.F7("A network error occurred",c.status,c);if(204===c.status)return null;if(!c.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let p=await c.json();return(0,i.l_)(p)}},502526:function(e,t,r){r.d(t,{ZD:function(){return p},oj:function(){return f},zS:function(){return d}});var n=r(867932),o=r(92575),i=r(996240);let a=["baseUrl","select","where","query"],s=["baseUrl","select","variables","where"],l=["baseUrl","variables","where"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}async function p(e){let{baseUrl:t,select:r,where:{userId:n},query:s}=e,l=(0,o.Z)(e,a),c=await fetch(`${t}/users/${n}/projects?${(0,i.Ov)(s)}&fields=${r.map(i.Rb).join(",")}`,u(u({},l),{},{method:"GET"}));if(!c.ok)throw new i.F7("A network error occurred",c.status,c);if(204===c.status)return null;if(!c.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let p=await c.json();return(0,i.l_)(p)}async function d(e){let{baseUrl:t,select:r,variables:n,where:{userId:a}}=e,l=(0,o.Z)(e,s),c=await fetch(`${t}/users/${a}/projects?fields=${r.map(i.Rb).join(",")}`,u(u({},l),{},{method:"POST",body:JSON.stringify((0,i.mH)(n))}));if(!c.ok)throw new i.F7("A network error occurred",c.status,c);if(204===c.status)return null;if(!c.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let p=await c.json();return(0,i.l_)(p)}async function f(e){let{baseUrl:t,variables:r,where:{userId:n}}=e,a=(0,o.Z)(e,l),s=await fetch(`${t}/users/${n}/projects`,u(u({},a),{},{method:"PATCH",body:JSON.stringify((0,i.mH)(r))}));if(!s.ok)throw new i.F7("A network error occurred",s.status,s);if(204===s.status)return null;if(!s.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let c=await s.json();return(0,i.l_)(c)}},873394:function(e,t,r){r.d(t,{pJ:function(){return b},fw:function(){return v},Ab:function(){return P},du:function(){return S}});var n=r(92575),o=r(867932),i=r(502349),a=r(996240);let s=["baseUrl","select","where","query"],l=["baseUrl","variables","where","query"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}async function p(e){let{baseUrl:t,select:r,where:{userId:o},query:i}=e,l=(0,n.Z)(e,s),c=await fetch(`${t}/users/${o}/items?${(0,a.Ov)(i)}&fields=${r.map(a.Rb).join(",")}`,u(u({},l),{},{method:"GET"}));if(!c.ok)throw new a.F7("A network error occurred",c.status,c);if(204===c.status)return null;if(!c.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let p=await c.json();return(0,a.l_)(p)}async function d(e){let{baseUrl:t,variables:r,where:{userId:o},query:i}=e,s=(0,n.Z)(e,l),c=await fetch(`${t}/users/${o}/items?${(0,a.Ov)(i)}`,u(u({},s),{},{method:"PATCH",body:JSON.stringify((0,a.mH)(r))}));if(!c.ok)throw new a.F7("A network error occurred",c.status,c);if(204===c.status)return null;if(!c.headers.get("content-type")?.match(/^application\/(.+)?json$/))throw Error("Expected JSON response");let p=await c.json();return(0,a.l_)(p)}var f=r(652983),h=r(296638),g=r(512959),m=r(848568),y=r(173656);let j=["perPage","page"];function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function b(e,t){let r="function"==typeof e?e():e,{baseUrl:n,jwt:o,xVimeoPage:a,locale:s}=(0,m.r)();return(0,h.ZP)(r?`/users/${r.where.userId}/items${(0,i.Y$)(r)}`:()=>null,r?()=>p(O(O({},r),{},{headers:O(O({},r.headers),{},{"Content-Type":"application/json",Authorization:o?`jwt ${o}`:"","Vimeo-Page":`${a}`,"Accept-Language":s??"en"}),baseUrl:n})):null,t)}function P(){let{mutate:e}=(0,h.kY)(),{baseUrl:t,jwt:r,xVimeoPage:n,locale:o}=(0,m.r)(),[a,s]=(0,i.AC)();return[(0,f.useCallback)(async a=>{s({type:"REQUEST"});try{let l=await e(`/users/${a.where.userId}/items${(0,i.Y$)(a)}`,p(O(O({},a),{},{baseUrl:t,headers:O(O({},a.headers),{},{"Content-Type":"application/json",Authorization:r?`jwt ${r}`:"","Vimeo-Page":`${n}`,"Accept-Language":o??"en"})})));s({type:"SUCCESS",payload:l})}catch(e){s({type:"FAILURE",payload:e})}},[t,n,r,o,s]),a]}function v(e,t){let r="function"==typeof e?e():e,{baseUrl:o,jwt:i,xVimeoPage:a,locale:s}=(0,m.r)();return(0,g.ZP)((e,t)=>{if(null===r||t&&!t.paging.next)return null;let o=r.query??{},{perPage:i=25,page:a}=o,s=(0,n.Z)(o,j),l=r.select.join(","),c=Object.entries(s??{}).filter(([,e])=>void 0!==e).map(([e,t])=>`${e}=${t}`).join("&");return[`/users/${r.where.userId}/items?page=${e+1}&perPage=${i}&fields=${l}&${c}`,e]},null!==r?([e,t])=>p(O(O({},r),{},{baseUrl:o,headers:O(O({},r.headers),{},{"Content-Type":"application/json",Authorization:i?`jwt ${i}`:"","Vimeo-Page":`${a}`,"Accept-Language":s??"en"}),query:O(O({},r.query),{},{page:t+1})})):null,t)}function S(){let{baseUrl:e,jwt:t,xVimeoPage:r,locale:n}=(0,m.r)(),[o,a]=(0,i.AC)();return[(0,f.useCallback)(async o=>{a({type:"REQUEST"});try{let i=await d(O(O({},o),{},{baseUrl:e,headers:O(O({},o.headers),{},{"Content-Type":"application/json",Authorization:t?`jwt ${t}`:"","Vimeo-Page":`${r}`,"Accept-Language":n??"en"})}));a({type:"SUCCESS",payload:i})}catch(e){a({type:"FAILURE",payload:e})}},[e,r,t,n,a]),o]}"true"===y.env.STORYBOOK&&(0,i.MR)(b,{endpoint:"/users/:userId/items",method:"GET"}),"true"===y.env.STORYBOOK&&(0,i.MR)(P,{endpoint:"/users/:userId/items",method:"GET"}),"true"===y.env.STORYBOOK&&(0,i.MR)(v,{endpoint:"/users/:userId/items",method:"GET"}),"true"===y.env.STORYBOOK&&(0,i.MR)(S,{endpoint:"/users/:userId/items",method:"PATCH"})},172965:function(e,t,r){r.d(t,{Ys:function(){return j},ir:function(){return w},rT:function(){return y},th:function(){return m},zI:function(){return g}});var n=r(92575),o=r(867932),i=r(502349),a=r(502526),s=r(652983),l=r(296638),c=r(512959),u=r(848568),p=r(173656);let d=["perPage","page"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function g(e,t){let r="function"==typeof e?e():e,{baseUrl:n,jwt:o,xVimeoPage:s,locale:c}=(0,u.r)();return(0,l.ZP)(r?`/users/${r.where.userId}/projects${(0,i.Y$)(r)}`:()=>null,r?()=>(0,a.ZD)(h(h({},r),{},{headers:h(h({},r.headers),{},{"Content-Type":"application/json",Authorization:o?`jwt ${o}`:"","Vimeo-Page":`${s}`,"Accept-Language":c??"en"}),baseUrl:n})):null,t)}function m(){let{mutate:e}=(0,l.kY)(),{baseUrl:t,jwt:r,xVimeoPage:n,locale:o}=(0,u.r)(),[c,p]=(0,i.AC)();return[(0,s.useCallback)(async s=>{p({type:"REQUEST"});try{let l=await e(`/users/${s.where.userId}/projects${(0,i.Y$)(s)}`,(0,a.ZD)(h(h({},s),{},{baseUrl:t,headers:h(h({},s.headers),{},{"Content-Type":"application/json",Authorization:r?`jwt ${r}`:"","Vimeo-Page":`${n}`,"Accept-Language":o??"en"})})));p({type:"SUCCESS",payload:l})}catch(e){p({type:"FAILURE",payload:e})}},[t,n,r,o,p]),c]}function y(e,t){let r="function"==typeof e?e():e,{baseUrl:o,jwt:i,xVimeoPage:s,locale:l}=(0,u.r)();return(0,c.ZP)((e,t)=>{if(null===r||t&&!t.paging.next)return null;let o=r.query??{},{perPage:i=25,page:a}=o,s=(0,n.Z)(o,d),l=r.select.join(","),c=Object.entries(s??{}).filter(([,e])=>void 0!==e).map(([e,t])=>`${e}=${t}`).join("&");return[`/users/${r.where.userId}/projects?page=${e+1}&perPage=${i}&fields=${l}&${c}`,e]},null!==r?([e,t])=>(0,a.ZD)(h(h({},r),{},{baseUrl:o,headers:h(h({},r.headers),{},{"Content-Type":"application/json",Authorization:i?`jwt ${i}`:"","Vimeo-Page":`${s}`,"Accept-Language":l??"en"}),query:h(h({},r.query),{},{page:t+1})})):null,t)}function j(){let{baseUrl:e,jwt:t,xVimeoPage:r,locale:n}=(0,u.r)(),[o,l]=(0,i.AC)();return[(0,s.useCallback)(async o=>{l({type:"REQUEST"});try{let i=await (0,a.zS)(h(h({},o),{},{baseUrl:e,headers:h(h({},o.headers),{},{"Content-Type":"application/json",Authorization:t?`jwt ${t}`:"","Vimeo-Page":`${r}`,"Accept-Language":n??"en"})}));l({type:"SUCCESS",payload:i})}catch(e){l({type:"FAILURE",payload:e})}},[e,r,t,n,l]),o]}function w(){let{baseUrl:e,jwt:t,xVimeoPage:r,locale:n}=(0,u.r)(),[o,l]=(0,i.AC)();return[(0,s.useCallback)(async o=>{l({type:"REQUEST"});try{let i=await (0,a.oj)(h(h({},o),{},{baseUrl:e,headers:h(h({},o.headers),{},{"Content-Type":"application/json",Authorization:t?`jwt ${t}`:"","Vimeo-Page":`${r}`,"Accept-Language":n??"en"})}));l({type:"SUCCESS",payload:i})}catch(e){l({type:"FAILURE",payload:e})}},[e,r,t,n,l]),o]}"true"===p.env.STORYBOOK&&(0,i.MR)(g,{endpoint:"/users/:userId/projects",method:"GET"}),"true"===p.env.STORYBOOK&&(0,i.MR)(m,{endpoint:"/users/:userId/projects",method:"GET"}),"true"===p.env.STORYBOOK&&(0,i.MR)(y,{endpoint:"/users/:userId/projects",method:"GET"}),"true"===p.env.STORYBOOK&&(0,i.MR)(j,{endpoint:"/users/:userId/projects",method:"POST"}),"true"===p.env.STORYBOOK&&(0,i.MR)(w,{endpoint:"/users/:userId/projects",method:"PATCH"})},913807:function(e,t,r){r.d(t,{c:function(){return o}});var n=r(652983);function o(e,t){let{0:r,1:o}=(0,n.useState)(e);return(0,n.useEffect)(()=>{let r=setTimeout(()=>{o(e)},t);return()=>{clearTimeout(r)}},[t,e]),r}},246347:function(e,t,r){r.d(t,{D:function(){return o}});var n=r(652983);function o(e){let t=(0,n.useRef)();return(0,n.useEffect)(()=>{t.current=e},[e]),t.current}},990748:function(e,t,r){r.d(t,{m:function(){return a}});var n,o=r(652983),i=((n=i||{})[n.Up=0]="Up",n[n.Down=1]="Down",n[n.None=2]="None",n);let a=(e=[],t,r,n)=>{let{0:a,1:s}=(0,o.useState)(i.None),l=(0,o.useRef)(0),{0:c,1:u}=(0,o.useState)(0),p=(0,o.useRef)(null),d=(0,o.useRef)(e?.length??0),f=(0,o.useRef)(),h=(0,o.useRef)(!0),g=(0,o.useRef)(e&&e.length?e[e.length-1]:null),m=(0,o.useCallback)(e=>{let t=e.currentTarget?.scrollTop;s(t-l.current<0?i.Up:i.Down),l.current=t,u(t)},[]),y=(0,o.useRef)(null);return(0,o.useEffect)(()=>(y?.current?.addEventListener("scroll",m),()=>y?.current?.removeEventListener("scroll",m)),[y.current]),y.current&&0!==d.current&&d.current<e.length&&(f.current=y.current.scrollHeight-y.current.scrollTop),d.current=e.length,(0,o.useEffect)(()=>{p.current&&h.current&&(h.current=!1,t());let r=e&&e.length&&g.current===e[e.length-1];f.current&&y.current&&r&&(y.current.scrollTop=y.current.scrollHeight-f.current),f.current=null,r&&(g.current=e&&e.length?e[e.length-1]:null)}),(0,o.useEffect)(()=>{if(a===i.Up&&c<700&&r(),a===i.Down){let e=y.current;e&&e.scrollHeight-Math.abs(e.scrollTop)<e.clientHeight+500&&n()}},[a,c]),[y,p]}}}]);
//# sourceMappingURL=19808-ea6a5ca7f6195c4c.js.map